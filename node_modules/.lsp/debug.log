Hello - from /Users/mike/.vscode/extensions/jaredly.reason-vscode-1.7.5/bin.native
Previous log location: /var/folders/bq/171rtm851494s4q_zmskhm580000gp/T/lsp.log
Sending notification {"jsonrpc": "2.0", "method": "client/registerCapability", "params": {"registrations": [{"id": "watching", "method": "workspace/didChangeWatchedFiles", "registerOptions": {"watchers": [{"globPattern": "**/bsconfig.json"}, {"globPattern": "**/.merlin"}]}}]}}
Sending response {"id": 0, "jsonrpc": "2.0", "result": {"capabilities": {"textDocumentSync": 1, "hoverProvider": true, "completionProvider": {"resolveProvider": true, "triggerCharacters": ["."]}, "signatureHelpProvider": {"triggerCharacters": ["("]}, "definitionProvider": true, "typeDefinitionProvider": true, "referencesProvider": true, "documentSymbolProvider": true, "codeActionProvider": true, "executeCommandProvider": {"commands": ["reason-language-server.add_to_interface_inner"]}, "codeLensProvider": {"resolveProvider": true}, "documentHighlightProvider": true, "documentRangeFormattingProvider": true, "documentFormattingProvider": true, "renameProvider": true}}}
Read message 
{"jsonrpc":"2.0","method":"initialized","params":{}}
Read message 
{"jsonrpc":"2.0","method":"workspace/didChangeConfiguration","params":{"settings":{"reason_language_server":{"location":"","build_system_override_by_root":{},"refmt":"","lispRefmt":"","mlfmt":"","format_width":80,"per_value_codelens":false,"dependencies_codelens":true,"opens_codelens":true,"show_module_path_on_hover":true,"reloadOnChange":false,"show_debug_errors":false,"autoRebuild":true}}}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","languageId":"reason","version":1,"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}}}
📣 📣 NEW BSB PACKAGE 📣 📣
- location: /Users/mike/Code/condorcet/priv/assets
- bsPlatform: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform
- buildSystem: bsb version 7.0.1
- build command: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Deps rationale, reason-react, bs-webapi, bs-fetch, @glennsl/bs-json
Dep loc /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/bsconfig.json
Compiled base: /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs
Source directories: /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src
Source files found: /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Identity.re : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/KIO.re : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Function.re : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Monoid.re : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Option.rei : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Dict.re : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/RList.rei : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Writer.re : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Reader.re : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Result.re : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/RArray.re : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Monad.re : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Alt.re : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Alternative.re : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Logic.re : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Util.re : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/IO.re : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/RList.re : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Plus.re : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Dict.rei : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Option.re : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/RArray.rei : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Applicative.re : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Lens.re
Adding intf /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Option.rei
Adding intf /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/RList.rei
Adding intf /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Dict.rei
Adding intf /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/RArray.rei
Bad source file (extension) /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Option.rei
Bad source file (extension) /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/RList.rei
Bad source file (extension) /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/Dict.rei
Bad source file (extension) /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/src/RArray.rei
adding namespace Rationale : Rationale : /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/Rationale.cmt
Dep loc /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/bsconfig.json
Compiled base: /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs
Source directories: /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src
Source files found: /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReasonReactRouter.rei : /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReasonReactCompat.re : /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReactDOMRe.re : /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReactEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReactEventRe.rei : /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReasonReact.re : /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReasonReactOptimizedCreateClass.re : /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReactDOMServerRe.re : /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReasonReactCompat.rei : /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReactEventRe.re : /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReactEvent.rei : /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReasonReact.rei : /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReasonReactRouter.re : /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/React.re
Adding intf /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReasonReactRouter.rei
Adding intf /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReactEventRe.rei
Adding intf /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReasonReactCompat.rei
Adding intf /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReactEvent.rei
Adding intf /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReasonReact.rei
Bad source file (extension) /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReasonReactRouter.rei
Bad source file (extension) /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReactEventRe.rei
Bad source file (extension) /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReasonReactCompat.rei
Bad source file (extension) /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReactEvent.rei
Bad source file (extension) /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/ReasonReact.rei
Dep loc /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/bsconfig.json
Compiled base: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs
Source directories: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src - /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi - /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom - /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Canvas
Source files found: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Url.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Canvas.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Node.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ShadowRoot.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__NodeIterator.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__KeyboardEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__TransitionEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__TouchEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__InputEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__RelatedEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Attr.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__CustomEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__History.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__PageTransitionEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Selection.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__BeforeUnloadEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__HtmlFormElement.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__NamedNodeMap.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__WebGlContextEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ParentNode.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__HtmlCollection.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__MutationRecord.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DomStringMap.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__WheelEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DomRect.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__IdbVersionChangeEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__FocusEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__MutationObserver.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DocumentType.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ChildNode.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__GlobalEventHandlers.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Text.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__CdataSection.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Image.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DomTokenList.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__MouseEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__StorageEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__CssStyleDeclaration.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__TimeEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Event.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__EventTarget.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DomImplementation.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Slotable.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ProgressEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ClipboardEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ProcessingInstruction.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DocumentFragment.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Element.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__AnimationEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__NonElementParentNode.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__UiEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__HtmlDocument.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__PopStateEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ErrorEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__SvgZoomEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DragEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__NodeFilter.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__PointerEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__CompositionEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Range.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__CharacterData.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__TreeWalker.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Location.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Window.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__HtmlImageElement.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DocumentOrShadowRoot.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__CloseEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__TrackEvent.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__NodeList.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__HtmlInputElement.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ValidityState.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Types.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Document.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__HtmlElement.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__NonDocumentTypeChildNode.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Comment.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__File.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Canvas/Webapi__Canvas__WebGl.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Canvas/Webapi__Canvas__Canvas2d.re : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/src/Webapi/Webapi__Base64.re
Dep loc /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/bsconfig.json
Compiled base: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs
Source directories: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/src
Source files found: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/src/bs_fetch.ml : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/src/Fetch.mli : /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/src/Fetch.ml
Adding intf /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/src/Fetch.mli
Bad source file (extension) /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/src/Fetch.mli
Dep loc /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/bsconfig.json
Compiled base: /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs
Source directories: /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/src
Source files found: /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/src/Json_decode.ml : /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/src/Json.mli : /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/src/Json.ml : /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/src/Json_decode.mli : /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/src/Json_encode.ml : /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/src/Json_encode.mli
Adding intf /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/src/Json.mli
Adding intf /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/src/Json_decode.mli
Adding intf /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/src/Json_encode.mli
Bad source file (extension) /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/src/Json.mli
Bad source file (extension) /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/src/Json_decode.mli
Bad source file (extension) /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/src/Json_encode.mli
Got source directories ./src
Source directories: /Users/mike/Code/condorcet/priv/assets/src
Source files found: /Users/mike/Code/condorcet/priv/assets/src/Data.re : /Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re : /Users/mike/Code/condorcet/priv/assets/src/TakePoll.re : /Users/mike/Code/condorcet/priv/assets/src/App.re : /Users/mike/Code/condorcet/priv/assets/src/Api.re : /Users/mike/Code/condorcet/priv/assets/src/PollResultsPage.re : /Users/mike/Code/condorcet/priv/assets/src/Layout.re : /Users/mike/Code/condorcet/priv/assets/src/TakePollPage.re : /Users/mike/Code/condorcet/priv/assets/src/NewPoll.re : /Users/mike/Code/condorcet/priv/assets/src/NotFound.re : /Users/mike/Code/condorcet/priv/assets/src/PollResults.re : /Users/mike/Code/condorcet/priv/assets/src/Greeting.re : /Users/mike/Code/condorcet/priv/assets/src/Home.re : /Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re : /Users/mike/Code/condorcet/priv/assets/src/Style.re : /Users/mike/Code/condorcet/priv/assets/src/R.re : /Users/mike/Code/condorcet/priv/assets/src/index.re
adding namespace Condorcet : Condorcet : /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
-- All local modules found: 18
Condorcet
impl /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
Data-Condorcet
impl /Users/mike/Code/condorcet/priv/assets/lib/bs/src/Data-Condorcet.cmt
ManagePoll-Condorcet
impl /Users/mike/Code/condorcet/priv/assets/lib/bs/src/ManagePoll-Condorcet.cmt
TakePoll-Condorcet
impl /Users/mike/Code/condorcet/priv/assets/lib/bs/src/TakePoll-Condorcet.cmt
App-Condorcet
impl /Users/mike/Code/condorcet/priv/assets/lib/bs/src/App-Condorcet.cmt
Api-Condorcet
impl /Users/mike/Code/condorcet/priv/assets/lib/bs/src/Api-Condorcet.cmt
PollResultsPage-Condorcet
impl /Users/mike/Code/condorcet/priv/assets/lib/bs/src/PollResultsPage-Condorcet.cmt
Layout-Condorcet
impl /Users/mike/Code/condorcet/priv/assets/lib/bs/src/Layout-Condorcet.cmt
TakePollPage-Condorcet
impl /Users/mike/Code/condorcet/priv/assets/lib/bs/src/TakePollPage-Condorcet.cmt
NewPoll-Condorcet
impl /Users/mike/Code/condorcet/priv/assets/lib/bs/src/NewPoll-Condorcet.cmt
NotFound-Condorcet
impl /Users/mike/Code/condorcet/priv/assets/lib/bs/src/NotFound-Condorcet.cmt
PollResults-Condorcet
impl /Users/mike/Code/condorcet/priv/assets/lib/bs/src/PollResults-Condorcet.cmt
Greeting-Condorcet
impl /Users/mike/Code/condorcet/priv/assets/lib/bs/src/Greeting-Condorcet.cmt
Home-Condorcet
impl /Users/mike/Code/condorcet/priv/assets/lib/bs/src/Home-Condorcet.cmt
ManagePollPage-Condorcet
impl /Users/mike/Code/condorcet/priv/assets/lib/bs/src/ManagePollPage-Condorcet.cmt
Style-Condorcet
impl /Users/mike/Code/condorcet/priv/assets/lib/bs/src/Style-Condorcet.cmt
R-Condorcet
impl /Users/mike/Code/condorcet/priv/assets/lib/bs/src/R-Condorcet.cmt
Index-Condorcet
impl /Users/mike/Code/condorcet/priv/assets/lib/bs/src/index-Condorcet.cmt
############ Namespaced as Condorcet at /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
Dependency dirs /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src
Read message 
{"jsonrpc":"2.0","id":1,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":25,"character":4},"end":{"line":25,"character":4}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00810623168945ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 1, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":2,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0400543212891ms
Sending response {"id": 2, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 74, "character": 2}, "end": {"line": 74, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 30, "character": 2}, "end": {"line": 30, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":3,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0278949737549ms
Sending response {"id": 3, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 74, "character": 2}, "end": {"line": 74, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 30, "character": 2}, "end": {"line": 30, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":4,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":18,"character":4},"end":{"line":18,"character":4}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0138282775879ms
Sending response {"id": 4, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":5,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":24,"character":8},"end":{"line":24,"character":9}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0181198120117ms
Sending response {"id": 5, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":6,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":13,"character":2},"end":{"line":13,"character":2}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0171661376953ms
Sending response {"id": 6, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":7,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":5,"character":4},"end":{"line":13,"character":2}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0169277191162ms
Sending response {"id": 7, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":8,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":4,"character":4}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0259876251221ms
[ref] Got a loc for pos
Sending response {"id": 8, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 4, "character": 4}, "end": {"line": 4, "character": 6}}, "kind": 2}, {"range": {"start": {"line": 2, "character": 21}, "end": {"line": 2, "character": 23}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":9,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":3,"character":4}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0200271606445ms
Sending response {"id": 9, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":10,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":2,"character":4}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0109672546387ms
[ref] Got a loc for pos
Sending response {"id": 10, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 2, "character": 4}, "end": {"line": 2, "character": 13}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":11,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":2,"character":4},"end":{"line":2,"character":4}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0178813934326ms
Sending response {"id": 11, "jsonrpc": "2.0", "result": [{"title": "Add to interface file", "command": "reason-language-server.add_to_interface_inner", "arguments": ["file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "let fetchPoll: (\n  string,\n  'b => option(\n    Condorcet.Data.poll\n  ) => 'a\n) => unit"]}]}
Read message 
{"jsonrpc":"2.0","id":12,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":2,"character":21},"end":{"line":2,"character":21}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0298023223877ms
Sending response {"id": 12, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":13,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":2,"character":21},"end":{"line":2,"character":23}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0169277191162ms
Sending response {"id": 13, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":14,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":2,"character":21}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0121593475342ms
[ref] Got a loc for pos
Sending response {"id": 14, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 4, "character": 4}, "end": {"line": 4, "character": 6}}, "kind": 2}, {"range": {"start": {"line": 2, "character": 21}, "end": {"line": 2, "character": 23}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":15,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":2,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0121593475342ms
Sending response {"id": 15, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":16,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":2,"character":4},"end":{"line":2,"character":13}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0200271606445ms
Sending response {"id": 16, "jsonrpc": "2.0", "result": [{"title": "Add to interface file", "command": "reason-language-server.add_to_interface_inner", "arguments": ["file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "let fetchPoll: (\n  string,\n  'b => option(\n    Condorcet.Data.poll\n  ) => 'a\n) => unit"]}]}
Read message 
{"jsonrpc":"2.0","id":17,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":9,"character":12}}}
[server] Got a method textDocument/hover
[server] processing took 0.0309944152832ms
[ref] Getting global Js
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js.cmi, /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js.ml)
FINDING /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js.cmi src /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js.ml
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js_promise.cmt, /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js_promise.ml)
FINDING /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js_promise.cmt src /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js_promise.ml
[ref] Getting for 1014 in then_
[ref] Trying for declared Value 1014 in file file:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js_promise.ml
[ref] Yes!! got it
Sending response {"id": 17, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 9, "character": 7}, "end": {"line": 9, "character": 12}}, "contents": {"kind": "markdown", "value": "```\n(\n  'a => Js.Promise.t('b),\n  Js.Promise.t('a)\n) => Js.Promise.t('b)\n```\n\n<root>/priv/assets/node_modules/bs-platform/lib/ocaml/js_promise.ml"}}}
Read message 
{"jsonrpc":"2.0","id":18,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":2,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0171661376953ms
Sending response {"id": 18, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":19,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":2,"character":0},"end":{"line":2,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0388622283936ms
Sending response {"id": 19, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":20,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":2,"character":0},"end":{"line":14,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0228881835938ms
Sending response {"id": 20, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":21,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":2,"character":0},"end":{"line":13,"character":2}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0228881835938ms
Sending response {"id": 21, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":4},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":22,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0109672546387ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 22, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":23,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":26,"character":2},"end":{"line":26,"character":2}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00715255737305ms
Sending response {"id": 23, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":24,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0169277191162ms
Sending response {"id": 24, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":25,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":15,"character":10}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.03981590271ms
[ref] Got a loc for pos
Sending response {"id": 25, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 15, "character": 4}, "end": {"line": 15, "character": 13}}, "kind": 2}]}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": [{"range": {"start": {"line": 2, "character": 4}, "end": {"line": 2, "character": 13}}, "message": "Warning 32: unused value fetchPoll.", "severity": 2}]}}
Read message 
{"jsonrpc":"2.0","id":26,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":15,"character":10}}}
[server] Got a method textDocument/hover
[server] processing took 0.0119209289551ms
[ref] Trying for declared Value 1179 in file file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 26, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 15, "character": 4}, "end": {"line": 15, "character": 13}}, "contents": {"kind": "markdown", "value": "```\n(\n  string,\n  'b => option(\n    Condorcet.Data.poll\n  ) => 'a\n) => unit\n```\n\n<root>/priv/assets/src/Api.re"}}}
Read message 
{"jsonrpc":"2.0","id":27,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":15,"character":9},"end":{"line":15,"character":9}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00905990600586ms
Sending response {"id": 27, "jsonrpc": "2.0", "result": [{"title": "Add to interface file", "command": "reason-language-server.add_to_interface_inner", "arguments": ["file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "let fetchPoll: (\n  string,\n  'b => option(\n    Condorcet.Data.poll\n  ) => 'a\n) => unit"]}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":8},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManaPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":28,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0159740447998ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 28, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":29,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":15,"character":13},"end":{"line":15,"character":13}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00810623168945ms
Sending response {"id": 29, "jsonrpc": "2.0", "result": [{"title": "Add to interface file", "command": "reason-language-server.add_to_interface_inner", "arguments": ["file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "let fetchManaPoll: (\n  string,\n  'b => option(\n    Condorcet.Data.poll\n  ) => 'a\n) => unit"]}]}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":30,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0128746032715ms
Sending response {"id": 30, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":10},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":31,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0128746032715ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 31, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":32,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00715255737305ms
Sending response {"id": 32, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":33,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0121593475342ms
Sending response {"id": 33, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":34,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":15,"character":15},"end":{"line":15,"character":15}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0100135803223ms
Sending response {"id": 34, "jsonrpc": "2.0", "result": [{"title": "Add to interface file", "command": "reason-language-server.add_to_interface_inner", "arguments": ["file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "let fetchManagePoll: (\n  string,\n  'b => option(\n    Condorcet.Data.poll\n  ) => 'a\n) => unit"]}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":10},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":10}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/10] [34mBuilding[39m [2msrc/Api.reast[22m
[2/10] [34mBuilding[39m [2msrc/Api.d[22m
[3/10] [34mBuilding[39m [2msrc/Api-Condorcet.cmj[22m
[4/10] [34mBuilding[39m [2msrc/ManagePollPage-Condorcet.cmj[22m
[5/10] [34mBuilding[39m [2msrc/PollResultsPage-Condorcet.cmj[22m
[6/10] [34mBuilding[39m [2msrc/TakePoll-Condorcet.cmj[22m
[7/10] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
[8/10] [34mBuilding[39m [2msrc/TakePollPage-Condorcet.cmj[22m
[9/10] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
[10/10] [34mBuilding[39m [2msrc/index-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Data.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Data-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Data.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Data.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/NotFound.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/NotFound-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/NotFound.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/NotFound.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/index.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Index-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/index.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/index.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Greeting.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Greeting-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Greeting.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Greeting.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Layout.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Layout-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Layout.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Layout.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/TakePoll.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/TakePoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/TakePoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/TakePoll.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/PollResultsPage.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/PollResultsPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/PollResultsPage.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/PollResultsPage.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Style.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Style-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Style.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Style.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Home.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Home-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Home.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Home.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/R.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/R-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/R.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/R.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/PollResults.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/PollResults-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/PollResults.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/PollResults.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/TakePollPage.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/TakePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/TakePollPage.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/TakePollPage.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":35,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":15,"character":4},"end":{"line":15,"character":19}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00691413879395ms
Sending response {"id": 35, "jsonrpc": "2.0", "result": [{"title": "Add to interface file", "command": "reason-language-server.add_to_interface_inner", "arguments": ["file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "let fetchManagePoll: (\n  string,\n  'b => option(\n    Condorcet.Data.poll\n  ) => 'a\n) => unit"]}]}
Read message 
{"jsonrpc":"2.0","id":36,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":21,"character":48}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0119209289551ms
[ref] Got a loc for pos
Sending response {"id": 36, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":37,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":21,"character":46},"end":{"line":21,"character":51}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0100135803223ms
Sending response {"id": 37, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":35}}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":36}}
Read message 
{"jsonrpc":"2.0","id":38,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":21,"character":59},"end":{"line":21,"character":59}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0100135803223ms
Sending response {"id": 38, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":11},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":12},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id \"\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":39,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0379085540771ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.cmt
Size 37209
Sending response {"id": 39, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":40,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":21,"character":61},"end":{"line":21,"character":61}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00882148742676ms
Sending response {"id": 40, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":41,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0181198120117ms
Sending response {"id": 41, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":13},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":42,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0190734863281ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 42, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":43,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":21,"character":60},"end":{"line":21,"character":60}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00810623168945ms
Sending response {"id": 43, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":44,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0190734863281ms
Sending response {"id": 44, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":15},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":45,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0150203704834ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.cmt
Size 11907
Sending response {"id": 45, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":46,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":21,"character":62},"end":{"line":21,"character":62}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00810623168945ms
Sending response {"id": 46, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": [{"range": {"start": {"line": 21, "character": 62}, "end": {"line": 21, "character": 63}}, "message": "Error: Syntax error", "severity": 1}, {"range": {"start": {"line": 21, "character": 62}, "end": {"line": 21, "character": 62}}, "message": "Error: Uninterpreted extension 'merlin.hole'.", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","id":47,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.046968460083ms
Sending response {"id": 47, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":17},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":18},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":48,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0100135803223ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 48, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":49,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":21,"character":65},"end":{"line":21,"character":65}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00691413879395ms
Sending response {"id": 49, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":50,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0131130218506ms
Sending response {"id": 50, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":24},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":51,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0851154327393ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 51, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":52,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":21,"character":71},"end":{"line":21,"character":71}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0178813934326ms
Sending response {"id": 52, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":53,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.014066696167ms
Sending response {"id": 53, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":54,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0228881835938ms
Sending response {"id": 54, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":24},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":24}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/10] [34mBuilding[39m [2msrc/Api.reast[22m
[2/10] [34mBuilding[39m [2msrc/Api.d[22m
[3/10] [34mBuilding[39m [2msrc/Api-Condorcet.cmj[22m
[4/10] [34mBuilding[39m [2msrc/ManagePollPage-Condorcet.cmj[22m
[5/10] [34mBuilding[39m [2msrc/PollResultsPage-Condorcet.cmj[22m
[6/10] [34mBuilding[39m [2msrc/TakePoll-Condorcet.cmj[22m
[7/10] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
[8/10] [34mBuilding[39m [2msrc/TakePollPage-Condorcet.cmj[22m
[9/10] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
[10/10] [34mBuilding[39m [2msrc/index-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":55,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.014066696167ms
Sending response {"id": 55, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":56,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":21,"character":59}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0131130218506ms
[ref] Got a loc for pos
Sending response {"id": 56, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 21, "character": 57}, "end": {"line": 21, "character": 59}}, "kind": 2}, {"range": {"start": {"line": 15, "character": 23}, "end": {"line": 15, "character": 25}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":55}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":24},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":24}}}
Read message 
{"jsonrpc":"2.0","id":57,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":21,"character":57},"end":{"line":21,"character":59}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00905990600586ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 57, "jsonrpc": "2.0", "result": null}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/10] [34mBuilding[39m [2msrc/Api.reast[22m
[2/10] [34mBuilding[39m [2msrc/Api.d[22m
[3/10] [34mBuilding[39m [2msrc/Api-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":58,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":21,"character":59},"end":{"line":21,"character":59}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0250339508057ms
Sending response {"id": 58, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":59,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":16,"character":25}}}
[server] Got a method textDocument/hover
[server] processing took 0.0109672546387ms
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/src/Data-Condorcet.cmt, /Users/mike/Code/condorcet/priv/assets/src/Data.re)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/src/Data-Condorcet.cmt src /Users/mike/Code/condorcet/priv/assets/src/Data.re
Sending response {"id": 59, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 16, "character": 22}, "end": {"line": 16, "character": 26}}, "contents": {"kind": "markdown", "value": "```\nmodule Data-Condorcet = {\n  type poll = {\n  id: option(string),\n  choices: list(string),\n  manageToken: option(string),\n  question: string\n}\n  type response = {\n  id: option(int),\n  name: string,\n  order: list(string)\n}\n  type winnerMap = {\n  borda: list(string),\n  ranked: list(string),\n  plurality: list(string)\n}\n  type result = {\n  winners: option(winnerMap),\n  responseCount: int,\n  poll: poll\n}\n  type errorsMap = {\n  choices: option(list(string)),\n  question: option(list(string))\n}\n  type errors = {errors: errorsMap}\n  type pollVariant = | Errors(errors) | Poll(poll)\n\n  module Decode;\n  let encodePoll: poll => Js.Json.t;\n  let encodeResponse: response => Js.Json.t;\n  let encodePollPost: poll => Js.Json.t;\n  let encodeResponsePost: response => Js.Json.t;\n}\n```"}}}
Read message 
{"jsonrpc":"2.0","id":60,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":15,"character":22},"end":{"line":15,"character":22}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0190734863281ms
Sending response {"id": 60, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":61,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":15,"character":25}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0209808349609ms
[ref] Got a loc for pos
Sending response {"id": 61, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 21, "character": 57}, "end": {"line": 21, "character": 59}}, "kind": 2}, {"range": {"start": {"line": 15, "character": 23}, "end": {"line": 15, "character": 25}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":62,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":15,"character":23},"end":{"line":15,"character":25}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0171661376953ms
Sending response {"id": 62, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":25},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (m, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":63,"method":"textDocument/completion","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":15,"character":24},"context":{"triggerKind":1}}}
[server] Got a method textDocument/completion
[server] processing took 0.00786781311035ms
Opens folkz > 0 
Package opens Pervasives Condorcet Condorcet
Package opens Pervasives Condorcet Condorcet
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.cmti, /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli)
FINDING /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.cmti src /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
Opens nows 3 file:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
---------------- LOCAL VAL
 - Completing in file:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli
 -- not capitalized
 - Completing in file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
 -- not capitalized
 - Completing in file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
 -- not capitalized
Sending response {"id": 63, "jsonrpc": "2.0", "result": [{"label": "mod_float", "kind": 12, "detail": "(float, float) => float", "documentation": "`mod_float a b` returns the remainder of `a` with respect to `b`. The returned value is `a -. n *. b`, where `n` is the quotient `a /. b` rounded towards zero to an integer.\n\n\n\nfile:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli:581"}, {"label": "max_float", "kind": 12, "detail": "float", "documentation": "The largest positive finite value of type `float`.\n\n\n\nfile:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli:636"}, {"label": "max_int", "kind": 12, "detail": "int", "documentation": "The greatest representable integer.\n\n\n\nfile:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli:299"}, {"label": "min_int", "kind": 12, "detail": "int", "documentation": "The smallest representable integer.\n\n\n\nfile:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli:302"}, {"label": "mod", "kind": 12, "detail": "(int, int) => int", "documentation": "Integer remainder. If `y` is not zero, the result of `x mod y` satisfies the following properties: `x = (x / y) * y + x mod y` and `abs(x mod y) <= abs(y) - 1`. If `y = 0`, `x mod y` raises `Division_by_zero`. Note that `x mod y` is negative only if `x < 0`. Raise `Division_by_zero` if `y` is zero. Left-associative operator at precedence level 7/11.\n\n\n\nfile:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli:285"}, {"label": "min", "kind": 12, "detail": "('a, 'a) => 'a", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli:106"}, {"label": "modf", "kind": 12, "detail": "float => (float, float)", "documentation": "`modf f` returns the pair of the fractional and integral part of `f`.\n\n\n\nfile:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli:599"}, {"label": "min_float", "kind": 12, "detail": "float", "documentation": "The smallest positive, non-zero, non-denormalized value of type `float`.\n\n\n\nfile:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli:639"}, {"label": "max", "kind": 12, "detail": "('a, 'a) => 'a", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli:107"}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":26},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (ma, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":64,"method":"completionItem/resolve","params":{"label":"max","detail":"('a, 'a) => 'a","documentation":"No docs\n\nfile:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli:107","insertTextFormat":1,"kind":12}}
[server] Got a method completionItem/resolve
[server] processing took 0.0169277191162ms
Sending response {"id": 64, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":27},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (man, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":65,"method":"completionItem/resolve","params":{"label":"max_int","detail":"int","documentation":"The greatest representable integer.\n\n\n\nfile:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli:299","insertTextFormat":1,"kind":12}}
[server] Got a method completionItem/resolve
[server] processing took 0.0150203704834ms
Sending response {"id": 65, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":29},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (manag, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":66,"method":"textDocument/completion","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":15,"character":28},"context":{"triggerKind":1}}}
[server] Got a method textDocument/completion
[server] processing took 0.0240802764893ms
Opens folkz > 0 
Package opens Pervasives Condorcet Condorcet
Package opens Pervasives Condorcet Condorcet
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.cmti, /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli)
FINDING /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.cmti src /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
Opens nows 3 file:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
---------------- LOCAL VAL
 - Completing in file:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli
 -- not capitalized
 - Completing in file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
 -- not capitalized
 - Completing in file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
 -- not capitalized
Sending response {"id": 66, "jsonrpc": "2.0", "result": []}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":32},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (manageTo, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":67,"method":"textDocument/completion","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":15,"character":31},"context":{"triggerKind":1}}}
[server] Got a method textDocument/completion
[server] processing took 0.00715255737305ms
Opens folkz > 0 
Package opens Pervasives Condorcet Condorcet
Package opens Pervasives Condorcet Condorcet
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.cmti, /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli)
FINDING /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.cmti src /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
Opens nows 3 file:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
---------------- LOCAL VAL
 - Completing in file:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli
 -- not capitalized
 - Completing in file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
 -- not capitalized
 - Completing in file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
 -- not capitalized
Sending response {"id": 67, "jsonrpc": "2.0", "result": []}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":33},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (manageTok, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":68,"method":"textDocument/completion","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":15,"character":32},"context":{"triggerKind":1}}}
[server] Got a method textDocument/completion
[server] processing took 0.0219345092773ms
Opens folkz > 0 
Package opens Pervasives Condorcet Condorcet
Package opens Pervasives Condorcet Condorcet
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.cmti, /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli)
FINDING /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.cmti src /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
Opens nows 3 file:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
---------------- LOCAL VAL
 - Completing in file:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli
 -- not capitalized
 - Completing in file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
 -- not capitalized
 - Completing in file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
 -- not capitalized
Sending response {"id": 68, "jsonrpc": "2.0", "result": []}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":34},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (manageToke, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":69,"method":"textDocument/completion","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":15,"character":33},"context":{"triggerKind":1}}}
[server] Got a method textDocument/completion
[server] processing took 0.0109672546387ms
Opens folkz > 0 
Package opens Pervasives Condorcet Condorcet
Package opens Pervasives Condorcet Condorcet
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.cmti, /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli)
FINDING /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.cmti src /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
Opens nows 3 file:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
---------------- LOCAL VAL
 - Completing in file:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli
 -- not capitalized
 - Completing in file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
 -- not capitalized
 - Completing in file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
 -- not capitalized
Sending response {"id": 69, "jsonrpc": "2.0", "result": []}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":35},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (manageToken, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":70,"method":"textDocument/completion","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":15,"character":34},"context":{"triggerKind":1}}}
[server] Got a method textDocument/completion
[server] processing took 0.00905990600586ms
Opens folkz > 0 
Package opens Pervasives Condorcet Condorcet
Package opens Pervasives Condorcet Condorcet
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.cmti, /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli)
FINDING /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.cmti src /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
Opens nows 3 file:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
---------------- LOCAL VAL
 - Completing in file:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli
 -- not capitalized
 - Completing in file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
 -- not capitalized
 - Completing in file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt
 -- not capitalized
Sending response {"id": 70, "jsonrpc": "2.0", "result": []}
Read message 
{"jsonrpc":"2.0","id":71,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0228881835938ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.cmt
Size 11976
Sending response {"id": 71, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":72,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":15,"character":34},"end":{"line":15,"character":34}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00882148742676ms
Sending response {"id": 72, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
type error here File "", line 22, characters 57-59:
Error: Unbound value id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": [{"range": {"start": {"line": 21, "character": 57}, "end": {"line": 21, "character": 59}}, "message": "Error: Unbound value id", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","id":73,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0209808349609ms
Sending response {"id": 73, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":74,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":15,"character":23},"end":{"line":15,"character":34}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0350475311279ms
Sending response {"id": 74, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":75,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":21,"character":58}}}
[server] Got a method textDocument/hover
[server] processing took 0.0178813934326ms
Sending response {"id": 75, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":76,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":21,"character":58}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0300407409668ms
Sending response {"id": 76, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":36},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (manageToken, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":77,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0150203704834ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 77, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":78,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":21,"character":68},"end":{"line":21,"character":68}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00715255737305ms
Sending response {"id": 78, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":79,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0109672546387ms
Sending response {"id": 79, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":80,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.00905990600586ms
Sending response {"id": 80, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 101, "character": 0}}, "newText": "[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (manageToken, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/manage\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":37},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (manageToken, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/manage\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":37}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/10] [34mBuilding[39m [2msrc/Api.reast[22m
[2/10] [34mBuilding[39m [2msrc/Api.d[22m
[3/10] [34mBuilding[39m [2msrc/Api-Condorcet.cmj[22m
[4/10] [34mBuilding[39m [2msrc/ManagePollPage-Condorcet.cmj[22m
[5/10] [34mBuilding[39m [2msrc/PollResultsPage-Condorcet.cmj[22m
[6/10] [34mBuilding[39m [2msrc/TakePoll-Condorcet.cmj[22m
[7/10] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
[8/10] [34mBuilding[39m [2msrc/TakePollPage-Condorcet.cmj[22m
[9/10] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
[10/10] [34mBuilding[39m [2msrc/index-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":81,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00691413879395ms
Sending response {"id": 81, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 35, "character": 2}, "end": {"line": 35, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":82,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":22,"character":58},"end":{"line":22,"character":58}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0150203704834ms
Sending response {"id": 82, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":83,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0119209289551ms
Sending response {"id": 83, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 35, "character": 2}, "end": {"line": 35, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":84,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.014066696167ms
Sending response {"id": 84, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":85,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":22,"character":58},"end":{"line":22,"character":58}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0128746032715ms
Sending response {"id": 85, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":82}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":37},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (manageToken, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/manage\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":37}}}
Read message 
{"jsonrpc":"2.0","id":86,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":15,"character":8}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0288486480713ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
[ref] Got a loc for pos
Sending response {"id": 86, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 15, "character": 4}, "end": {"line": 15, "character": 19}}, "kind": 2}]}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/10] [34mBuilding[39m [2msrc/Api.reast[22m
[2/10] [34mBuilding[39m [2msrc/Api.d[22m
[3/10] [34mBuilding[39m [2msrc/Api-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":87,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":15,"character":4},"end":{"line":15,"character":19}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.014066696167ms
Sending response {"id": 87, "jsonrpc": "2.0", "result": [{"title": "Add to interface file", "command": "reason-language-server.add_to_interface_inner", "arguments": ["file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "let fetchManagePoll: (\n  string,\n  'b => option(\n    Condorcet.Data.poll\n  ) => 'a\n) => unit"]}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re","languageId":"reason","version":1,"text":"[@react.component]\nlet make = (~result: Data.result) => {\n  <div>\n    <h1> {R.s(\"Poll: \" ++ result.poll.question)} </h1>\n    {switch (result.poll.id) {\n     | Some(id) =>\n       <button onClick={_ => ReasonReactRouter.push(\"/take-poll/\" ++ id)}>\n         {R.s(\"Take the Poll Yourself\")}\n       </button>\n     | _ => React.null\n     }}\n    <div>\n      <h2> {R.s(\"Links\")} </h2>\n      {switch (result.poll.id) {\n       | Some(takeToken) =>\n         <p>\n           {R.s(\"Link to take poll: localhost:1234/take-poll/\" ++ takeToken)}\n         </p>\n       | None => React.null\n       }}\n      {switch (result.poll.manageToken) {\n       | Some(manageToken) =>\n         <p>\n           {R.s(\"Link to take poll: localhost:1234/take-poll/\" ++ manageToken)}\n         </p>\n       | None => React.null\n       }}\n    </div>\n    <PollResults result />\n  </div>;\n};"}}}
Read message 
{"jsonrpc":"2.0","id":88,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0169277191162ms
Sending response {"id": 88, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":89,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0221729278564ms
Sending response {"id": 89, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReactDOMRe, React, Condorcet, Js, Pervasives, ReasonReactRouter", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":90,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0238418579102ms
Sending response {"id": 90, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReactDOMRe, React, Condorcet, Js, Pervasives, ReasonReactRouter", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didClose","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"}}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","languageId":"reason","version":1,"text":"[@react.component]\nlet make = (~id) => {\n  let (result, setResult) = React.useState(() => None);\n\n  React.useEffect0(() => {\n    Api.fetchResult(id, setResult);\n    None;\n  });\n\n  switch (result) {\n  | None => <p> {React.string(\"None\")} </p>\n  | Some(result) => <ManagePoll result />\n  };\n};"}}}
Read message 
{"jsonrpc":"2.0","id":91,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0150203704834ms
Sending response {"id": 91, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":92,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0231266021729ms
Sending response {"id": 92, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":93,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0159740447998ms
Sending response {"id": 93, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":94,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":10,"character":34}}}
[server] Got a method textDocument/hover
[server] processing took 0.0228881835938ms
Sending response {"id": 94, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 10, "character": 30}, "end": {"line": 10, "character": 36}}, "contents": {"kind": "markdown", "value": "string"}}}
Read message 
{"jsonrpc":"2.0","id":95,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":10,"character":21}}}
[server] Got a method textDocument/hover
[server] processing took 0.0240802764893ms
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src/React.cmt, /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/React.re)
FINDING /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src/React.cmt src /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/React.re
Sending response {"id": 95, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 10, "character": 17}, "end": {"line": 10, "character": 22}}, "contents": {"kind": "markdown", "value": "```\nmodule React = {\n  type element\n  let null: element;\n  let string: string => element;\n  let array: array(element) => element;\n  type componentLike('props, 'return) = 'props => 'return\n  type component('props) = componentLike('props, element)\n  let createElement: (component('props), 'props) => element;\n  let createElementVariadic: (\n  component('props),\n  'props,\n  array(element)\n) => element;\n  module Ref;\n  module Context;\n  let createContext: 'a => Context.t('a);\n  let forwardRef: (\n  'props,\n  Js.Nullable.t(\n    Ref.t('a)\n  )\n) => element => component('props);\n  let memo: component('props) => component('props);\n  let memoCustomCompareProps: (\n  component('props),\n  (\n    'props,\n    'props\n  ) => bool\n) => component('props);\n  module Fragment;\n  module Suspense;\n  let useState: unit => 'state => (\n  'state,\n  'state => 'state => unit\n);\n  let useReducer: (\n  ('state, 'action) => 'state,\n  'state\n) => ('state, 'action => unit);\n  let useReducerWithMapState: (\n  ('state, 'action) => 'state,\n  'initialState,\n  'initialState => 'state\n) => ('state, 'action => unit);\n  let useEffect: unit => option(unit => unit) => unit;\n  let useEffect0: unit => option(unit => unit) => unit;\n  let useEffect1: (\n  unit => option(unit => unit),\n  array('a)\n) => unit;\n  let useEffect2: (\n  unit => option(unit => unit),\n  ('a, 'b)\n) => unit;\n  let useEffect3: (\n  unit => option(unit => unit),\n  ('a, 'b, 'c)\n) => unit;\n  let useEffect4: (\n  unit => option(unit => unit),\n  ('a, 'b, 'c, 'd)\n) => unit;\n  let useEffect5: (\n  unit => option(unit => unit),\n  ('a, 'b, 'c, 'd, 'e)\n) => unit;\n  let useLayoutEffect: unit => option(unit => unit) => unit;\n  let useLayoutEffect0: unit => option(unit => unit) => unit;\n  let useLayoutEffect1: (\n  unit => option(unit => unit),\n  array('a)\n) => unit;\n  let useLayoutEffect2: (\n  unit => option(unit => unit),\n  ('a, 'b)\n) => unit;\n  let useMemo: unit => 'any => 'any;\n  let useMemo0: unit => 'any => 'any;\n  let useMemo1: (unit => 'any, array('a)) => 'any;\n  let useMemo2: (unit => 'any, ('a, 'b)) => 'any;\n  let useMemo3: (unit => 'any, ('a, 'b, 'c)) => 'any;\n  let useMemo4: (unit => 'any, ('a, 'b, 'c, 'd)) => 'any;\n  let useMemo5: (\n  unit => 'any,\n  ('a, 'b, 'c, 'd, 'e)\n) => 'any;\n  let useMemo6: (\n  unit => 'any,\n  ('a, 'b, 'c, 'd, 'e, 'f)\n) => 'any;\n  type callback('input, 'output) = 'input => 'output\n  let useCallback: 'input => 'output => callback(\n  'input,\n  'output\n);\n  let useCallback0: 'input => 'output => callback(\n  'input,\n  'output\n);\n  let useCallback1: (\n  'input => 'output,\n  array('a)\n) => callback('input, 'output);\n  let useCallback2: (\n  'input => 'output,\n  ('a, 'b)\n) => callback('input, 'output);\n  let useCallback3: (\n  'input => 'output,\n  ('a, 'b, 'c)\n) => callback('input, 'output);\n  let useContext: Context.t('any) => 'any;\n  let useRef: 'value => Ref.t('value);\n  let useImperativeHandle0: (\n  Js.Nullable.t(Ref.t('value)),\n  unit => 'value\n) => unit;\n  let useImperativeHandle1: (\n  Js.Nullable.t(Ref.t('value)),\n  unit => 'value,\n  array('a)\n) => unit;\n  let useImperativeHandle2: (\n  Js.Nullable.t(Ref.t('value)),\n  unit => 'value,\n  ('a, 'b)\n) => unit;\n  let setDisplayName: (component('props), string) => unit;\n}\n```"}}}
Read message 
{"jsonrpc":"2.0","id":96,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":10,"character":23}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.014066696167ms
[ref] Got a loc for pos
Sending response {"id": 96, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 10, "character": 23}, "end": {"line": 10, "character": 29}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":97,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":10,"character":23},"end":{"line":10,"character":23}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0150203704834ms
Sending response {"id": 97, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":98,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":4,"character":15}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0159740447998ms
[ref] Got a loc for pos
Sending response {"id": 98, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 4, "character": 8}, "end": {"line": 4, "character": 18}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":99,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":4,"character":8},"end":{"line":4,"character":18}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0309944152832ms
Sending response {"id": 99, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":100,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":5,"character":14}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0200271606445ms
[ref] Got a loc for pos
Sending response {"id": 100, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 5, "character": 8}, "end": {"line": 5, "character": 19}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":101,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":5,"character":8},"end":{"line":5,"character":19}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0231266021729ms
Sending response {"id": 101, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":102,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":5,"character":19}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0431537628174ms
[ref] Got a loc for pos
Sending response {"id": 102, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 5, "character": 8}, "end": {"line": 5, "character": 19}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":103,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":5,"character":0},"end":{"line":6,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0231266021729ms
Sending response {"id": 103, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":38},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManagePoll = (manageToken, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":104,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.127077102661ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 104, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":105,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":21,"character":68},"end":{"line":21,"character":68}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0419616699219ms
Sending response {"id": 105, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":106,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0228881835938ms
Sending response {"id": 106, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":107,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":14,"character":0},"end":{"line":27,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0190734863281ms
Sending response {"id": 107, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":39},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":108,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0150203704834ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 108, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 74, "character": 2}, "end": {"line": 74, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 30, "character": 2}, "end": {"line": 30, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":109,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00810623168945ms
Sending response {"id": 109, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 74, "character": 2}, "end": {"line": 74, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 30, "character": 2}, "end": {"line": 30, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":110,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0200271606445ms
Sending response {"id": 110, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":39},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":39}}}
Read message 
{"jsonrpc":"2.0","id":111,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.00905990600586ms
Sending response {"id": 111, "jsonrpc": "2.0", "result": null}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/10] [34mBuilding[39m [2msrc/Api.reast[22m
[2/10] [34mBuilding[39m [2msrc/Api.d[22m
[3/10] [34mBuilding[39m [2msrc/Api-Condorcet.cmj[22m
[4/10] [34mBuilding[39m [2msrc/ManagePollPage-Condorcet.cmj[22m
[5/10] [34mBuilding[39m [2msrc/PollResultsPage-Condorcet.cmj[22m
[6/10] [34mBuilding[39m [2msrc/TakePoll-Condorcet.cmj[22m
[7/10] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
[8/10] [34mBuilding[39m [2msrc/TakePollPage-Condorcet.cmj[22m
[9/10] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
[10/10] [34mBuilding[39m [2msrc/index-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":39},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":39}}}
Read message 
{"jsonrpc":"2.0","id":112,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":16,"character":15}}}
[server] Got a method textDocument/hover
[server] processing took 0.0100135803223ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 112, "jsonrpc": "2.0", "result": null}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":112}}
Read message 
{"jsonrpc":"2.0","id":113,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":13,"character":2},"end":{"line":13,"character":2}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0259876251221ms
Sending response {"id": 113, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":114,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":15,"character":2}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0131130218506ms
Sending response {"id": 114, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":115,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":15,"character":2},"end":{"line":15,"character":2}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0178813934326ms
Sending response {"id": 115, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":116,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":15,"character":0},"end":{"line":15,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0181198120117ms
Sending response {"id": 116, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":117,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":15,"character":0},"end":{"line":26,"character":2}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.018835067749ms
Sending response {"id": 117, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":118,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":26,"character":2},"end":{"line":26,"character":2}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0169277191162ms
Sending response {"id": 118, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":42},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":119,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.014066696167ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 119, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":120,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":39,"character":2},"end":{"line":39,"character":2}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00715255737305ms
Sending response {"id": 120, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":121,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0600814819336ms
Sending response {"id": 121, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":122,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":36,"character":10}}}
[server] Got a method textDocument/hover
[server] processing took 0.0309944152832ms
[ref] Getting global Js
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js.cmi, /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js.ml)
FINDING /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js.cmi src /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js.ml
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js_promise.cmt, /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js_promise.ml)
FINDING /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js_promise.cmt src /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js_promise.ml
[ref] Getting for 1014 in then_
[ref] Trying for declared Value 1014 in file file:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js_promise.ml
[ref] Yes!! got it
Sending response {"id": 122, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 36, "character": 7}, "end": {"line": 36, "character": 12}}, "contents": {"kind": "markdown", "value": "```\n(\n  'a => Js.Promise.t('b),\n  Js.Promise.t('a)\n) => Js.Promise.t('b)\n```\n\n<root>/priv/assets/node_modules/bs-platform/lib/ocaml/js_promise.ml"}}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": [{"range": {"start": {"line": 15, "character": 4}, "end": {"line": 15, "character": 15}}, "message": "Warning 32: unused value fetchResult.", "severity": 2}]}}
Read message 
{"jsonrpc":"2.0","id":123,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":39,"character":2},"end":{"line":39,"character":2}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0169277191162ms
Sending response {"id": 123, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":124,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":28,"character":10}}}
[server] Got a method textDocument/hover
[server] processing took 0.0209808349609ms
[ref] Trying for declared Value 1186 in file file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 124, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 28, "character": 4}, "end": {"line": 28, "character": 15}}, "contents": {"kind": "markdown", "value": "```\n(\n  string,\n  'b => option(\n    Condorcet.Data.result\n  ) => 'a\n) => unit\n```\n\n<root>/priv/assets/src/Api.re"}}}
Read message 
{"jsonrpc":"2.0","id":125,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":28,"character":10}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0128746032715ms
[ref] Got a loc for pos
Sending response {"id": 125, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 28, "character": 4}, "end": {"line": 28, "character": 15}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":126,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":28,"character":10},"end":{"line":28,"character":10}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0221729278564ms
Sending response {"id": 126, "jsonrpc": "2.0", "result": [{"title": "Add to interface file", "command": "reason-language-server.add_to_interface_inner", "arguments": ["file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "let fetchResult: (\n  string,\n  'b => option(\n    Condorcet.Data.result\n  ) => 'a\n) => unit"]}]}
Read message 
{"jsonrpc":"2.0","id":127,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":28,"character":9},"end":{"line":28,"character":9}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0181198120117ms
Sending response {"id": 127, "jsonrpc": "2.0", "result": [{"title": "Add to interface file", "command": "reason-language-server.add_to_interface_inner", "arguments": ["file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "let fetchResult: (\n  string,\n  'b => option(\n    Condorcet.Data.result\n  ) => 'a\n) => unit"]}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":48},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":128,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0150203704834ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 128, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":129,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":28,"character":15},"end":{"line":28,"character":15}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00810623168945ms
Sending response {"id": 129, "jsonrpc": "2.0", "result": [{"title": "Add to interface file", "command": "reason-language-server.add_to_interface_inner", "arguments": ["file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "let fetchManageResult: (\n  string,\n  'b => option(\n    Condorcet.Data.result\n  ) => 'a\n) => unit"]}]}
Read message 
{"jsonrpc":"2.0","id":130,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0171661376953ms
Sending response {"id": 130, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":131,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":28,"character":4},"end":{"line":28,"character":21}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.014066696167ms
Sending response {"id": 131, "jsonrpc": "2.0", "result": [{"title": "Add to interface file", "command": "reason-language-server.add_to_interface_inner", "arguments": ["file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "let fetchManageResult: (\n  string,\n  'b => option(\n    Condorcet.Data.result\n  ) => 'a\n) => unit"]}]}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":132,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":28,"character":4},"end":{"line":28,"character":21}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0119209289551ms
Sending response {"id": 132, "jsonrpc": "2.0", "result": [{"title": "Add to interface file", "command": "reason-language-server.add_to_interface_inner", "arguments": ["file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "let fetchManageResult: (\n  string,\n  'b => option(\n    Condorcet.Data.result\n  ) => 'a\n) => unit"]}]}
Read message 
{"jsonrpc":"2.0","id":133,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.03981590271ms
Sending response {"id": 133, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":48},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":48}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/10] [34mBuilding[39m [2msrc/Api.reast[22m
[2/10] [34mBuilding[39m [2msrc/Api.d[22m
[3/10] [34mBuilding[39m [2msrc/Api-Condorcet.cmj[22m
[4/10] [34mBuilding[39m [2msrc/ManagePollPage-Condorcet.cmj[22m
[5/10] [34mBuilding[39m [2msrc/PollResultsPage-Condorcet.cmj[22m
[6/10] [34mBuilding[39m [2msrc/TakePoll-Condorcet.cmj[22m
[7/10] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
[8/10] [34mBuilding[39m [2msrc/TakePollPage-Condorcet.cmj[22m
[9/10] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
[10/10] [34mBuilding[39m [2msrc/index-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":134,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":5,"character":16}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0200271606445ms
[ref] Got a loc for pos
Sending response {"id": 134, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 5, "character": 8}, "end": {"line": 5, "character": 19}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":135,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":5,"character":8},"end":{"line":5,"character":19}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0240802764893ms
Sending response {"id": 135, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":2},"contentChanges":[{"text":"[@react.component]\nlet make = (~id) => {\n  let (result, setResult) = React.useState(() => None);\n\n  React.useEffect0(() => {\n    Api.fetchManageResult(id, setResult);\n    None;\n  });\n\n  switch (result) {\n  | None => <p> {React.string(\"None\")} </p>\n  | Some(result) => <ManagePoll result />\n  };\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":136,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0300407409668ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
Sending response {"id": 136, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":137,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":5,"character":25},"end":{"line":5,"character":25}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0109672546387ms
Sending response {"id": 137, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":138,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0560283660889ms
Sending response {"id": 138, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":139,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":4,"character":18}}}
[server] Got a method textDocument/hover
[server] processing took 0.0271797180176ms
[ref] Getting global React
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src/React.cmt, /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/React.re)
FINDING /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src/React.cmt src /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/React.re
[ref] Getting for 1148 in useEffect0
[ref] Trying for declared Value 1148 in file file:///Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/src/React.re
[ref] Yes!! got it
Sending response {"id": 139, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 4, "character": 8}, "end": {"line": 4, "character": 18}}, "contents": {"kind": "markdown", "value": "```\nunit => option(unit => unit) => unit\n```\n\n<root>/priv/assets/node_modules/reason-react/src/React.re"}}}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":139}}
Read message 
{"jsonrpc":"2.0","id":140,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0290870666504ms
Sending response {"id": 140, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":2},"contentChanges":[{"text":"[@react.component]\nlet make = (~id) => {\n  let (result, setResult) = React.useState(() => None);\n\n  React.useEffect0(() => {\n    Api.fetchManageResult(id, setResult);\n    None;\n  });\n\n  switch (result) {\n  | None => <p> {React.string(\"None\")} </p>\n  | Some(result) => <ManagePoll result />\n  };\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":2}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/5] [34mBuilding[39m [2msrc/ManagePollPage.reast[22m
[2/5] [34mBuilding[39m [2msrc/ManagePollPage.d[22m
[3/5] [34mBuilding[39m [2msrc/ManagePollPage-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":141,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0181198120117ms
Sending response {"id": 141, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":2},"contentChanges":[{"text":"[@react.component]\nlet make = (~id) => {\n  let (result, setResult) = React.useState(() => None);\n\n  React.useEffect0(() => {\n    Api.fetchManageResult(id, setResult);\n    None;\n  });\n\n  switch (result) {\n  | None => <p> {React.string(\"None\")} </p>\n  | Some(result) => <ManagePoll result />\n  };\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":2}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/5] [34mBuilding[39m [2msrc/ManagePollPage.reast[22m
[2/5] [34mBuilding[39m [2msrc/ManagePollPage.d[22m
[3/5] [34mBuilding[39m [2msrc/ManagePollPage-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":142,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":2,"character":38}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0119209289551ms
[ref] Got a loc for pos
Sending response {"id": 142, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 2, "character": 34}, "end": {"line": 2, "character": 42}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":143,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":2,"character":34},"end":{"line":2,"character":42}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0419616699219ms
Sending response {"id": 143, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":144,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":1,"character":19}}}
[server] Got a method textDocument/hover
[server] processing took 0.0400543212891ms
Sending response {"id": 144, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":145,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":1,"character":15}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0150203704834ms
[ref] Got a loc for pos
Sending response {"id": 145, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 1, "character": 10}, "end": {"line": 1, "character": 15}}, "kind": 2}, {"range": {"start": {"line": 0, "character": -1}, "end": {"line": 0, "character": -1}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":146,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":1,"character":13},"end":{"line":1,"character":15}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0190734863281ms
Sending response {"id": 146, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":147,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":2,"character":17}}}
[server] Got a method textDocument/hover
[server] processing took 0.0219345092773ms
[ref] Trying for declared Value 1113 in file file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
Sending response {"id": 147, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 2, "character": 15}, "end": {"line": 2, "character": 24}}, "contents": {"kind": "markdown", "value": "```\noption(Condorcet.Data.result) => option(\n  Condorcet.Data.result\n) => unit\n```\n\n<root>/priv/assets/src/ManagePollPage.re"}}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":3},"contentChanges":[{"text":"[@react.component]\nlet make = (~m) => {\n  let (result, setResult) = React.useState(() => None);\n\n  React.useEffect0(() => {\n    Api.fetchManageResult(id, setResult);\n    None;\n  });\n\n  switch (result) {\n  | None => <p> {React.string(\"None\")} </p>\n  | Some(result) => <ManagePoll result />\n  };\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":148,"method":"textDocument/completion","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":1,"character":14},"context":{"triggerKind":1}}}
[server] Got a method textDocument/completion
[server] processing took 0.0138282775879ms
don't yet support completion for argument labels, but I hope to soon!
Sending response {"id": 148, "jsonrpc": "2.0", "result": []}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.cmt
Size 7006
type error here File "", line 6, characters 26-28:
Error: Unbound value id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re", "diagnostics": [{"range": {"start": {"line": 5, "character": 26}, "end": {"line": 5, "character": 28}}, "message": "Error: Unbound value id", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":7},"contentChanges":[{"text":"[@react.component]\nlet make = (~manag) => {\n  let (result, setResult) = React.useState(() => None);\n\n  React.useEffect0(() => {\n    Api.fetchManageResult(id, setResult);\n    None;\n  });\n\n  switch (result) {\n  | None => <p> {React.string(\"None\")} </p>\n  | Some(result) => <ManagePoll result />\n  };\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":149,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0219345092773ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.cmt
Size 7018
Sending response {"id": 149, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":150,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0100135803223ms
Sending response {"id": 150, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":12},"contentChanges":[{"text":"[@react.component]\nlet make = (~id) => {\n  let (result, setResult) = React.useState(() => None);\n\n  React.useEffect0(() => {\n    Api.fetchManageResult(id, setResult);\n    None;\n  });\n\n  switch (result) {\n  | None => <p> {React.string(\"None\")} </p>\n  | Some(result) => <ManagePoll result />\n  };\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":151,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0159740447998ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
Sending response {"id": 151, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":152,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":1,"character":13},"end":{"line":1,"character":15}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00691413879395ms
Sending response {"id": 152, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":153,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0109672546387ms
Sending response {"id": 153, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":154,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.00882148742676ms
Sending response {"id": 154, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":12},"contentChanges":[{"text":"[@react.component]\nlet make = (~id) => {\n  let (result, setResult) = React.useState(() => None);\n\n  React.useEffect0(() => {\n    Api.fetchManageResult(id, setResult);\n    None;\n  });\n\n  switch (result) {\n  | None => <p> {React.string(\"None\")} </p>\n  | Some(result) => <ManagePoll result />\n  };\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":12}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/5] [34mBuilding[39m [2msrc/ManagePollPage.reast[22m
[2/5] [34mBuilding[39m [2msrc/ManagePollPage.d[22m
[3/5] [34mBuilding[39m [2msrc/ManagePollPage-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":155,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":1,"character":13},"end":{"line":1,"character":15}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0228881835938ms
Sending response {"id": 155, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":13},"contentChanges":[{"text":"[@react.component]\nlet make = (~m) => {\n  let (result, setResult) = React.useState(() => None);\n\n  React.useEffect0(() => {\n    Api.fetchManageResult(id, setResult);\n    None;\n  });\n\n  switch (result) {\n  | None => <p> {React.string(\"None\")} </p>\n  | Some(result) => <ManagePoll result />\n  };\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":156,"method":"textDocument/completion","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":1,"character":14},"context":{"triggerKind":1}}}
[server] Got a method textDocument/completion
[server] processing took 0.0200271606445ms
don't yet support completion for argument labels, but I hope to soon!
Sending response {"id": 156, "jsonrpc": "2.0", "result": []}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.cmt
Size 7006
type error here File "", line 6, characters 26-28:
Error: Unbound value id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re", "diagnostics": [{"range": {"start": {"line": 5, "character": 26}, "end": {"line": 5, "character": 28}}, "message": "Error: Unbound value id", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":18},"contentChanges":[{"text":"[@react.component]\nlet make = (~manage) => {\n  let (result, setResult) = React.useState(() => None);\n\n  React.useEffect0(() => {\n    Api.fetchManageResult(id, setResult);\n    None;\n  });\n\n  switch (result) {\n  | None => <p> {React.string(\"None\")} </p>\n  | Some(result) => <ManagePoll result />\n  };\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":157,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0169277191162ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.cmt
Size 7020
Sending response {"id": 157, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":158,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":1,"character":19},"end":{"line":1,"character":19}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00786781311035ms
Sending response {"id": 158, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
type error here File "", line 6, characters 26-28:
Error: Unbound value id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re", "diagnostics": [{"range": {"start": {"line": 5, "character": 26}, "end": {"line": 5, "character": 28}}, "message": "Error: Unbound value id", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","id":159,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0159740447998ms
Sending response {"id": 159, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":158}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":22},"contentChanges":[{"text":"[@react.component]\nlet make = (~managePoll) => {\n  let (result, setResult) = React.useState(() => None);\n\n  React.useEffect0(() => {\n    Api.fetchManageResult(id, setResult);\n    None;\n  });\n\n  switch (result) {\n  | None => <p> {React.string(\"None\")} </p>\n  | Some(result) => <ManagePoll result />\n  };\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":160,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0181198120117ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.cmt
Size 7030
Sending response {"id": 160, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":161,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":1,"character":23},"end":{"line":1,"character":23}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00882148742676ms
Sending response {"id": 161, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
type error here File "", line 6, characters 26-28:
Error: Unbound value id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re", "diagnostics": [{"range": {"start": {"line": 5, "character": 26}, "end": {"line": 5, "character": 28}}, "message": "Error: Unbound value id", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","id":162,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0150203704834ms
Sending response {"id": 162, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":26},"contentChanges":[{"text":"[@react.component]\nlet make = (~manage) => {\n  let (result, setResult) = React.useState(() => None);\n\n  React.useEffect0(() => {\n    Api.fetchManageResult(id, setResult);\n    None;\n  });\n\n  switch (result) {\n  | None => <p> {React.string(\"None\")} </p>\n  | Some(result) => <ManagePoll result />\n  };\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":163,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0579357147217ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.cmt
Size 7020
Sending response {"id": 163, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":164,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":1,"character":19},"end":{"line":1,"character":19}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00691413879395ms
Sending response {"id": 164, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":165,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0119209289551ms
Sending response {"id": 165, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":29},"contentChanges":[{"text":"[@react.component]\nlet make = (~manageTok) => {\n  let (result, setResult) = React.useState(() => None);\n\n  React.useEffect0(() => {\n    Api.fetchManageResult(id, setResult);\n    None;\n  });\n\n  switch (result) {\n  | None => <p> {React.string(\"None\")} </p>\n  | Some(result) => <ManagePoll result />\n  };\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":166,"method":"textDocument/completion","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":1,"character":22},"context":{"triggerKind":1}}}
[server] Got a method textDocument/completion
[server] processing took 0.0231266021729ms
don't yet support completion for argument labels, but I hope to soon!
Sending response {"id": 166, "jsonrpc": "2.0", "result": []}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":31},"contentChanges":[{"text":"[@react.component]\nlet make = (~manageToken) => {\n  let (result, setResult) = React.useState(() => None);\n\n  React.useEffect0(() => {\n    Api.fetchManageResult(id, setResult);\n    None;\n  });\n\n  switch (result) {\n  | None => <p> {React.string(\"None\")} </p>\n  | Some(result) => <ManagePoll result />\n  };\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":167,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0169277191162ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.cmt
Size 7034
Sending response {"id": 167, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":168,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":1,"character":24},"end":{"line":1,"character":24}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0100135803223ms
Sending response {"id": 168, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":169,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0209808349609ms
Sending response {"id": 169, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":170,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":1,"character":13},"end":{"line":1,"character":24}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0119209289551ms
Sending response {"id": 170, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
type error here File "", line 6, characters 26-28:
Error: Unbound value id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re", "diagnostics": [{"range": {"start": {"line": 5, "character": 26}, "end": {"line": 5, "character": 28}}, "message": "Error: Unbound value id", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","id":171,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":1,"character":13},"end":{"line":1,"character":24}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0171661376953ms
Sending response {"id": 171, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":172,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":5,"character":23}}}
[server] Got a method textDocument/hover
[server] processing took 0.0169277191162ms
[ref] Getting global Condorcet
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/src/Api-Condorcet.cmt, /Users/mike/Code/condorcet/priv/assets/src/Api.re)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/src/Api-Condorcet.cmt src /Users/mike/Code/condorcet/priv/assets/src/Api.re
[ref] Getting for 1186 in fetchManageResult
[ref] Trying for declared Value 1186 in file file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
[ref] Yes!! got it
Sending response {"id": 172, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 5, "character": 8}, "end": {"line": 5, "character": 25}}, "contents": {"kind": "markdown", "value": "```\n(\n  string,\n  'b => option(\n    Condorcet.Data.result\n  ) => 'a\n) => unit\n```\n\n<root>/priv/assets/src/Api.re"}}}
Read message 
{"jsonrpc":"2.0","id":173,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":5,"character":27}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0209808349609ms
Sending response {"id": 173, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":32},"contentChanges":[{"text":"[@react.component]\nlet make = (~manageToken) => {\n  let (result, setResult) = React.useState(() => None);\n\n  React.useEffect0(() => {\n    Api.fetchManageResult(manageToken, setResult);\n    None;\n  });\n\n  switch (result) {\n  | None => <p> {React.string(\"None\")} </p>\n  | Some(result) => <ManagePoll result />\n  };\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":174,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0178813934326ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
Sending response {"id": 174, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":175,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":5,"character":37},"end":{"line":5,"character":37}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00786781311035ms
Sending response {"id": 175, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":176,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0128746032715ms
Sending response {"id": 176, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":177,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0109672546387ms
Sending response {"id": 177, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":32},"contentChanges":[{"text":"[@react.component]\nlet make = (~manageToken) => {\n  let (result, setResult) = React.useState(() => None);\n\n  React.useEffect0(() => {\n    Api.fetchManageResult(manageToken, setResult);\n    None;\n  });\n\n  switch (result) {\n  | None => <p> {React.string(\"None\")} </p>\n  | Some(result) => <ManagePoll result />\n  };\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":32}}}
Read message 
{"jsonrpc":"2.0","id":178,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0209808349609ms
Sending response {"id": 178, "jsonrpc": "2.0", "result": null}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/5] [34mBuilding[39m [2msrc/ManagePollPage.reast[22m
[2/5] [34mBuilding[39m [2msrc/ManagePollPage.d[22m
[3/5] [34mBuilding[39m [2msrc/ManagePollPage-Condorcet.cmj[22m
[4/5] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
FAILED: src/App-Condorcet.cmj src/App-Condorcet.cmi /Users/mike/Code/condorcet/priv/assets/src/App.bs.js 
/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -nostdlib -bs-package-name condorcet -bs-ns Condorcet  -bs-package-output commonjs:src -color always -bs-suffix -I . -I src -I /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml -w -30-40+6+7+27+32..39+44+45+101 -warn-error +101  -o src/App-Condorcet.cmj src/App.reast

  We've found a bug for you!
  /Users/mike/Code/condorcet/priv/assets/src/App.re 9:53-58
  
   7 ┆ | [] => <Home />
   8 ┆ | ["new"] => <NewPoll />
   9 ┆ | ["manage-poll", pollId] => <ManagePollPage id=pollId />
  10 ┆ | ["take-poll", pollId] => <TakePollPage id=pollId />
  11 ┆ | ["results", pollId] => <PollResultsPage id=pollId />
  
  The function applied to this argument has type
    (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
  
FAILED: subcommand failed.
>>> stderr

Affected files: file:///Users/mike/Code/condorcet/priv/assets/src/App.re
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11105
type error here File "", line 9, characters 52-58:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 52}, "end": {"line": 8, "character": 58}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~id", "severity": 1}]}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":32},"contentChanges":[{"text":"[@react.component]\nlet make = (~manageToken) => {\n  let (result, setResult) = React.useState(() => None);\n\n  React.useEffect0(() => {\n    Api.fetchManageResult(manageToken, setResult);\n    None;\n  });\n\n  switch (result) {\n  | None => <p> {React.string(\"None\")} </p>\n  | Some(result) => <ManagePoll result />\n  };\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":32}}}
Read message 
{"jsonrpc":"2.0","id":179,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":5,"character":37},"end":{"line":5,"character":37}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0150203704834ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
Sending response {"id": 179, "jsonrpc": "2.0", "result": null}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/2] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
FAILED: src/App-Condorcet.cmj src/App-Condorcet.cmi /Users/mike/Code/condorcet/priv/assets/src/App.bs.js 
/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -nostdlib -bs-package-name condorcet -bs-ns Condorcet  -bs-package-output commonjs:src -color always -bs-suffix -I . -I src -I /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml -w -30-40+6+7+27+32..39+44+45+101 -warn-error +101  -o src/App-Condorcet.cmj src/App.reast

  We've found a bug for you!
  /Users/mike/Code/condorcet/priv/assets/src/App.re 9:53-58
  
   7 ┆ | [] => <Home />
   8 ┆ | ["new"] => <NewPoll />
   9 ┆ | ["manage-poll", pollId] => <ManagePollPage id=pollId />
  10 ┆ | ["take-poll", pollId] => <TakePollPage id=pollId />
  11 ┆ | ["results", pollId] => <PollResultsPage id=pollId />
  
  The function applied to this argument has type
    (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
  
FAILED: subcommand failed.
>>> stderr

Affected files: file:///Users/mike/Code/condorcet/priv/assets/src/App.re
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11105
type error here File "", line 9, characters 52-58:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 52}, "end": {"line": 8, "character": 58}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~id", "severity": 1}]}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":180,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":6,"character":9},"end":{"line":6,"character":9}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00786781311035ms
Sending response {"id": 180, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":181,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":5,"character":19}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0109672546387ms
[ref] Got a loc for pos
Sending response {"id": 181, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 5, "character": 8}, "end": {"line": 5, "character": 25}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":182,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":5,"character":8},"end":{"line":5,"character":25}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0178813934326ms
Sending response {"id": 182, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":183,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":28,"character":29}}}
[server] Got a method textDocument/hover
[server] processing took 0.0131130218506ms
[ref] Trying for declared Value 1188 in file file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 183, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 28, "character": 29}, "end": {"line": 28, "character": 31}}, "contents": {"kind": "markdown", "value": "```\n'b => option(\n  Condorcet.Data.result\n) => 'a\n```\n\n<root>/priv/assets/src/Api.re"}}}
Read message 
{"jsonrpc":"2.0","id":184,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":28,"character":27}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0109672546387ms
[ref] Got a loc for pos
Sending response {"id": 184, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 34, "character": 57}, "end": {"line": 34, "character": 59}}, "kind": 2}, {"range": {"start": {"line": 28, "character": 25}, "end": {"line": 28, "character": 27}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":49},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":185,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0340938568115ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.cmt
Size 16809
Sending response {"id": 185, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":186,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":28,"character":36},"end":{"line":28,"character":36}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0119209289551ms
Sending response {"id": 186, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":187,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0271797180176ms
Sending response {"id": 187, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":188,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0190734863281ms
Sending response {"id": 188, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":49},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":49}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/10] [34mBuilding[39m [2msrc/Api.reast[22m
[2/10] [34mBuilding[39m [2msrc/Api.d[22m
[3/10] [34mBuilding[39m [2msrc/Api-Condorcet.cmj[22m
FAILED: src/Api-Condorcet.cmj src/Api-Condorcet.cmi /Users/mike/Code/condorcet/priv/assets/src/Api.bs.js 
/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -nostdlib -bs-package-name condorcet -bs-ns Condorcet  -bs-package-output commonjs:src -color always -bs-suffix -I . -I src -I /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml -w -30-40+6+7+27+32..39+44+45+101 -warn-error +101  -o src/Api-Condorcet.cmj src/Api.reast

  We've found a bug for you!
  /Users/mike/Code/condorcet/priv/assets/src/Api.re 35:58-59
  
  33 ┆ 
  34 ┆ Js.Promise.(
  35 ┆   Fetch.fetch("http://localhost:4000/api/v1/polls/" ++ id ++ "/results
       ")
  36 ┆   |> then_(Fetch.Response.json)
  37 ┆   |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)
  
  The value id can't be found
  
FAILED: subcommand failed.
>>> stderr

Affected files: file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11105
type error here File "", line 9, characters 52-58:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 52}, "end": {"line": 8, "character": 58}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~id", "severity": 1}]}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.cmt
Size 16809
type error here File "", line 35, characters 57-59:
Error: Unbound value id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": [{"range": {"start": {"line": 34, "character": 57}, "end": {"line": 34, "character": 59}}, "message": "Error: Unbound value id", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","id":189,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":34,"character":47}}}
[server] Got a method textDocument/hover
[server] processing took 0.00786781311035ms
Sending response {"id": 189, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 34, "character": 16}, "end": {"line": 34, "character": 53}}, "contents": {"kind": "markdown", "value": "string"}}}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":189}}
Read message 
{"jsonrpc":"2.0","id":190,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":34,"character":57}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0240802764893ms
Sending response {"id": 190, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":191,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":34,"character":57},"end":{"line":34,"character":59}},"context":{"diagnostics":[{"range":{"start":{"line":34,"character":57},"end":{"line":34,"character":59}},"message":"Error: Unbound value id","severity":1}]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0169277191162ms
Sending response {"id": 191, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":50},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":192,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0109672546387ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 192, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":193,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":34,"character":68},"end":{"line":34,"character":68}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00691413879395ms
Sending response {"id": 193, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":194,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00882148742676ms
Sending response {"id": 194, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 87, "character": 2}, "end": {"line": 87, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 43, "character": 2}, "end": {"line": 43, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":195,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.00905990600586ms
Sending response {"id": 195, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 101, "character": 0}}, "newText": "[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/results\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":51},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/results\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":51}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/10] [34mBuilding[39m [2msrc/Api.reast[22m
[2/10] [34mBuilding[39m [2msrc/Api.d[22m
[3/10] [34mBuilding[39m [2msrc/Api-Condorcet.cmj[22m
[4/10] [34mBuilding[39m [2msrc/ManagePollPage-Condorcet.cmj[22m
[5/10] [34mBuilding[39m [2msrc/PollResultsPage-Condorcet.cmj[22m
[6/10] [34mBuilding[39m [2msrc/TakePoll-Condorcet.cmj[22m
[7/10] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
[8/10] [34mBuilding[39m [2msrc/TakePollPage-Condorcet.cmj[22m
[9/10] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
FAILED: src/App-Condorcet.cmj src/App-Condorcet.cmi /Users/mike/Code/condorcet/priv/assets/src/App.bs.js 
/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -nostdlib -bs-package-name condorcet -bs-ns Condorcet  -bs-package-output commonjs:src -color always -bs-suffix -I . -I src -I /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml -w -30-40+6+7+27+32..39+44+45+101 -warn-error +101  -o src/App-Condorcet.cmj src/App.reast

  We've found a bug for you!
  /Users/mike/Code/condorcet/priv/assets/src/App.re 9:53-58
  
   7 ┆ | [] => <Home />
   8 ┆ | ["new"] => <NewPoll />
   9 ┆ | ["manage-poll", pollId] => <ManagePollPage id=pollId />
  10 ┆ | ["take-poll", pollId] => <TakePollPage id=pollId />
  11 ┆ | ["results", pollId] => <PollResultsPage id=pollId />
  
  The function applied to this argument has type
    (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
  
FAILED: subcommand failed.
>>> stderr

Affected files: file:///Users/mike/Code/condorcet/priv/assets/src/App.re
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11105
type error here File "", line 9, characters 52-58:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 52}, "end": {"line": 8, "character": 58}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~id", "severity": 1}]}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":196,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00810623168945ms
Sending response {"id": 196, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":197,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":35,"character":58},"end":{"line":35,"character":58}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0128746032715ms
Sending response {"id": 197, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":198,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0109672546387ms
Sending response {"id": 198, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":199,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0100135803223ms
Sending response {"id": 199, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":51},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/results\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":51}}}
Read message 
{"jsonrpc":"2.0","id":200,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":35,"character":58},"end":{"line":35,"character":58}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0109672546387ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 200, "jsonrpc": "2.0", "result": null}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/10] [34mBuilding[39m [2msrc/Api.reast[22m
[2/10] [34mBuilding[39m [2msrc/Api.d[22m
[3/10] [34mBuilding[39m [2msrc/Api-Condorcet.cmj[22m
[4/5] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
FAILED: src/App-Condorcet.cmj src/App-Condorcet.cmi /Users/mike/Code/condorcet/priv/assets/src/App.bs.js 
/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -nostdlib -bs-package-name condorcet -bs-ns Condorcet  -bs-package-output commonjs:src -color always -bs-suffix -I . -I src -I /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml -w -30-40+6+7+27+32..39+44+45+101 -warn-error +101  -o src/App-Condorcet.cmj src/App.reast

  We've found a bug for you!
  /Users/mike/Code/condorcet/priv/assets/src/App.re 9:53-58
  
   7 ┆ | [] => <Home />
   8 ┆ | ["new"] => <NewPoll />
   9 ┆ | ["manage-poll", pollId] => <ManagePollPage id=pollId />
  10 ┆ | ["take-poll", pollId] => <TakePollPage id=pollId />
  11 ┆ | ["results", pollId] => <PollResultsPage id=pollId />
  
  The function applied to this argument has type
    (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
  
FAILED: subcommand failed.
>>> stderr

Affected files: file:///Users/mike/Code/condorcet/priv/assets/src/App.re
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11105
type error here File "", line 9, characters 52-58:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 52}, "end": {"line": 8, "character": 58}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~id", "severity": 1}]}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":201,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":35,"character":68}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0269412994385ms
[ref] Got a loc for pos
Sending response {"id": 201, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":202,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":35,"character":64},"end":{"line":35,"character":71}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0259876251221ms
Sending response {"id": 202, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":52},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/n\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":203,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0178813934326ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 203, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":204,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":35,"character":65},"end":{"line":35,"character":65}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00786781311035ms
Sending response {"id": 204, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":205,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.251054763794ms
Sending response {"id": 205, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":53},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":57},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/mana\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":206,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0219345092773ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 206, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":207,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":35,"character":68},"end":{"line":35,"character":68}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00786781311035ms
Sending response {"id": 207, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":208,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0250339508057ms
Sending response {"id": 208, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":58},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/manag\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":59},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/manage\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":209,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0138282775879ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 209, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":210,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":35,"character":70},"end":{"line":35,"character":70}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00786781311035ms
Sending response {"id": 210, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":211,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.014066696167ms
Sending response {"id": 211, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":212,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0209808349609ms
Sending response {"id": 212, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":59},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/manage\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":59}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/10] [34mBuilding[39m [2msrc/Api.reast[22m
[2/10] [34mBuilding[39m [2msrc/Api.d[22m
[3/10] [34mBuilding[39m [2msrc/Api-Condorcet.cmj[22m
[4/10] [34mBuilding[39m [2msrc/ManagePollPage-Condorcet.cmj[22m
[5/10] [34mBuilding[39m [2msrc/PollResultsPage-Condorcet.cmj[22m
[6/10] [34mBuilding[39m [2msrc/TakePoll-Condorcet.cmj[22m
[7/10] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
[8/10] [34mBuilding[39m [2msrc/TakePollPage-Condorcet.cmj[22m
[9/10] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
FAILED: src/App-Condorcet.cmj src/App-Condorcet.cmi /Users/mike/Code/condorcet/priv/assets/src/App.bs.js 
/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -nostdlib -bs-package-name condorcet -bs-ns Condorcet  -bs-package-output commonjs:src -color always -bs-suffix -I . -I src -I /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml -w -30-40+6+7+27+32..39+44+45+101 -warn-error +101  -o src/App-Condorcet.cmj src/App.reast

  We've found a bug for you!
  /Users/mike/Code/condorcet/priv/assets/src/App.re 9:53-58
  
   7 ┆ | [] => <Home />
   8 ┆ | ["new"] => <NewPoll />
   9 ┆ | ["manage-poll", pollId] => <ManagePollPage id=pollId />
  10 ┆ | ["take-poll", pollId] => <TakePollPage id=pollId />
  11 ┆ | ["results", pollId] => <PollResultsPage id=pollId />
  
  The function applied to this argument has type
    (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
  
FAILED: subcommand failed.
>>> stderr

Affected files: file:///Users/mike/Code/condorcet/priv/assets/src/App.re
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11105
type error here File "", line 9, characters 52-58:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 52}, "end": {"line": 8, "character": 58}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~id", "severity": 1}]}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":213,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.00810623168945ms
Sending response {"id": 213, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":59},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/manage\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":59}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/10] [34mBuilding[39m [2msrc/Api.reast[22m
[2/10] [34mBuilding[39m [2msrc/Api.d[22m
[3/10] [34mBuilding[39m [2msrc/Api-Condorcet.cmj[22m
[4/5] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
FAILED: src/App-Condorcet.cmj src/App-Condorcet.cmi /Users/mike/Code/condorcet/priv/assets/src/App.bs.js 
/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -nostdlib -bs-package-name condorcet -bs-ns Condorcet  -bs-package-output commonjs:src -color always -bs-suffix -I . -I src -I /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml -w -30-40+6+7+27+32..39+44+45+101 -warn-error +101  -o src/App-Condorcet.cmj src/App.reast

  We've found a bug for you!
  /Users/mike/Code/condorcet/priv/assets/src/App.re 9:53-58
  
   7 ┆ | [] => <Home />
   8 ┆ | ["new"] => <NewPoll />
   9 ┆ | ["manage-poll", pollId] => <ManagePollPage id=pollId />
  10 ┆ | ["take-poll", pollId] => <TakePollPage id=pollId />
  11 ┆ | ["results", pollId] => <PollResultsPage id=pollId />
  
  The function applied to this argument has type
    (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
  
FAILED: subcommand failed.
>>> stderr

Affected files: file:///Users/mike/Code/condorcet/priv/assets/src/App.re
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11105
type error here File "", line 9, characters 52-58:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 52}, "end": {"line": 8, "character": 58}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~id", "severity": 1}]}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":214,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":35,"character":64},"end":{"line":35,"character":70}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0340938568115ms
Sending response {"id": 214, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":215,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0138282775879ms
Sending response {"id": 215, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":59},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/manage\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":59}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/10] [34mBuilding[39m [2msrc/Api.reast[22m
[2/10] [34mBuilding[39m [2msrc/Api.d[22m
[3/10] [34mBuilding[39m [2msrc/Api-Condorcet.cmj[22m
[4/5] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
FAILED: src/App-Condorcet.cmj src/App-Condorcet.cmi /Users/mike/Code/condorcet/priv/assets/src/App.bs.js 
/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -nostdlib -bs-package-name condorcet -bs-ns Condorcet  -bs-package-output commonjs:src -color always -bs-suffix -I . -I src -I /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml -w -30-40+6+7+27+32..39+44+45+101 -warn-error +101  -o src/App-Condorcet.cmj src/App.reast

  We've found a bug for you!
  /Users/mike/Code/condorcet/priv/assets/src/App.re 9:53-58
  
   7 ┆ | [] => <Home />
   8 ┆ | ["new"] => <NewPoll />
   9 ┆ | ["manage-poll", pollId] => <ManagePollPage id=pollId />
  10 ┆ | ["take-poll", pollId] => <TakePollPage id=pollId />
  11 ┆ | ["results", pollId] => <PollResultsPage id=pollId />
  
  The function applied to this argument has type
    (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
  
FAILED: subcommand failed.
>>> stderr

Affected files: file:///Users/mike/Code/condorcet/priv/assets/src/App.re
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11105
type error here File "", line 9, characters 52-58:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 52}, "end": {"line": 8, "character": 58}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~id", "severity": 1}]}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":216,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.00905990600586ms
Sending response {"id": 216, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":59},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/manage\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":59}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/10] [34mBuilding[39m [2msrc/Api.reast[22m
[2/10] [34mBuilding[39m [2msrc/Api.d[22m
[3/10] [34mBuilding[39m [2msrc/Api-Condorcet.cmj[22m
[4/5] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
FAILED: src/App-Condorcet.cmj src/App-Condorcet.cmi /Users/mike/Code/condorcet/priv/assets/src/App.bs.js 
/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -nostdlib -bs-package-name condorcet -bs-ns Condorcet  -bs-package-output commonjs:src -color always -bs-suffix -I . -I src -I /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml -w -30-40+6+7+27+32..39+44+45+101 -warn-error +101  -o src/App-Condorcet.cmj src/App.reast

  We've found a bug for you!
  /Users/mike/Code/condorcet/priv/assets/src/App.re 9:53-58
  
   7 ┆ | [] => <Home />
   8 ┆ | ["new"] => <NewPoll />
   9 ┆ | ["manage-poll", pollId] => <ManagePollPage id=pollId />
  10 ┆ | ["take-poll", pollId] => <TakePollPage id=pollId />
  11 ┆ | ["results", pollId] => <PollResultsPage id=pollId />
  
  The function applied to this argument has type
    (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
  
FAILED: subcommand failed.
>>> stderr

Affected files: file:///Users/mike/Code/condorcet/priv/assets/src/App.re
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11105
type error here File "", line 9, characters 52-58:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 52}, "end": {"line": 8, "character": 58}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~id", "severity": 1}]}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":217,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":37,"character":27}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0131130218506ms
[ref] Got a loc for pos
Sending response {"id": 217, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 99, "character": 19}, "end": {"line": 99, "character": 27}}, "kind": 2}, {"range": {"start": {"line": 56, "character": 19}, "end": {"line": 56, "character": 27}}, "kind": 2}, {"range": {"start": {"line": 37, "character": 19}, "end": {"line": 37, "character": 27}}, "kind": 2}, {"range": {"start": {"line": 22, "character": 19}, "end": {"line": 22, "character": 27}}, "kind": 2}, {"range": {"start": {"line": 9, "character": 19}, "end": {"line": 9, "character": 27}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":218,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":37,"character":19},"end":{"line":37,"character":27}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0379085540771ms
Sending response {"id": 218, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":219,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":38,"character":36}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0169277191162ms
[ref] Got a loc for pos
Sending response {"id": 219, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 58, "character": 22}, "end": {"line": 58, "character": 28}}, "kind": 2}, {"range": {"start": {"line": 38, "character": 34}, "end": {"line": 38, "character": 40}}, "kind": 2}, {"range": {"start": {"line": 23, "character": 34}, "end": {"line": 23, "character": 40}}, "kind": 2}, {"range": {"start": {"line": 10, "character": 34}, "end": {"line": 10, "character": 40}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":220,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":38,"character":34},"end":{"line":38,"character":40}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0228881835938ms
Sending response {"id": 220, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":221,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":38,"character":42}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0150203704834ms
[ref] Got a loc for pos
Sending response {"id": 221, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 38, "character": 41}, "end": {"line": 38, "character": 48}}, "kind": 2}, {"range": {"start": {"line": 23, "character": 41}, "end": {"line": 23, "character": 48}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":222,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":38,"character":41},"end":{"line":38,"character":48}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0231266021729ms
Sending response {"id": 222, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":223,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":39,"character":13}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0178813934326ms
[ref] Got a loc for pos
Sending response {"id": 223, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 39, "character": 7}, "end": {"line": 39, "character": 13}}, "kind": 2}, {"range": {"start": {"line": 24, "character": 7}, "end": {"line": 24, "character": 13}}, "kind": 2}, {"range": {"start": {"line": 11, "character": 7}, "end": {"line": 11, "character": 13}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":224,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":39,"character":7},"end":{"line":39,"character":13}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0240802764893ms
Sending response {"id": 224, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":225,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":31,"character":4},"end":{"line":31,"character":4}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0290870666504ms
Sending response {"id": 225, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":226,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":30,"character":26},"end":{"line":30,"character":26}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0128746032715ms
Sending response {"id": 226, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":227,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0209808349609ms
Sending response {"id": 227, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":59},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/manage\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":59}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/10] [34mBuilding[39m [2msrc/Api.reast[22m
[2/10] [34mBuilding[39m [2msrc/Api.d[22m
[3/10] [34mBuilding[39m [2msrc/Api-Condorcet.cmj[22m
[4/5] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
FAILED: src/App-Condorcet.cmj src/App-Condorcet.cmi /Users/mike/Code/condorcet/priv/assets/src/App.bs.js 
/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -nostdlib -bs-package-name condorcet -bs-ns Condorcet  -bs-package-output commonjs:src -color always -bs-suffix -I . -I src -I /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml -w -30-40+6+7+27+32..39+44+45+101 -warn-error +101  -o src/App-Condorcet.cmj src/App.reast

  We've found a bug for you!
  /Users/mike/Code/condorcet/priv/assets/src/App.re 9:53-58
  
   7 ┆ | [] => <Home />
   8 ┆ | ["new"] => <NewPoll />
   9 ┆ | ["manage-poll", pollId] => <ManagePollPage id=pollId />
  10 ┆ | ["take-poll", pollId] => <TakePollPage id=pollId />
  11 ┆ | ["results", pollId] => <PollResultsPage id=pollId />
  
  The function applied to this argument has type
    (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
  
FAILED: subcommand failed.
>>> stderr

Affected files: file:///Users/mike/Code/condorcet/priv/assets/src/App.re
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11105
type error here File "", line 9, characters 52-58:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 52}, "end": {"line": 8, "character": 58}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~id", "severity": 1}]}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":228,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":28,"character":14}}}
[server] Got a method textDocument/hover
[server] processing took 0.0121593475342ms
[ref] Trying for declared Value 1186 in file file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 228, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 28, "character": 4}, "end": {"line": 28, "character": 21}}, "contents": {"kind": "markdown", "value": "```\n(\n  string,\n  'b => option(\n    Condorcet.Data.result\n  ) => 'a\n) => unit\n```\n\n<root>/priv/assets/src/Api.re"}}}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":228}}
Read message 
{"jsonrpc":"2.0","id":229,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0300407409668ms
Sending response {"id": 229, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":230,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":28,"character":12}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.014066696167ms
[ref] Got a loc for pos
Sending response {"id": 230, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 28, "character": 4}, "end": {"line": 28, "character": 21}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":229}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":59},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/manage\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":59}}}
Read message 
{"jsonrpc":"2.0","id":231,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":28,"character":4},"end":{"line":28,"character":21}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0209808349609ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 231, "jsonrpc": "2.0", "result": [{"title": "Add to interface file", "command": "reason-language-server.add_to_interface_inner", "arguments": ["file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "let fetchManageResult: (\n  string,\n  'b => option(\n    Condorcet.Data.result\n  ) => 'a\n) => unit"]}]}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/10] [34mBuilding[39m [2msrc/Api.reast[22m
[2/10] [34mBuilding[39m [2msrc/Api.d[22m
[3/10] [34mBuilding[39m [2msrc/Api-Condorcet.cmj[22m
[4/5] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
FAILED: src/App-Condorcet.cmj src/App-Condorcet.cmi /Users/mike/Code/condorcet/priv/assets/src/App.bs.js 
/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -nostdlib -bs-package-name condorcet -bs-ns Condorcet  -bs-package-output commonjs:src -color always -bs-suffix -I . -I src -I /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml -w -30-40+6+7+27+32..39+44+45+101 -warn-error +101  -o src/App-Condorcet.cmj src/App.reast

  We've found a bug for you!
  /Users/mike/Code/condorcet/priv/assets/src/App.re 9:53-58
  
   7 ┆ | [] => <Home />
   8 ┆ | ["new"] => <NewPoll />
   9 ┆ | ["manage-poll", pollId] => <ManagePollPage id=pollId />
  10 ┆ | ["take-poll", pollId] => <TakePollPage id=pollId />
  11 ┆ | ["results", pollId] => <PollResultsPage id=pollId />
  
  The function applied to this argument has type
    (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
  
FAILED: subcommand failed.
>>> stderr

Affected files: file:///Users/mike/Code/condorcet/priv/assets/src/App.re
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11105
type error here File "", line 9, characters 52-58:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 52}, "end": {"line": 8, "character": 58}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~id", "severity": 1}]}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":232,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":6,"character":9},"end":{"line":6,"character":9}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0238418579102ms
Sending response {"id": 232, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":233,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":11,"character":41},"end":{"line":11,"character":41}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0178813934326ms
Sending response {"id": 233, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":234,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.014066696167ms
Sending response {"id": 234, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":32},"contentChanges":[{"text":"[@react.component]\nlet make = (~manageToken) => {\n  let (result, setResult) = React.useState(() => None);\n\n  React.useEffect0(() => {\n    Api.fetchManageResult(manageToken, setResult);\n    None;\n  });\n\n  switch (result) {\n  | None => <p> {React.string(\"None\")} </p>\n  | Some(result) => <ManagePoll result />\n  };\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re","version":32}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/5] [34mBuilding[39m [2msrc/ManagePollPage.reast[22m
[2/5] [34mBuilding[39m [2msrc/ManagePollPage.d[22m
[3/5] [34mBuilding[39m [2msrc/ManagePollPage-Condorcet.cmj[22m
[4/5] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
FAILED: src/App-Condorcet.cmj src/App-Condorcet.cmi /Users/mike/Code/condorcet/priv/assets/src/App.bs.js 
/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -nostdlib -bs-package-name condorcet -bs-ns Condorcet  -bs-package-output commonjs:src -color always -bs-suffix -I . -I src -I /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml -w -30-40+6+7+27+32..39+44+45+101 -warn-error +101  -o src/App-Condorcet.cmj src/App.reast

  We've found a bug for you!
  /Users/mike/Code/condorcet/priv/assets/src/App.re 9:53-58
  
   7 ┆ | [] => <Home />
   8 ┆ | ["new"] => <NewPoll />
   9 ┆ | ["manage-poll", pollId] => <ManagePollPage id=pollId />
  10 ┆ | ["take-poll", pollId] => <TakePollPage id=pollId />
  11 ┆ | ["results", pollId] => <PollResultsPage id=pollId />
  
  The function applied to this argument has type
    (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
  
FAILED: subcommand failed.
>>> stderr

Affected files: file:///Users/mike/Code/condorcet/priv/assets/src/App.re
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11105
type error here File "", line 9, characters 52-58:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 52}, "end": {"line": 8, "character": 58}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~id", "severity": 1}]}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re","languageId":"reason","version":1,"text":"[@react.component]\nlet make = () => {\n  let url = ReasonReact.Router.useUrl();\n\n  let body =\n    switch (url.path) {\n    | [] => <Home />\n    | [\"new\"] => <NewPoll />\n    | [\"manage-poll\", pollId] => <ManagePollPage id=pollId />\n    | [\"take-poll\", pollId] => <TakePollPage id=pollId />\n    | [\"results\", pollId] => <PollResultsPage id=pollId />\n    | _ => <NotFound />\n    };\n\n  <Layout> body </Layout>;\n};"}}}
Read message 
{"jsonrpc":"2.0","id":235,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":52},"end":{"line":8,"character":58}},"context":{"diagnostics":[{"range":{"start":{"line":8,"character":52},"end":{"line":8,"character":58}},"message":"Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~id","severity":1}]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0109672546387ms
Sending response {"id": 235, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":236,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0100135803223ms
Sending response {"id": 236, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":237,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0131130218506ms
Sending response {"id": 237, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":238,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":52},"end":{"line":8,"character":58}},"context":{"diagnostics":[{"range":{"start":{"line":8,"character":52},"end":{"line":8,"character":58}},"message":"Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~id","severity":1}]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0109672546387ms
Sending response {"id": 238, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":239,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00905990600586ms
Sending response {"id": 239, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
type error here File "", line 9, characters 52-58:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~id
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 52}, "end": {"line": 8, "character": 58}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~id", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","id":240,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"position":{"line":10,"character":42}}}
[server] Got a method textDocument/hover
[server] processing took 0.0121593475342ms
Sending response {"id": 240, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":241,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":52},"end":{"line":8,"character":58}},"context":{"diagnostics":[{"range":{"start":{"line":8,"character":52},"end":{"line":8,"character":58}},"message":"Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~id","severity":1}]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0119209289551ms
Sending response {"id": 241, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":242,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"position":{"line":8,"character":54}}}
[server] Got a method textDocument/hover
[server] processing took 0.0169277191162ms
Sending response {"id": 242, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":243,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"position":{"line":8,"character":58}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0109672546387ms
Sending response {"id": 243, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":244,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":52},"end":{"line":8,"character":58}},"context":{"diagnostics":[{"range":{"start":{"line":8,"character":52},"end":{"line":8,"character":58}},"message":"Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~id","severity":1}]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0240802764893ms
Sending response {"id": 244, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":245,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"position":{"line":8,"character":51}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0300407409668ms
Sending response {"id": 245, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re","version":2},"contentChanges":[{"text":"[@react.component]\nlet make = () => {\n  let url = ReasonReact.Router.useUrl();\n\n  let body =\n    switch (url.path) {\n    | [] => <Home />\n    | [\"new\"] => <NewPoll />\n    | [\"manage-poll\", pollId] => <ManagePollPage fetchManageResult=pollId />\n    | [\"take-poll\", pollId] => <TakePollPage id=pollId />\n    | [\"results\", pollId] => <PollResultsPage id=pollId />\n    | _ => <NotFound />\n    };\n\n  <Layout> body </Layout>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":246,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0119209289551ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11105
Sending response {"id": 246, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":247,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":66},"end":{"line":8,"character":66}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00905990600586ms
Sending response {"id": 247, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":248,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.018835067749ms
Sending response {"id": 248, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":249,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0300407409668ms
Sending response {"id": 249, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re","version":2},"contentChanges":[{"text":"[@react.component]\nlet make = () => {\n  let url = ReasonReact.Router.useUrl();\n\n  let body =\n    switch (url.path) {\n    | [] => <Home />\n    | [\"new\"] => <NewPoll />\n    | [\"manage-poll\", pollId] => <ManagePollPage fetchManageResult=pollId />\n    | [\"take-poll\", pollId] => <TakePollPage id=pollId />\n    | [\"results\", pollId] => <PollResultsPage id=pollId />\n    | _ => <NotFound />\n    };\n\n  <Layout> body </Layout>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re","version":2}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/4] [34mBuilding[39m [2msrc/App.reast[22m
[2/4] [34mBuilding[39m [2msrc/App.d[22m
[3/4] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
FAILED: src/App-Condorcet.cmj src/App-Condorcet.cmi /Users/mike/Code/condorcet/priv/assets/src/App.bs.js 
/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -nostdlib -bs-package-name condorcet -bs-ns Condorcet  -bs-package-output commonjs:src -color always -bs-suffix -I . -I src -I /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml -w -30-40+6+7+27+32..39+44+45+101 -warn-error +101  -o src/App-Condorcet.cmj src/App.reast

  We've found a bug for you!
  /Users/mike/Code/condorcet/priv/assets/src/App.re 9:68-73
  
   7 ┆ | [] => <Home />
   8 ┆ | ["new"] => <NewPoll />
   9 ┆ | ["manage-poll", pollId] => <ManagePollPage fetchManageResult=pollId 
       />
  10 ┆ | ["take-poll", pollId] => <TakePollPage id=pollId />
  11 ┆ | ["results", pollId] => <PollResultsPage id=pollId />
  
  The function applied to this argument has type
    (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~fetchManageResult
  
FAILED: subcommand failed.
>>> stderr

Affected files: file:///Users/mike/Code/condorcet/priv/assets/src/App.re
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11105
type error here File "", line 9, characters 67-73:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~fetchManageResult
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 67}, "end": {"line": 8, "character": 73}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~fetchManageResult", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","id":250,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":49},"end":{"line":8,"character":66}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0178813934326ms
Sending response {"id": 250, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":251,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":73},"end":{"line":8,"character":73}},"context":{"diagnostics":[{"range":{"start":{"line":8,"character":67},"end":{"line":8,"character":73}},"message":"Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~fetchManageResult","severity":1}]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0190734863281ms
Sending response {"id": 251, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":252,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":67},"end":{"line":8,"character":73}},"context":{"diagnostics":[{"range":{"start":{"line":8,"character":67},"end":{"line":8,"character":73}},"message":"Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~fetchManageResult","severity":1}]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0150203704834ms
Sending response {"id": 252, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":253,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"position":{"line":8,"character":22}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0100135803223ms
[ref] Got a loc for pos
Sending response {"id": 253, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 8, "character": 22}, "end": {"line": 8, "character": 28}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":254,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":22},"end":{"line":8,"character":28}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0169277191162ms
Sending response {"id": 254, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re","version":3},"contentChanges":[{"text":"[@react.component]\nlet make = () => {\n  let url = ReasonReact.Router.useUrl();\n\n  let body =\n    switch (url.path) {\n    | [] => <Home />\n    | [\"new\"] => <NewPoll />\n    | [\"manage-poll\", fetchManageResult] => <ManagePollPage fetchManageResult=pollId />\n    | [\"take-poll\", pollId] => <TakePollPage id=pollId />\n    | [\"results\", pollId] => <PollResultsPage id=pollId />\n    | _ => <NotFound />\n    };\n\n  <Layout> body </Layout>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":255,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0128746032715ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11116
Sending response {"id": 255, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":256,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":39},"end":{"line":8,"character":39}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00810623168945ms
Sending response {"id": 256, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
type error here File "", line 9, characters 78-84:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~fetchManageResult
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 78}, "end": {"line": 8, "character": 84}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~fetchManageResult", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","id":257,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0150203704834ms
Sending response {"id": 257, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":258,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":22},"end":{"line":8,"character":39}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0121593475342ms
Sending response {"id": 258, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re","version":4},"contentChanges":[{"text":"[@react.component]\nlet make = () => {\n  let url = ReasonReact.Router.useUrl();\n\n  let body =\n    switch (url.path) {\n    | [] => <Home />\n    | [\"new\"] => <NewPoll />\n    | [\"manage-poll\", m] => <ManagePollPage fetchManageResult=pollId />\n    | [\"take-poll\", pollId] => <TakePollPage id=pollId />\n    | [\"results\", pollId] => <PollResultsPage id=pollId />\n    | _ => <NotFound />\n    };\n\n  <Layout> body </Layout>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":259,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0178813934326ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11100
Sending response {"id": 259, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":260,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":23},"end":{"line":8,"character":23}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00810623168945ms
Sending response {"id": 260, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":261,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.014066696167ms
Sending response {"id": 261, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":260}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re","version":5},"contentChanges":[{"text":"[@react.component]\nlet make = () => {\n  let url = ReasonReact.Router.useUrl();\n\n  let body =\n    switch (url.path) {\n    | [] => <Home />\n    | [\"new\"] => <NewPoll />\n    | [\"manage-poll\", ma] => <ManagePollPage fetchManageResult=pollId />\n    | [\"take-poll\", pollId] => <TakePollPage id=pollId />\n    | [\"results\", pollId] => <PollResultsPage id=pollId />\n    | _ => <NotFound />\n    };\n\n  <Layout> body </Layout>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re","version":7},"contentChanges":[{"text":"[@react.component]\nlet make = () => {\n  let url = ReasonReact.Router.useUrl();\n\n  let body =\n    switch (url.path) {\n    | [] => <Home />\n    | [\"new\"] => <NewPoll />\n    | [\"manage-poll\", maan] => <ManagePollPage fetchManageResult=pollId />\n    | [\"take-poll\", pollId] => <TakePollPage id=pollId />\n    | [\"results\", pollId] => <PollResultsPage id=pollId />\n    | _ => <NotFound />\n    };\n\n  <Layout> body </Layout>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":262,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0250339508057ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11103
Sending response {"id": 262, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":263,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":26},"end":{"line":8,"character":26}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00691413879395ms
Sending response {"id": 263, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
type error here File "", line 9, characters 65-71:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~fetchManageResult
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 65}, "end": {"line": 8, "character": 71}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~fetchManageResult", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","id":264,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0109672546387ms
Sending response {"id": 264, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re","version":9},"contentChanges":[{"text":"[@react.component]\nlet make = () => {\n  let url = ReasonReact.Router.useUrl();\n\n  let body =\n    switch (url.path) {\n    | [] => <Home />\n    | [\"new\"] => <NewPoll />\n    | [\"manage-poll\", ma] => <ManagePollPage fetchManageResult=pollId />\n    | [\"take-poll\", pollId] => <TakePollPage id=pollId />\n    | [\"results\", pollId] => <PollResultsPage id=pollId />\n    | _ => <NotFound />\n    };\n\n  <Layout> body </Layout>;\n};"}]}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11101
type error here File "", line 9, characters 63-69:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~fetchManageResult
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 63}, "end": {"line": 8, "character": 69}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~fetchManageResult", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re","version":13},"contentChanges":[{"text":"[@react.component]\nlet make = () => {\n  let url = ReasonReact.Router.useUrl();\n\n  let body =\n    switch (url.path) {\n    | [] => <Home />\n    | [\"new\"] => <NewPoll />\n    | [\"manage-poll\", manage] => <ManagePollPage fetchManageResult=pollId />\n    | [\"take-poll\", pollId] => <TakePollPage id=pollId />\n    | [\"results\", pollId] => <PollResultsPage id=pollId />\n    | _ => <NotFound />\n    };\n\n  <Layout> body </Layout>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":265,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0159740447998ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11105
Sending response {"id": 265, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":266,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00905990600586ms
Sending response {"id": 266, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re","version":15},"contentChanges":[{"text":"[@react.component]\nlet make = () => {\n  let url = ReasonReact.Router.useUrl();\n\n  let body =\n    switch (url.path) {\n    | [] => <Home />\n    | [\"new\"] => <NewPoll />\n    | [\"manage-poll\", manageTo] => <ManagePollPage fetchManageResult=pollId />\n    | [\"take-poll\", pollId] => <TakePollPage id=pollId />\n    | [\"results\", pollId] => <PollResultsPage id=pollId />\n    | _ => <NotFound />\n    };\n\n  <Layout> body </Layout>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":267,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0231266021729ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11107
Sending response {"id": 267, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":268,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":30},"end":{"line":8,"character":30}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0109672546387ms
Sending response {"id": 268, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
type error here File "", line 9, characters 69-75:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~fetchManageResult
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 69}, "end": {"line": 8, "character": 75}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~fetchManageResult", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","id":269,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.472068786621ms
Sending response {"id": 269, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re","version":18},"contentChanges":[{"text":"[@react.component]\nlet make = () => {\n  let url = ReasonReact.Router.useUrl();\n\n  let body =\n    switch (url.path) {\n    | [] => <Home />\n    | [\"new\"] => <NewPoll />\n    | [\"manage-poll\", manageToken] => <ManagePollPage fetchManageResult=pollId />\n    | [\"take-poll\", pollId] => <TakePollPage id=pollId />\n    | [\"results\", pollId] => <PollResultsPage id=pollId />\n    | _ => <NotFound />\n    };\n\n  <Layout> body </Layout>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":270,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0228881835938ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11110
Sending response {"id": 270, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":271,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0109672546387ms
Sending response {"id": 271, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":272,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":22},"end":{"line":8,"character":33}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0240802764893ms
Sending response {"id": 272, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
type error here File "", line 9, characters 72-78:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~fetchManageResult
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 72}, "end": {"line": 8, "character": 78}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~fetchManageResult", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","id":273,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":81},"end":{"line":8,"character":81}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0388622283936ms
Sending response {"id": 273, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":274,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":72},"end":{"line":8,"character":72}},"context":{"diagnostics":[{"range":{"start":{"line":8,"character":72},"end":{"line":8,"character":78}},"message":"Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~fetchManageResult","severity":1}]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0228881835938ms
Sending response {"id": 274, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":275,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":72},"end":{"line":8,"character":78}},"context":{"diagnostics":[{"range":{"start":{"line":8,"character":72},"end":{"line":8,"character":78}},"message":"Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~fetchManageResult","severity":1}]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0250339508057ms
Sending response {"id": 275, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re","version":19},"contentChanges":[{"text":"[@react.component]\nlet make = () => {\n  let url = ReasonReact.Router.useUrl();\n\n  let body =\n    switch (url.path) {\n    | [] => <Home />\n    | [\"new\"] => <NewPoll />\n    | [\"manage-poll\", manageToken] => <ManagePollPage fetchManageResult=manageToken />\n    | [\"take-poll\", pollId] => <TakePollPage id=pollId />\n    | [\"results\", pollId] => <PollResultsPage id=pollId />\n    | _ => <NotFound />\n    };\n\n  <Layout> body </Layout>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":276,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0309944152832ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.cmt
Size 11110
Sending response {"id": 276, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":277,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":83},"end":{"line":8,"character":83}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0100135803223ms
Sending response {"id": 277, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
type error here File "", line 9, characters 72-83:
Error: The function applied to this argument has type
         (~key: string=?, ~manageToken: 'a) => {. "manageToken": 'a}
This argument cannot be applied with label ~fetchManageResult
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": [{"range": {"start": {"line": 8, "character": 72}, "end": {"line": 8, "character": 83}}, "message": "Error: The function applied to this argument has type\n         (~key: string=?, ~manageToken: 'a) => {. \"manageToken\": 'a}\nThis argument cannot be applied with label ~fetchManageResult", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","id":278,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0231266021729ms
Sending response {"id": 278, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":279,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":71},"end":{"line":8,"character":71}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0190734863281ms
Sending response {"id": 279, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":280,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":54},"end":{"line":8,"character":71}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0319480895996ms
Sending response {"id": 280, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re","version":20},"contentChanges":[{"text":"[@react.component]\nlet make = () => {\n  let url = ReasonReact.Router.useUrl();\n\n  let body =\n    switch (url.path) {\n    | [] => <Home />\n    | [\"new\"] => <NewPoll />\n    | [\"manage-poll\", manageToken] => <ManagePollPage manageToken=manageToken />\n    | [\"take-poll\", pollId] => <TakePollPage id=pollId />\n    | [\"results\", pollId] => <PollResultsPage id=pollId />\n    | _ => <NotFound />\n    };\n\n  <Layout> body </Layout>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":281,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0278949737549ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
Sending response {"id": 281, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":282,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":65},"end":{"line":8,"character":65}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00715255737305ms
Sending response {"id": 282, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":283,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0100135803223ms
Sending response {"id": 283, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":284,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.00786781311035ms
Sending response {"id": 284, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 17, "character": 0}}, "newText": "[@react.component]\nlet make = () => {\n  let url = ReasonReact.Router.useUrl();\n\n  let body =\n    switch (url.path) {\n    | [] => <Home />\n    | [\"new\"] => <NewPoll />\n    | [\"manage-poll\", manageToken] => <ManagePollPage manageToken />\n    | [\"take-poll\", pollId] => <TakePollPage id=pollId />\n    | [\"results\", pollId] => <PollResultsPage id=pollId />\n    | _ => <NotFound />\n    };\n\n  <Layout> body </Layout>;\n};"}]}
Read message 
{"jsonrpc":"2.0","id":285,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":8,"character":65},"end":{"line":8,"character":65}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0219345092773ms
Sending response {"id": 285, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re","version":21},"contentChanges":[{"text":"[@react.component]\nlet make = () => {\n  let url = ReasonReact.Router.useUrl();\n\n  let body =\n    switch (url.path) {\n    | [] => <Home />\n    | [\"new\"] => <NewPoll />\n    | [\"manage-poll\", manageToken] => <ManagePollPage manageToken />\n    | [\"take-poll\", pollId] => <TakePollPage id=pollId />\n    | [\"results\", pollId] => <PollResultsPage id=pollId />\n    | _ => <NotFound />\n    };\n\n  <Layout> body </Layout>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re","version":21}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/4] [34mBuilding[39m [2msrc/App.reast[22m
[2/4] [34mBuilding[39m [2msrc/App.d[22m
[3/4] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
[4/4] [34mBuilding[39m [2msrc/index-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":286,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00691413879395ms
Sending response {"id": 286, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":287,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0150203704834ms
Sending response {"id": 287, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":288,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":14,"character":26},"end":{"line":14,"character":26}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0338554382324ms
Sending response {"id": 288, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":289,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0150203704834ms
Sending response {"id": 289, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re","version":21},"contentChanges":[{"text":"[@react.component]\nlet make = () => {\n  let url = ReasonReact.Router.useUrl();\n\n  let body =\n    switch (url.path) {\n    | [] => <Home />\n    | [\"new\"] => <NewPoll />\n    | [\"manage-poll\", manageToken] => <ManagePollPage manageToken />\n    | [\"take-poll\", pollId] => <TakePollPage id=pollId />\n    | [\"results\", pollId] => <PollResultsPage id=pollId />\n    | _ => <NotFound />\n    };\n\n  <Layout> body </Layout>;\n};"}]}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/App.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/App.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re","version":21}}}
Read message 
{"jsonrpc":"2.0","id":290,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":39,"character":13}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00810623168945ms
[ref] Got a loc for pos
Sending response {"id": 290, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 39, "character": 7}, "end": {"line": 39, "character": 13}}, "kind": 2}, {"range": {"start": {"line": 24, "character": 7}, "end": {"line": 24, "character": 13}}, "kind": 2}, {"range": {"start": {"line": 11, "character": 7}, "end": {"line": 11, "character": 13}}, "kind": 2}]}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/4] [34mBuilding[39m [2msrc/App.reast[22m
[2/4] [34mBuilding[39m [2msrc/App.d[22m
[3/4] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":291,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":39,"character":13},"end":{"line":39,"character":13}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0219345092773ms
Sending response {"id": 291, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":292,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":38,"character":56}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0298023223877ms
[ref] Got a loc for pos
Sending response {"id": 292, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 38, "character": 52}, "end": {"line": 38, "character": 58}}, "kind": 2}, {"range": {"start": {"line": 29, "character": 6}, "end": {"line": 29, "character": 12}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":293,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":38,"character":56},"end":{"line":38,"character":56}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0300407409668ms
Sending response {"id": 293, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":294,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0112056732178ms
Sending response {"id": 294, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":59},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/manage\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":59}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/10] [34mBuilding[39m [2msrc/Api.reast[22m
[2/10] [34mBuilding[39m [2msrc/Api.d[22m
[3/10] [34mBuilding[39m [2msrc/Api-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":295,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":35,"character":55}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0150203704834ms
[ref] Got a loc for pos
Sending response {"id": 295, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 35, "character": 47}, "end": {"line": 35, "character": 58}}, "kind": 2}, {"range": {"start": {"line": 28, "character": 25}, "end": {"line": 28, "character": 36}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":296,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":35,"character":47},"end":{"line":35,"character":58}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0379085540771ms
Sending response {"id": 296, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didClose","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","languageId":"reason","version":1,"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/manage\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}}}
Read message 
{"jsonrpc":"2.0","id":297,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0159740447998ms
Sending response {"id": 297, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":298,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0112056732178ms
Sending response {"id": 298, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":299,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":61,"character":40},"end":{"line":61,"character":40}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0162124633789ms
Sending response {"id": 299, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":300,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0209808349609ms
Sending response {"id": 300, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":301,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0181198120117ms
Sending response {"id": 301, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":302,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0159740447998ms
Sending response {"id": 302, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":303,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0150203704834ms
Sending response {"id": 303, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":304,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":11,"character":41},"end":{"line":11,"character":41}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.028133392334ms
Sending response {"id": 304, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":305,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":13,"character":2},"end":{"line":13,"character":2}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0181198120117ms
Sending response {"id": 305, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re","languageId":"reason","version":1,"text":"[@react.component]\nlet make = (~result: Data.result) => {\n  <div>\n    <h1> {R.s(\"Poll: \" ++ result.poll.question)} </h1>\n    {switch (result.poll.id) {\n     | Some(id) =>\n       <button onClick={_ => ReasonReactRouter.push(\"/take-poll/\" ++ id)}>\n         {R.s(\"Take the Poll Yourself\")}\n       </button>\n     | _ => React.null\n     }}\n    <div>\n      <h2> {R.s(\"Links\")} </h2>\n      {switch (result.poll.id) {\n       | Some(takeToken) =>\n         <p>\n           {R.s(\"Link to take poll: localhost:1234/take-poll/\" ++ takeToken)}\n         </p>\n       | None => React.null\n       }}\n      {switch (result.poll.manageToken) {\n       | Some(manageToken) =>\n         <p>\n           {R.s(\"Link to take poll: localhost:1234/take-poll/\" ++ manageToken)}\n         </p>\n       | None => React.null\n       }}\n    </div>\n    <PollResults result />\n  </div>;\n};"}}}
Read message 
{"jsonrpc":"2.0","id":306,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0231266021729ms
Sending response {"id": 306, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":307,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0181198120117ms
Sending response {"id": 307, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReactDOMRe, React, Condorcet, Js, Pervasives, ReasonReactRouter", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":308,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0128746032715ms
Sending response {"id": 308, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReactDOMRe, React, Condorcet, Js, Pervasives, ReasonReactRouter", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":309,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"position":{"line":5,"character":12}}}
[server] Got a method textDocument/hover
[server] processing took 0.0178813934326ms
[ref] Trying for declared Value 1191 in file file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re
Sending response {"id": 309, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 5, "character": 12}, "end": {"line": 5, "character": 14}}, "contents": {"kind": "markdown", "value": "```\nstring\n```\n\n<root>/priv/assets/src/ManagePoll.re"}}}
Read message 
{"jsonrpc":"2.0","id":310,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":6,"character":9},"end":{"line":6,"character":9}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0138282775879ms
Sending response {"id": 310, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":311,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":10,"character":19}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.018835067749ms
[ref] Got a loc for pos
Sending response {"id": 311, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":312,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":10,"character":19},"end":{"line":10,"character":19}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.19907951355ms
Sending response {"id": 312, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":313,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":9,"character":12}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0340938568115ms
[ref] Got a loc for pos
Sending response {"id": 313, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 9, "character": 10}, "end": {"line": 9, "character": 16}}, "kind": 2}, {"range": {"start": {"line": 2, "character": 7}, "end": {"line": 2, "character": 13}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":314,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":9,"character":10},"end":{"line":9,"character":16}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0181198120117ms
Sending response {"id": 314, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":315,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":5,"character":15}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0379085540771ms
[ref] Got a loc for pos
Sending response {"id": 315, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 5, "character": 8}, "end": {"line": 5, "character": 25}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":316,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":5,"character":8},"end":{"line":5,"character":25}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0178813934326ms
Sending response {"id": 316, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":317,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":9,"character":18},"end":{"line":9,"character":18}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0190734863281ms
Sending response {"id": 317, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":318,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":6,"character":9},"end":{"line":6,"character":9}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0181198120117ms
Sending response {"id": 318, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":319,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":5,"character":16}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0119209289551ms
[ref] Got a loc for pos
Sending response {"id": 319, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 5, "character": 8}, "end": {"line": 5, "character": 25}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":320,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":5,"character":16}}}
[server] Got a method textDocument/definition
[server] processing took 0.0100135803223ms
[ref] Got a loc for pos
[ref] Global defn Condorcet Api.fetchManageResult : Value
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/src/Api-Condorcet.cmt, /Users/mike/Code/condorcet/priv/assets/src/Api.re)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/src/Api-Condorcet.cmt src /Users/mike/Code/condorcet/priv/assets/src/Api.re
[ref] Got stamp 1186
[ref] Inner uri file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 320, "jsonrpc": "2.0", "result": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "range": {"start": {"line": 28, "character": 4}, "end": {"line": 28, "character": 21}}}}
Read message 
{"jsonrpc":"2.0","id":321,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":5,"character":16},"end":{"line":5,"character":16}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0169277191162ms
Sending response {"id": 321, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":322,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":5,"character":16}}}
[server] Got a method textDocument/definition
[server] processing took 0.0109672546387ms
[ref] Got a loc for pos
[ref] Global defn Condorcet Api.fetchManageResult : Value
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/src/Api-Condorcet.cmt, /Users/mike/Code/condorcet/priv/assets/src/Api.re)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/src/Api-Condorcet.cmt src /Users/mike/Code/condorcet/priv/assets/src/Api.re
[ref] Got stamp 1186
[ref] Inner uri file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending response {"id": 322, "jsonrpc": "2.0", "result": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "range": {"start": {"line": 28, "character": 4}, "end": {"line": 28, "character": 21}}}}
Read message 
{"jsonrpc":"2.0","id":323,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0119209289551ms
Sending response {"id": 323, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":324,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0131130218506ms
Sending response {"id": 324, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":325,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0100135803223ms
Sending response {"id": 325, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":326,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":28,"character":4},"end":{"line":28,"character":4}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0209808349609ms
Sending response {"id": 326, "jsonrpc": "2.0", "result": [{"title": "Add to interface file", "command": "reason-language-server.add_to_interface_inner", "arguments": ["file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "let fetchManageResult: (\n  string,\n  'b => option(\n    Condorcet.Data.result\n  ) => 'a\n) => unit"]}]}
Read message 
{"jsonrpc":"2.0","id":327,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":31,"character":4},"end":{"line":31,"character":4}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0169277191162ms
Sending response {"id": 327, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":328,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":28,"character":34}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0138282775879ms
[ref] Got a loc for pos
Sending response {"id": 328, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 35, "character": 47}, "end": {"line": 35, "character": 58}}, "kind": 2}, {"range": {"start": {"line": 28, "character": 25}, "end": {"line": 28, "character": 36}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":329,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":28,"character":25},"end":{"line":28,"character":36}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0228881835938ms
Sending response {"id": 329, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":330,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":29,"character":41},"end":{"line":29,"character":41}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0300407409668ms
Sending response {"id": 330, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":331,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0150203704834ms
Sending response {"id": 331, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":1},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/manage\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":1}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/10] [34mBuilding[39m [2msrc/Api.reast[22m
[2/10] [34mBuilding[39m [2msrc/Api.d[22m
[3/10] [34mBuilding[39m [2msrc/Api-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":332,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0169277191162ms
Sending response {"id": 332, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":1},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(\n      \"http://localhost:4000/api/v1/polls/\" ++ manageToken ++ \"/manage\",\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = poll => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    //    })\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | Errors(errors) =>\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           alert(showErrors);\n           resolve(None);\n\n         | Poll(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      \"http://localhost:4000/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re","version":1}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/10] [34mBuilding[39m [2msrc/Api.reast[22m
[2/10] [34mBuilding[39m [2msrc/Api.d[22m
[3/10] [34mBuilding[39m [2msrc/Api-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":333,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":35,"character":64}}}
[server] Got a method textDocument/hover
[server] processing took 0.0200271606445ms
Sending response {"id": 333, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 35, "character": 62}, "end": {"line": 35, "character": 71}}, "contents": {"kind": "markdown", "value": "string"}}}
Read message 
{"jsonrpc":"2.0","id":334,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":35,"character":53}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0169277191162ms
[ref] Got a loc for pos
Sending response {"id": 334, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 35, "character": 47}, "end": {"line": 35, "character": 58}}, "kind": 2}, {"range": {"start": {"line": 28, "character": 25}, "end": {"line": 28, "character": 36}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":335,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":35,"character":47},"end":{"line":35,"character":58}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0178813934326ms
Sending response {"id": 335, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":336,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"range":{"start":{"line":22,"character":12},"end":{"line":22,"character":12}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0221729278564ms
Sending response {"id": 336, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":337,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"position":{"line":16,"character":28}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.014066696167ms
[ref] Got a loc for pos
Sending response {"id": 337, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didClose","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"}}}
Read message 
{"jsonrpc":"2.0","id":338,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0259876251221ms
Sending response {"id": 338, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":339,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":35,"character":58}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0131130218506ms
[ref] Got a loc for pos
Sending response {"id": 339, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 35, "character": 47}, "end": {"line": 35, "character": 58}}, "kind": 2}, {"range": {"start": {"line": 28, "character": 25}, "end": {"line": 28, "character": 36}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":340,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.014066696167ms
Sending response {"id": 340, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":341,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0138282775879ms
Sending response {"id": 341, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":342,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":35,"character":47},"end":{"line":35,"character":58}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.014066696167ms
Sending response {"id": 342, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":343,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0121593475342ms
Sending response {"id": 343, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":344,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0178813934326ms
Sending response {"id": 344, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":345,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":14,"character":26},"end":{"line":14,"character":26}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0150203704834ms
Sending response {"id": 345, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":346,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0169277191162ms
Sending response {"id": 346, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":347,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0119209289551ms
Sending response {"id": 347, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":348,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":35,"character":58}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0100135803223ms
[ref] Got a loc for pos
Sending response {"id": 348, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 35, "character": 47}, "end": {"line": 35, "character": 58}}, "kind": 2}, {"range": {"start": {"line": 28, "character": 25}, "end": {"line": 28, "character": 36}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":349,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0109672546387ms
Sending response {"id": 349, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":350,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":35,"character":47},"end":{"line":35,"character":58}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0150203704834ms
Sending response {"id": 350, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":351,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0150203704834ms
Sending response {"id": 351, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":352,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0209808349609ms
Sending response {"id": 352, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":353,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"position":{"line":35,"character":58}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0178813934326ms
[ref] Got a loc for pos
Sending response {"id": 353, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 35, "character": 47}, "end": {"line": 35, "character": 58}}, "kind": 2}, {"range": {"start": {"line": 28, "character": 25}, "end": {"line": 28, "character": 36}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":354,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.014066696167ms
Sending response {"id": 354, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":355,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0100135803223ms
Sending response {"id": 355, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives", "command": ""}}, {"range": {"start": {"line": 33, "character": 2}, "end": {"line": 33, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 89, "character": 2}, "end": {"line": 89, "character": 12}}, "command": {"title": "1 uses. values: {then_}", "command": ""}}, {"range": {"start": {"line": 45, "character": 2}, "end": {"line": 45, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 20, "character": 2}, "end": {"line": 20, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 7, "character": 2}, "end": {"line": 7, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":356,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"},"range":{"start":{"line":35,"character":47},"end":{"line":35,"character":58}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0159740447998ms
Sending response {"id": 356, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didClose","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/Api.re"}}}
Read message 
{"jsonrpc":"2.0","id":357,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0119209289551ms
Sending response {"id": 357, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":358,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0131130218506ms
Sending response {"id": 358, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":359,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0209808349609ms
Sending response {"id": 359, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":360,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":14,"character":26},"end":{"line":14,"character":26}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0128746032715ms
Sending response {"id": 360, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":361,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 1.08289718628ms
Sending response {"id": 361, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":362,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":5,"character":16}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0300407409668ms
[ref] Got a loc for pos
Sending response {"id": 362, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 5, "character": 8}, "end": {"line": 5, "character": 25}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":363,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0131130218506ms
Sending response {"id": 363, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":364,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":5,"character":16},"end":{"line":5,"character":16}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0131130218506ms
Sending response {"id": 364, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":365,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0150203704834ms
Sending response {"id": 365, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","languageId":"reason","version":1,"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.id) {\n             | Some(id) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ id) |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}}}
Read message 
{"jsonrpc":"2.0","id":366,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0300407409668ms
Sending response {"id": 366, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":367,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.014066696167ms
Sending response {"id": 367, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":368,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0128746032715ms
Sending response {"id": 368, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":369,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"range":{"start":{"line":47,"character":25},"end":{"line":47,"character":25}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.613927841187ms
Sending response {"id": 369, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":370,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"position":{"line":44,"character":59}}}
[server] Got a method textDocument/hover
[server] processing took 0.0219345092773ms
[ref] Trying for declared Value 1145 in file file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re
Sending response {"id": 370, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 44, "character": 57}, "end": {"line": 44, "character": 59}}, "contents": {"kind": "markdown", "value": "```\nstring\n```\n\n<root>/priv/assets/src/NewPoll.re"}}}
Read message 
{"jsonrpc":"2.0","id":371,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"range":{"start":{"line":44,"character":60},"end":{"line":44,"character":60}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0228881835938ms
Sending response {"id": 371, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":372,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"position":{"line":44,"character":58}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0169277191162ms
[ref] Got a loc for pos
Sending response {"id": 372, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 44, "character": 57}, "end": {"line": 44, "character": 59}}, "kind": 2}, {"range": {"start": {"line": 43, "character": 20}, "end": {"line": 43, "character": 22}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":373,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"range":{"start":{"line":44,"character":58},"end":{"line":44,"character":58}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0221729278564ms
Sending response {"id": 373, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":374,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"position":{"line":42,"character":27}}}
[server] Got a method textDocument/hover
[server] processing took 0.0371932983398ms
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/src/Data-Condorcet.cmt, /Users/mike/Code/condorcet/priv/assets/src/Data.re)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/src/Data-Condorcet.cmt src /Users/mike/Code/condorcet/priv/assets/src/Data.re
[ref] Getting global Condorcet
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/src/Data-Condorcet.cmt, /Users/mike/Code/condorcet/priv/assets/src/Data.re)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/src/Data-Condorcet.cmt src /Users/mike/Code/condorcet/priv/assets/src/Data.re
[ref] Getting for 1002 in poll
[ref] Yes!! got it
Sending response {"id": 374, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 42, "character": 26}, "end": {"line": 42, "character": 28}}, "contents": {"kind": "markdown", "value": "```\nCondorcet.Data.poll\n```\n\n```\ntype poll = {\n  id: option(string),\n  choices: list(string),\n  manageToken: option(string),\n  question: string\n}\n```\n\n<root>/priv/assets/src/Data.re"}}}
Read message 
{"jsonrpc":"2.0","id":375,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"position":{"line":42,"character":27}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0197887420654ms
[ref] Got a loc for pos
Sending response {"id": 375, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 42, "character": 26}, "end": {"line": 42, "character": 28}}, "kind": 2}, {"range": {"start": {"line": 7, "character": 4}, "end": {"line": 7, "character": 6}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":376,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"range":{"start":{"line":42,"character":26},"end":{"line":42,"character":28}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0231266021729ms
Sending response {"id": 376, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","version":2},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.m) {\n             | Some(id) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ id) |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":377,"method":"textDocument/completion","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"position":{"line":42,"character":27},"context":{"triggerKind":1}}}
[server] Got a method textDocument/completion
[server] processing took 0.0131130218506ms
Opens folkz > 1 Js.Promise
Package opens Pervasives Condorcet Condorcet
Package opens Pervasives Condorcet Condorcet
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.cmti, /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli)
FINDING /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.cmti src /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
resolving open Js.Promise.place holder
Not local
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js.cmi, /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js.ml)
FINDING /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js.cmi src /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js.ml
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js_promise.cmt, /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js_promise.ml)
FINDING /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js_promise.cmt src /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js_promise.ml
Opens nows 4 file:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/pervasives.mli file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt file:///Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt file:///Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml/js_promise.ml
Completing for poll<.>m
suffix :m
-------------- Looking for poll
Found it! poll
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/priv/assets/lib/bs/src/Data-Condorcet.cmt, /Users/mike/Code/condorcet/priv/assets/src/Data.re)
FINDING /Users/mike/Code/condorcet/priv/assets/lib/bs/src/Data-Condorcet.cmt src /Users/mike/Code/condorcet/priv/assets/src/Data.re
Sending response {"id": 377, "jsonrpc": "2.0", "result": [{"label": "manageToken", "kind": 5, "detail": "manageToken: string option\n\ntype poll = {\n  id: option(string),\n  choices: list(string),\n  manageToken: option(string),\n  question: string\n}", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/priv/assets/src/Data.re:0"}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","version":3},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.ma) {\n             | Some(id) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ id) |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":378,"method":"completionItem/resolve","params":{"label":"manageToken","detail":"manageToken: string option\n\ntype poll = {\n  id: option(string),\n  choices: list(string),\n  manageToken: option(string),\n  question: string\n}","documentation":"No docs\n\nfile:///Users/mike/Code/condorcet/priv/assets/src/Data.re:0","insertTextFormat":1,"kind":5}}
[server] Got a method completionItem/resolve
[server] processing took 0.0150203704834ms
Sending response {"id": 378, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":378}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","version":4},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.man) {\n             | Some(id) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ id) |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":379,"method":"completionItem/resolve","params":{"label":"manageToken","detail":"manageToken: string option\n\ntype poll = {\n  id: option(string),\n  choices: list(string),\n  manageToken: option(string),\n  question: string\n}","documentation":"No docs\n\nfile:///Users/mike/Code/condorcet/priv/assets/src/Data.re:0","insertTextFormat":1,"kind":5}}
[server] Got a method completionItem/resolve
[server] processing took 0.0200271606445ms
Sending response {"id": 379, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":379}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","version":5},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.mana) {\n             | Some(id) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ id) |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":380,"method":"completionItem/resolve","params":{"label":"manageToken","detail":"manageToken: string option\n\ntype poll = {\n  id: option(string),\n  choices: list(string),\n  manageToken: option(string),\n  question: string\n}","documentation":"No docs\n\nfile:///Users/mike/Code/condorcet/priv/assets/src/Data.re:0","insertTextFormat":1,"kind":5}}
[server] Got a method completionItem/resolve
[server] processing took 0.014066696167ms
Sending response {"id": 380, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":380}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","version":6},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manag) {\n             | Some(id) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ id) |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":381,"method":"completionItem/resolve","params":{"label":"manageToken","detail":"manageToken: string option\n\ntype poll = {\n  id: option(string),\n  choices: list(string),\n  manageToken: option(string),\n  question: string\n}","documentation":"No docs\n\nfile:///Users/mike/Code/condorcet/priv/assets/src/Data.re:0","insertTextFormat":1,"kind":5}}
[server] Got a method completionItem/resolve
[server] processing took 0.014066696167ms
Sending response {"id": 381, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":381}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","version":7},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manage) {\n             | Some(id) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ id) |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":382,"method":"completionItem/resolve","params":{"label":"manageToken","detail":"manageToken: string option\n\ntype poll = {\n  id: option(string),\n  choices: list(string),\n  manageToken: option(string),\n  question: string\n}","documentation":"No docs\n\nfile:///Users/mike/Code/condorcet/priv/assets/src/Data.re:0","insertTextFormat":1,"kind":5}}
[server] Got a method completionItem/resolve
[server] processing took 0.0150203704834ms
Sending response {"id": 382, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":382}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","version":8},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageT) {\n             | Some(id) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ id) |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":383,"method":"completionItem/resolve","params":{"label":"manageToken","detail":"manageToken: string option\n\ntype poll = {\n  id: option(string),\n  choices: list(string),\n  manageToken: option(string),\n  question: string\n}","documentation":"No docs\n\nfile:///Users/mike/Code/condorcet/priv/assets/src/Data.re:0","insertTextFormat":1,"kind":5}}
[server] Got a method completionItem/resolve
[server] processing took 0.0309944152832ms
Sending response {"id": 383, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":383}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","version":9},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageTo) {\n             | Some(id) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ id) |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":384,"method":"completionItem/resolve","params":{"label":"manageToken","detail":"manageToken: string option\n\ntype poll = {\n  id: option(string),\n  choices: list(string),\n  manageToken: option(string),\n  question: string\n}","documentation":"No docs\n\nfile:///Users/mike/Code/condorcet/priv/assets/src/Data.re:0","insertTextFormat":1,"kind":5}}
[server] Got a method completionItem/resolve
[server] processing took 0.0250339508057ms
Sending response {"id": 384, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":384}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","version":10},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageTok) {\n             | Some(id) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ id) |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":385,"method":"completionItem/resolve","params":{"label":"manageToken","detail":"manageToken: string option\n\ntype poll = {\n  id: option(string),\n  choices: list(string),\n  manageToken: option(string),\n  question: string\n}","documentation":"No docs\n\nfile:///Users/mike/Code/condorcet/priv/assets/src/Data.re:0","insertTextFormat":1,"kind":5}}
[server] Got a method completionItem/resolve
[server] processing took 0.0162124633789ms
Sending response {"id": 385, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":385}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","version":11},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToke) {\n             | Some(id) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ id) |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":386,"method":"completionItem/resolve","params":{"label":"manageToken","detail":"manageToken: string option\n\ntype poll = {\n  id: option(string),\n  choices: list(string),\n  manageToken: option(string),\n  question: string\n}","documentation":"No docs\n\nfile:///Users/mike/Code/condorcet/priv/assets/src/Data.re:0","insertTextFormat":1,"kind":5}}
[server] Got a method completionItem/resolve
[server] processing took 0.0121593475342ms
Sending response {"id": 386, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":386}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","version":12},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(id) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ id) |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":387,"method":"completionItem/resolve","params":{"label":"manageToken","detail":"manageToken: string option\n\ntype poll = {\n  id: option(string),\n  choices: list(string),\n  manageToken: option(string),\n  question: string\n}","documentation":"No docs\n\nfile:///Users/mike/Code/condorcet/priv/assets/src/Data.re:0","insertTextFormat":1,"kind":5}}
[server] Got a method completionItem/resolve
[server] processing took 0.0119209289551ms
Sending response {"id": 387, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":388,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.032901763916ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re
Sending response {"id": 388, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":389,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"range":{"start":{"line":42,"character":37},"end":{"line":42,"character":37}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00786781311035ms
Sending response {"id": 389, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":390,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0159740447998ms
Sending response {"id": 390, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":391,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"range":{"start":{"line":42,"character":26},"end":{"line":42,"character":37}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0121593475342ms
Sending response {"id": 391, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":392,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"position":{"line":44,"character":58}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0128746032715ms
[ref] Got a loc for pos
Sending response {"id": 392, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 44, "character": 57}, "end": {"line": 44, "character": 59}}, "kind": 2}, {"range": {"start": {"line": 43, "character": 20}, "end": {"line": 43, "character": 22}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","version":13},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(id) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken) |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":393,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0109672546387ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/NewPoll-Condorcet.cmt
Size 20573
Ident!! Rationale.RList
Sending response {"id": 393, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":394,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"range":{"start":{"line":44,"character":68},"end":{"line":44,"character":68}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00905990600586ms
Sending response {"id": 394, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":395,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0169277191162ms
Sending response {"id": 395, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":396,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0348091125488ms
Sending response {"id": 396, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 97, "character": 0}}, "newText": "[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(id) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","version":14},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(id) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","version":14}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/5] [34mBuilding[39m [2msrc/NewPoll.reast[22m
[2/5] [34mBuilding[39m [2msrc/NewPoll.d[22m
[3/5] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
FAILED: src/NewPoll-Condorcet.cmj src/NewPoll-Condorcet.cmi /Users/mike/Code/condorcet/priv/assets/src/NewPoll.bs.js 
/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -nostdlib -bs-package-name condorcet -bs-ns Condorcet  -bs-package-output commonjs:src -color always -bs-suffix -I . -I src -I /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml -w -30-40+6+7+27+32..39+44+45+101 -warn-error +101  -o src/NewPoll-Condorcet.cmj src/NewPoll.reast

  We've found a bug for you!
  /Users/mike/Code/condorcet/priv/assets/src/NewPoll.re 45:58-68
  
  43 ┆ switch (poll.manageToken) {
  44 ┆ | Some(id) =>
  45 ┆   ReasonReactRouter.push("/manage-poll/" ++ manageToken)
  46 ┆   |> resolve
  47 ┆ | _ =>
  
  The value manageToken can't be found
  
FAILED: subcommand failed.
>>> stderr

Affected files: file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/NewPoll-Condorcet.cmt
Size 20573
Ident!! Rationale.RList
type error here File "", line 45, characters 57-68:
Error: Unbound value manageToken
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re", "diagnostics": [{"range": {"start": {"line": 44, "character": 57}, "end": {"line": 44, "character": 68}}, "message": "Error: Unbound value manageToken", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","id":397,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.00715255737305ms
Sending response {"id": 397, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":398,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00810623168945ms
Sending response {"id": 398, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":399,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00691413879395ms
Sending response {"id": 399, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","version":14},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(id) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","version":14}}}
Read message 
{"jsonrpc":"2.0","id":400,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"range":{"start":{"line":44,"character":68},"end":{"line":44,"character":68}},"context":{"diagnostics":[{"range":{"start":{"line":44,"character":57},"end":{"line":44,"character":68}},"message":"Error: Unbound value manageToken","severity":1}]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0181198120117ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/NewPoll-Condorcet.cmt
Size 20573
Ident!! Rationale.RList
Sending response {"id": 400, "jsonrpc": "2.0", "result": null}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/5] [34mBuilding[39m [2msrc/NewPoll.reast[22m
[2/5] [34mBuilding[39m [2msrc/NewPoll.d[22m
[3/5] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
FAILED: src/NewPoll-Condorcet.cmj src/NewPoll-Condorcet.cmi /Users/mike/Code/condorcet/priv/assets/src/NewPoll.bs.js 
/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -nostdlib -bs-package-name condorcet -bs-ns Condorcet  -bs-package-output commonjs:src -color always -bs-suffix -I . -I src -I /Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/ocaml -I /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml -w -30-40+6+7+27+32..39+44+45+101 -warn-error +101  -o src/NewPoll-Condorcet.cmj src/NewPoll.reast

  We've found a bug for you!
  /Users/mike/Code/condorcet/priv/assets/src/NewPoll.re 45:58-68
  
  43 ┆ switch (poll.manageToken) {
  44 ┆ | Some(id) =>
  45 ┆   ReasonReactRouter.push("/manage-poll/" ++ manageToken)
  46 ┆   |> resolve
  47 ┆ | _ =>
  
  The value manageToken can't be found
  
FAILED: subcommand failed.
>>> stderr

Affected files: file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Now loading /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/NewPoll-Condorcet.cmt
Size 20573
Ident!! Rationale.RList
type error here File "", line 45, characters 57-68:
Error: Unbound value manageToken
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re", "diagnostics": [{"range": {"start": {"line": 44, "character": 57}, "end": {"line": 44, "character": 68}}, "message": "Error: Unbound value manageToken", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","id":401,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"range":{"start":{"line":44,"character":68},"end":{"line":44,"character":68}},"context":{"diagnostics":[{"range":{"start":{"line":44,"character":57},"end":{"line":44,"character":68}},"message":"Error: Unbound value manageToken","severity":1}]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0169277191162ms
Sending response {"id": 401, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":402,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"range":{"start":{"line":47,"character":60},"end":{"line":47,"character":60}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0169277191162ms
Sending response {"id": 402, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":403,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"position":{"line":43,"character":21}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0109672546387ms
[ref] Got a loc for pos
Sending response {"id": 403, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 43, "character": 20}, "end": {"line": 43, "character": 22}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","version":15},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":404,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0331401824951ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re
Sending response {"id": 404, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":405,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"range":{"start":{"line":43,"character":31},"end":{"line":43,"character":31}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00691413879395ms
Sending response {"id": 405, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":406,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0288486480713ms
Sending response {"id": 406, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":407,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0121593475342ms
Sending response {"id": 407, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":408,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"range":{"start":{"line":43,"character":31},"end":{"line":43,"character":31}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0150203704834ms
Sending response {"id": 408, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","version":15},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re","version":15}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/5] [34mBuilding[39m [2msrc/NewPoll.reast[22m
[2/5] [34mBuilding[39m [2msrc/NewPoll.d[22m
[3/5] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":409,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"range":{"start":{"line":46,"character":19},"end":{"line":46,"character":19}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0178813934326ms
Sending response {"id": 409, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":410,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"position":{"line":47,"character":38}}}
[server] Got a method textDocument/hover
[server] processing took 0.0219345092773ms
Sending response {"id": 410, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 47, "character": 21}, "end": {"line": 47, "character": 58}}, "contents": {"kind": "markdown", "value": "string"}}}
Read message 
{"jsonrpc":"2.0","id":411,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"position":{"line":47,"character":38}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0150203704834ms
[ref] Got a loc for pos
Sending response {"id": 411, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":412,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"},"range":{"start":{"line":47,"character":38},"end":{"line":47,"character":38}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0240802764893ms
Sending response {"id": 412, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didClose","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/NewPoll.re"}}}
Read message 
{"jsonrpc":"2.0","id":413,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0181198120117ms
Sending response {"id": 413, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":414,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"position":{"line":5,"character":16}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.014066696167ms
[ref] Got a loc for pos
Sending response {"id": 414, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 5, "character": 8}, "end": {"line": 5, "character": 25}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":415,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0219345092773ms
Sending response {"id": 415, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":416,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"},"range":{"start":{"line":5,"character":16},"end":{"line":5,"character":16}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0181198120117ms
Sending response {"id": 416, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":417,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0178813934326ms
Sending response {"id": 417, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didClose","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePollPage.re"}}}
Read message 
{"jsonrpc":"2.0","id":418,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.014066696167ms
Sending response {"id": 418, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":419,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.014066696167ms
Sending response {"id": 419, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":420,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"},"range":{"start":{"line":15,"character":2},"end":{"line":15,"character":2}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0128746032715ms
Sending response {"id": 420, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":421,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0119209289551ms
Sending response {"id": 421, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReasonReact, React, Condorcet, Js", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didClose","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/App.re"}}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re","languageId":"reason","version":1,"text":"[@react.component]\nlet make = (~result: Data.result) => {\n  <div>\n    <h1> {R.s(\"Poll: \" ++ result.poll.question)} </h1>\n    {switch (result.poll.id) {\n     | Some(id) =>\n       <button onClick={_ => ReasonReactRouter.push(\"/take-poll/\" ++ id)}>\n         {R.s(\"Take the Poll Yourself\")}\n       </button>\n     | _ => React.null\n     }}\n    <div>\n      <h2> {R.s(\"Links\")} </h2>\n      {switch (result.poll.id) {\n       | Some(takeToken) =>\n         <p>\n           {R.s(\"Link to take poll: localhost:1234/take-poll/\" ++ takeToken)}\n         </p>\n       | None => React.null\n       }}\n      {switch (result.poll.manageToken) {\n       | Some(manageToken) =>\n         <p>\n           {R.s(\"Link to take poll: localhost:1234/take-poll/\" ++ manageToken)}\n         </p>\n       | None => React.null\n       }}\n    </div>\n    <PollResults result />\n  </div>;\n};"}}}
Read message 
{"jsonrpc":"2.0","id":422,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0147819519043ms
Sending response {"id": 422, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":423,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0178813934326ms
Sending response {"id": 423, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReactDOMRe, React, Condorcet, Js, Pervasives, ReasonReactRouter", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":424,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"range":{"start":{"line":23,"character":17},"end":{"line":23,"character":34}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0169277191162ms
Sending response {"id": 424, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":425,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0150203704834ms
Sending response {"id": 425, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReactDOMRe, React, Condorcet, Js, Pervasives, ReasonReactRouter", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":426,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"range":{"start":{"line":26,"character":9},"end":{"line":26,"character":9}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0219345092773ms
Sending response {"id": 426, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":427,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"position":{"line":23,"character":24}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0150203704834ms
[ref] Got a loc for pos
Sending response {"id": 427, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":428,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"range":{"start":{"line":23,"character":24},"end":{"line":23,"character":24}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0128746032715ms
Sending response {"id": 428, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":429,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"position":{"line":23,"character":24}}}
[server] Got a method textDocument/definition
[server] processing took 0.0200271606445ms
[ref] Got a loc for pos
Sending response {"id": 429, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":430,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"range":{"start":{"line":23,"character":34},"end":{"line":23,"character":34}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.203132629395ms
Sending response {"id": 430, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":431,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"position":{"line":23,"character":30}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0369548797607ms
[ref] Got a loc for pos
Sending response {"id": 431, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":432,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"range":{"start":{"line":23,"character":30},"end":{"line":23,"character":30}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0288486480713ms
Sending response {"id": 432, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":433,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"position":{"line":23,"character":29}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0419616699219ms
[ref] Got a loc for pos
Sending response {"id": 433, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":434,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"range":{"start":{"line":23,"character":25},"end":{"line":23,"character":29}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0290870666504ms
Sending response {"id": 434, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re","version":5},"contentChanges":[{"text":"[@react.component]\nlet make = (~result: Data.result) => {\n  <div>\n    <h1> {R.s(\"Poll: \" ++ result.poll.question)} </h1>\n    {switch (result.poll.id) {\n     | Some(id) =>\n       <button onClick={_ => ReasonReactRouter.push(\"/take-poll/\" ++ id)}>\n         {R.s(\"Take the Poll Yourself\")}\n       </button>\n     | _ => React.null\n     }}\n    <div>\n      <h2> {R.s(\"Links\")} </h2>\n      {switch (result.poll.id) {\n       | Some(takeToken) =>\n         <p>\n           {R.s(\"Link to take poll: localhost:1234/take-poll/\" ++ takeToken)}\n         </p>\n       | None => React.null\n       }}\n      {switch (result.poll.manageToken) {\n       | Some(manageToken) =>\n         <p>\n           {R.s(\"Link to mana poll: localhost:1234/take-poll/\" ++ manageToken)}\n         </p>\n       | None => React.null\n       }}\n    </div>\n    <PollResults result />\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re","version":7},"contentChanges":[{"text":"[@react.component]\nlet make = (~result: Data.result) => {\n  <div>\n    <h1> {R.s(\"Poll: \" ++ result.poll.question)} </h1>\n    {switch (result.poll.id) {\n     | Some(id) =>\n       <button onClick={_ => ReasonReactRouter.push(\"/take-poll/\" ++ id)}>\n         {R.s(\"Take the Poll Yourself\")}\n       </button>\n     | _ => React.null\n     }}\n    <div>\n      <h2> {R.s(\"Links\")} </h2>\n      {switch (result.poll.id) {\n       | Some(takeToken) =>\n         <p>\n           {R.s(\"Link to take poll: localhost:1234/take-poll/\" ++ takeToken)}\n         </p>\n       | None => React.null\n       }}\n      {switch (result.poll.manageToken) {\n       | Some(manageToken) =>\n         <p>\n           {R.s(\"Link to manage poll: localhost:1234/take-poll/\" ++ manageToken)}\n         </p>\n       | None => React.null\n       }}\n    </div>\n    <PollResults result />\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":435,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0138282775879ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re
Sending response {"id": 435, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReactDOMRe, React, Condorcet, Js, Pervasives, ReasonReactRouter", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":436,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"range":{"start":{"line":23,"character":31},"end":{"line":23,"character":31}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0121593475342ms
Sending response {"id": 436, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":437,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0290870666504ms
Sending response {"id": 437, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReactDOMRe, React, Condorcet, Js, Pervasives, ReasonReactRouter", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":438,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"range":{"start":{"line":23,"character":37},"end":{"line":23,"character":37}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.018835067749ms
Sending response {"id": 438, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":439,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"range":{"start":{"line":23,"character":57},"end":{"line":23,"character":57}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0231266021729ms
Sending response {"id": 439, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":440,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"range":{"start":{"line":23,"character":53},"end":{"line":23,"character":57}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0247955322266ms
Sending response {"id": 440, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re","version":13},"contentChanges":[{"text":"[@react.component]\nlet make = (~result: Data.result) => {\n  <div>\n    <h1> {R.s(\"Poll: \" ++ result.poll.question)} </h1>\n    {switch (result.poll.id) {\n     | Some(id) =>\n       <button onClick={_ => ReasonReactRouter.push(\"/take-poll/\" ++ id)}>\n         {R.s(\"Take the Poll Yourself\")}\n       </button>\n     | _ => React.null\n     }}\n    <div>\n      <h2> {R.s(\"Links\")} </h2>\n      {switch (result.poll.id) {\n       | Some(takeToken) =>\n         <p>\n           {R.s(\"Link to take poll: localhost:1234/take-poll/\" ++ takeToken)}\n         </p>\n       | None => React.null\n       }}\n      {switch (result.poll.manageToken) {\n       | Some(manageToken) =>\n         <p>\n           {R.s(\"Link to manage poll: localhost:1234/manage-poll/\" ++ manageToken)}\n         </p>\n       | None => React.null\n       }}\n    </div>\n    <PollResults result />\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":441,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0109672546387ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re
Sending response {"id": 441, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReactDOMRe, React, Condorcet, Js, Pervasives, ReasonReactRouter", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":442,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"range":{"start":{"line":23,"character":59},"end":{"line":23,"character":59}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00810623168945ms
Sending response {"id": 442, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":443,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0269412994385ms
Sending response {"id": 443, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReactDOMRe, React, Condorcet, Js, Pervasives, ReasonReactRouter", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":444,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.00905990600586ms
Sending response {"id": 444, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 32, "character": 0}}, "newText": "[@react.component]\nlet make = (~result: Data.result) => {\n  <div>\n    <h1> {R.s(\"Poll: \" ++ result.poll.question)} </h1>\n    {switch (result.poll.id) {\n     | Some(id) =>\n       <button onClick={_ => ReasonReactRouter.push(\"/take-poll/\" ++ id)}>\n         {R.s(\"Take the Poll Yourself\")}\n       </button>\n     | _ => React.null\n     }}\n    <div>\n      <h2> {R.s(\"Links\")} </h2>\n      {switch (result.poll.id) {\n       | Some(takeToken) =>\n         <p>\n           {R.s(\"Link to take poll: localhost:1234/take-poll/\" ++ takeToken)}\n         </p>\n       | None => React.null\n       }}\n      {switch (result.poll.manageToken) {\n       | Some(manageToken) =>\n         <p>\n           {R.s(\n              \"Link to manage poll: localhost:1234/manage-poll/\" ++ manageToken,\n            )}\n         </p>\n       | None => React.null\n       }}\n    </div>\n    <PollResults result />\n  </div>;\n};"}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re","version":14},"contentChanges":[{"text":"[@react.component]\nlet make = (~result: Data.result) => {\n  <div>\n    <h1> {R.s(\"Poll: \" ++ result.poll.question)} </h1>\n    {switch (result.poll.id) {\n     | Some(id) =>\n       <button onClick={_ => ReasonReactRouter.push(\"/take-poll/\" ++ id)}>\n         {R.s(\"Take the Poll Yourself\")}\n       </button>\n     | _ => React.null\n     }}\n    <div>\n      <h2> {R.s(\"Links\")} </h2>\n      {switch (result.poll.id) {\n       | Some(takeToken) =>\n         <p>\n           {R.s(\"Link to take poll: localhost:1234/take-poll/\" ++ takeToken)}\n         </p>\n       | None => React.null\n       }}\n      {switch (result.poll.manageToken) {\n       | Some(manageToken) =>\n         <p>\n           {R.s(\n              \"Link to manage poll: localhost:1234/manage-poll/\" ++ manageToken,\n            )}\n         </p>\n       | None => React.null\n       }}\n    </div>\n    <PollResults result />\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re","version":14}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/6] [34mBuilding[39m [2msrc/ManagePoll.reast[22m
[2/6] [34mBuilding[39m [2msrc/ManagePoll.d[22m
[3/6] [34mBuilding[39m [2msrc/ManagePoll-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":445,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.00786781311035ms
Sending response {"id": 445, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":446,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0109672546387ms
Sending response {"id": 446, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReactDOMRe, React, Condorcet, Js, Pervasives, ReasonReactRouter", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":447,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"range":{"start":{"line":24,"character":57},"end":{"line":24,"character":57}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00691413879395ms
Sending response {"id": 447, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":448,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00905990600586ms
Sending response {"id": 448, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReactDOMRe, React, Condorcet, Js, Pervasives, ReasonReactRouter", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re","version":14},"contentChanges":[{"text":"[@react.component]\nlet make = (~result: Data.result) => {\n  <div>\n    <h1> {R.s(\"Poll: \" ++ result.poll.question)} </h1>\n    {switch (result.poll.id) {\n     | Some(id) =>\n       <button onClick={_ => ReasonReactRouter.push(\"/take-poll/\" ++ id)}>\n         {R.s(\"Take the Poll Yourself\")}\n       </button>\n     | _ => React.null\n     }}\n    <div>\n      <h2> {R.s(\"Links\")} </h2>\n      {switch (result.poll.id) {\n       | Some(takeToken) =>\n         <p>\n           {R.s(\"Link to take poll: localhost:1234/take-poll/\" ++ takeToken)}\n         </p>\n       | None => React.null\n       }}\n      {switch (result.poll.manageToken) {\n       | Some(manageToken) =>\n         <p>\n           {R.s(\n              \"Link to manage poll: localhost:1234/manage-poll/\" ++ manageToken,\n            )}\n         </p>\n       | None => React.null\n       }}\n    </div>\n    <PollResults result />\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re","version":14}}}
Read message 
{"jsonrpc":"2.0","id":449,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"range":{"start":{"line":26,"character":13},"end":{"line":26,"character":13}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0100135803223ms
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re
Sending response {"id": 449, "jsonrpc": "2.0", "result": null}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/6] [34mBuilding[39m [2msrc/ManagePoll.reast[22m
[2/6] [34mBuilding[39m [2msrc/ManagePoll.d[22m
[3/6] [34mBuilding[39m [2msrc/ManagePoll-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":450,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0181198120117ms
Sending response {"id": 450, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re","version":14},"contentChanges":[{"text":"[@react.component]\nlet make = (~result: Data.result) => {\n  <div>\n    <h1> {R.s(\"Poll: \" ++ result.poll.question)} </h1>\n    {switch (result.poll.id) {\n     | Some(id) =>\n       <button onClick={_ => ReasonReactRouter.push(\"/take-poll/\" ++ id)}>\n         {R.s(\"Take the Poll Yourself\")}\n       </button>\n     | _ => React.null\n     }}\n    <div>\n      <h2> {R.s(\"Links\")} </h2>\n      {switch (result.poll.id) {\n       | Some(takeToken) =>\n         <p>\n           {R.s(\"Link to take poll: localhost:1234/take-poll/\" ++ takeToken)}\n         </p>\n       | None => React.null\n       }}\n      {switch (result.poll.manageToken) {\n       | Some(manageToken) =>\n         <p>\n           {R.s(\n              \"Link to manage poll: localhost:1234/manage-poll/\" ++ manageToken,\n            )}\n         </p>\n       | None => React.null\n       }}\n    </div>\n    <PollResults result />\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re","version":14}}}
>> Build system running: /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/6] [34mBuilding[39m [2msrc/ManagePoll.reast[22m
[2/6] [34mBuilding[39m [2msrc/ManagePoll.d[22m
[3/6] [34mBuilding[39m [2msrc/ManagePoll-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re
➡️ running compiler /Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/priv/assets/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/priv/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/priv/assets/node_modules/.lsp/ManagePoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/priv/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didClose","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/priv/assets/src/ManagePoll.re"}}}
Read message 
{"jsonrpc":"2.0","method":"workspace/didChangeWatchedFiles","params":{"changes":[{"uri":"file:///Users/mike/Code/condorcet/assets/bsconfig.json","type":1},{"uri":"file:///Users/mike/Code/condorcet/assets/.merlin","type":1}]}}
Got a watched file change
Read message 
{"jsonrpc":"2.0","method":"workspace/didChangeWatchedFiles","params":{"changes":[{"uri":"file:///Users/mike/Code/condorcet/assets/.merlin","type":2}]}}
Got a watched file change
Read message 
{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re","languageId":"reason","version":1,"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}}}
📣 📣 NEW BSB PACKAGE 📣 📣
- location: /Users/mike/Code/condorcet/assets
- bsPlatform: /Users/mike/Code/condorcet/assets/node_modules/bs-platform
- buildSystem: bsb version 7.0.1
- build command: /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>> Build system running: /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/bsconfig.json", "diagnostics": []}}
Deps rationale, reason-react, bs-webapi, bs-fetch, @glennsl/bs-json
Dep loc /Users/mike/Code/condorcet/assets/node_modules/rationale/bsconfig.json
Compiled base: /Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs
Source directories: /Users/mike/Code/condorcet/assets/node_modules/rationale/src
Source files found: /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Identity.re : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/KIO.re : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Function.re : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Monoid.re : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Option.rei : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Dict.re : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/RList.rei : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Writer.re : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Reader.re : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Result.re : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/RArray.re : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Monad.re : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Alt.re : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Alternative.re : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Logic.re : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Util.re : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/IO.re : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/RList.re : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Plus.re : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Dict.rei : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Option.re : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/RArray.rei : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Applicative.re : /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Lens.re
Adding intf /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Option.rei
Adding intf /Users/mike/Code/condorcet/assets/node_modules/rationale/src/RList.rei
Adding intf /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Dict.rei
Adding intf /Users/mike/Code/condorcet/assets/node_modules/rationale/src/RArray.rei
Bad source file (extension) /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Option.rei
Bad source file (extension) /Users/mike/Code/condorcet/assets/node_modules/rationale/src/RList.rei
Bad source file (extension) /Users/mike/Code/condorcet/assets/node_modules/rationale/src/Dict.rei
Bad source file (extension) /Users/mike/Code/condorcet/assets/node_modules/rationale/src/RArray.rei
adding namespace Rationale : Rationale : /Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/Rationale.cmt
Dep loc /Users/mike/Code/condorcet/assets/node_modules/reason-react/bsconfig.json
Compiled base: /Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs
Source directories: /Users/mike/Code/condorcet/assets/node_modules/reason-react/src
Source files found: /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReasonReactRouter.rei : /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReasonReactCompat.re : /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReactDOMRe.re : /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReactEvent.re : /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReactEventRe.rei : /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReasonReact.re : /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReasonReactOptimizedCreateClass.re : /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReactDOMServerRe.re : /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReasonReactCompat.rei : /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReactEventRe.re : /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReactEvent.rei : /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReasonReact.rei : /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReasonReactRouter.re : /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/React.re
Adding intf /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReasonReactRouter.rei
Adding intf /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReactEventRe.rei
Adding intf /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReasonReactCompat.rei
Adding intf /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReactEvent.rei
Adding intf /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReasonReact.rei
Bad source file (extension) /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReasonReactRouter.rei
Bad source file (extension) /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReactEventRe.rei
Bad source file (extension) /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReasonReactCompat.rei
Bad source file (extension) /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReactEvent.rei
Bad source file (extension) /Users/mike/Code/condorcet/assets/node_modules/reason-react/src/ReasonReact.rei
Dep loc /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/bsconfig.json
Compiled base: /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs
Source directories: /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src - /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi - /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom - /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Canvas
Source files found: /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Url.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Canvas.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Node.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ShadowRoot.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__NodeIterator.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__KeyboardEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__TransitionEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__TouchEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__InputEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__RelatedEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Attr.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__CustomEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__History.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__PageTransitionEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Selection.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__BeforeUnloadEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__HtmlFormElement.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__NamedNodeMap.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__WebGlContextEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ParentNode.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__HtmlCollection.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__MutationRecord.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DomStringMap.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__WheelEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DomRect.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__IdbVersionChangeEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__FocusEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__MutationObserver.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DocumentType.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ChildNode.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__GlobalEventHandlers.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Text.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__CdataSection.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Image.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DomTokenList.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__MouseEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__StorageEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__CssStyleDeclaration.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__TimeEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Event.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__EventTarget.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DomImplementation.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Slotable.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ProgressEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ClipboardEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ProcessingInstruction.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DocumentFragment.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Element.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__AnimationEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__NonElementParentNode.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__UiEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__HtmlDocument.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__PopStateEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ErrorEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__SvgZoomEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DragEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__NodeFilter.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__PointerEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__CompositionEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Range.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__CharacterData.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__TreeWalker.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Location.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Window.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__HtmlImageElement.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DocumentOrShadowRoot.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__CloseEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__TrackEvent.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__NodeList.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__HtmlInputElement.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ValidityState.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Types.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Document.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__HtmlElement.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__NonDocumentTypeChildNode.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Comment.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__File.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Canvas/Webapi__Canvas__WebGl.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Canvas/Webapi__Canvas__Canvas2d.re : /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/src/Webapi/Webapi__Base64.re
Dep loc /Users/mike/Code/condorcet/assets/node_modules/bs-fetch/bsconfig.json
Compiled base: /Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs
Source directories: /Users/mike/Code/condorcet/assets/node_modules/bs-fetch/src
Source files found: /Users/mike/Code/condorcet/assets/node_modules/bs-fetch/src/bs_fetch.ml : /Users/mike/Code/condorcet/assets/node_modules/bs-fetch/src/Fetch.mli : /Users/mike/Code/condorcet/assets/node_modules/bs-fetch/src/Fetch.ml
Adding intf /Users/mike/Code/condorcet/assets/node_modules/bs-fetch/src/Fetch.mli
Bad source file (extension) /Users/mike/Code/condorcet/assets/node_modules/bs-fetch/src/Fetch.mli
Dep loc /Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/bsconfig.json
Compiled base: /Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs
Source directories: /Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/src
Source files found: /Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/src/Json_decode.ml : /Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/src/Json.mli : /Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/src/Json.ml : /Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/src/Json_decode.mli : /Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/src/Json_encode.ml : /Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/src/Json_encode.mli
Adding intf /Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/src/Json.mli
Adding intf /Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/src/Json_decode.mli
Adding intf /Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/src/Json_encode.mli
Bad source file (extension) /Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/src/Json.mli
Bad source file (extension) /Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/src/Json_decode.mli
Bad source file (extension) /Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/src/Json_encode.mli
Got source directories ./src
Source directories: /Users/mike/Code/condorcet/assets/src
Source files found: /Users/mike/Code/condorcet/assets/src/Data.re : /Users/mike/Code/condorcet/assets/src/ManagePoll.re : /Users/mike/Code/condorcet/assets/src/TakePoll.re : /Users/mike/Code/condorcet/assets/src/App.re : /Users/mike/Code/condorcet/assets/src/Api.re : /Users/mike/Code/condorcet/assets/src/PollResultsPage.re : /Users/mike/Code/condorcet/assets/src/Layout.re : /Users/mike/Code/condorcet/assets/src/TakePollPage.re : /Users/mike/Code/condorcet/assets/src/NewPoll.re : /Users/mike/Code/condorcet/assets/src/NotFound.re : /Users/mike/Code/condorcet/assets/src/PollResults.re : /Users/mike/Code/condorcet/assets/src/Greeting.re : /Users/mike/Code/condorcet/assets/src/Home.re : /Users/mike/Code/condorcet/assets/src/ManagePollPage.re : /Users/mike/Code/condorcet/assets/src/Style.re : /Users/mike/Code/condorcet/assets/src/R.re : /Users/mike/Code/condorcet/assets/src/index.re
adding namespace Condorcet : Condorcet : /Users/mike/Code/condorcet/assets/lib/bs/Condorcet.cmt
-- All local modules found: 18
Condorcet
impl /Users/mike/Code/condorcet/assets/lib/bs/Condorcet.cmt
Data-Condorcet
impl /Users/mike/Code/condorcet/assets/lib/bs/src/Data-Condorcet.cmt
ManagePoll-Condorcet
impl /Users/mike/Code/condorcet/assets/lib/bs/src/ManagePoll-Condorcet.cmt
TakePoll-Condorcet
impl /Users/mike/Code/condorcet/assets/lib/bs/src/TakePoll-Condorcet.cmt
App-Condorcet
impl /Users/mike/Code/condorcet/assets/lib/bs/src/App-Condorcet.cmt
Api-Condorcet
impl /Users/mike/Code/condorcet/assets/lib/bs/src/Api-Condorcet.cmt
PollResultsPage-Condorcet
impl /Users/mike/Code/condorcet/assets/lib/bs/src/PollResultsPage-Condorcet.cmt
Layout-Condorcet
impl /Users/mike/Code/condorcet/assets/lib/bs/src/Layout-Condorcet.cmt
TakePollPage-Condorcet
impl /Users/mike/Code/condorcet/assets/lib/bs/src/TakePollPage-Condorcet.cmt
NewPoll-Condorcet
impl /Users/mike/Code/condorcet/assets/lib/bs/src/NewPoll-Condorcet.cmt
NotFound-Condorcet
impl /Users/mike/Code/condorcet/assets/lib/bs/src/NotFound-Condorcet.cmt
PollResults-Condorcet
impl /Users/mike/Code/condorcet/assets/lib/bs/src/PollResults-Condorcet.cmt
Greeting-Condorcet
impl /Users/mike/Code/condorcet/assets/lib/bs/src/Greeting-Condorcet.cmt
Home-Condorcet
impl /Users/mike/Code/condorcet/assets/lib/bs/src/Home-Condorcet.cmt
ManagePollPage-Condorcet
impl /Users/mike/Code/condorcet/assets/lib/bs/src/ManagePollPage-Condorcet.cmt
Style-Condorcet
impl /Users/mike/Code/condorcet/assets/lib/bs/src/Style-Condorcet.cmt
R-Condorcet
impl /Users/mike/Code/condorcet/assets/lib/bs/src/R-Condorcet.cmt
Index-Condorcet
impl /Users/mike/Code/condorcet/assets/lib/bs/src/index-Condorcet.cmt
############ Namespaced as Condorcet at /Users/mike/Code/condorcet/assets/lib/bs/Condorcet.cmt
Dependency dirs /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml /Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs /Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src /Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom /Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas /Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src /Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/NewPoll.re
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":451,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.014066696167ms
Sending response {"id": 451, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":452,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0100135803223ms
Sending response {"id": 452, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":453,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00905990600586ms
Sending response {"id": 453, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":454,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":74,"character":15},"end":{"line":74,"character":26}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0190734863281ms
Sending response {"id": 454, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":451}}
Read message 
{"jsonrpc":"2.0","id":455,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"position":{"line":87,"character":23}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00810623168945ms
[ref] Got a loc for pos
Sending response {"id": 455, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":456,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0371932983398ms
Sending response {"id": 456, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re","version":1},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll!\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re","version":1}}}
Read message 
{"jsonrpc":"2.0","id":457,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":87,"character":23},"end":{"line":87,"character":23}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0221729278564ms
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/NewPoll.re
Sending response {"id": 457, "jsonrpc": "2.0", "result": null}
>> Build system running: /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/5] [34mBuilding[39m [2msrc/NewPoll.reast[22m
[2/5] [34mBuilding[39m [2msrc/NewPoll.d[22m
[3/5] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/NewPoll.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/PollResultsPage.re
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/PollResultsPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/PollResultsPage.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/PollResultsPage.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/TakePoll.re
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/TakePoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/TakePoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/TakePoll.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/Home.re
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/Home-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/Home.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/Home.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/index.re
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/Index-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/index.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/index.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/Api.re
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/Api.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/Style.re
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/Style-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/Style.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/Style.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/PollResults.re
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/PollResults-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/PollResults.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/PollResults.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/NotFound.re
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/NotFound-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/NotFound.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/NotFound.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/Greeting.re
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/Greeting-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/Greeting.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/Greeting.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/Data.re
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/Data-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/Data.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/Data.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/R.re
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/R-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/R.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/R.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/App.re
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/App.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/App.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/ManagePoll.re
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/ManagePoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/ManagePoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/ManagePoll.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/ManagePollPage.re
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/ManagePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/ManagePollPage.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/ManagePollPage.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/TakePollPage.re
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/TakePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/TakePollPage.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/TakePollPage.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/Layout.re
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/Layout-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/Layout.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/Layout.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":458,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00905990600586ms
Sending response {"id": 458, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":459,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0209808349609ms
Sending response {"id": 459, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":460,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0169277191162ms
Sending response {"id": 460, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":461,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":87,"character":23},"end":{"line":87,"character":23}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.014066696167ms
Sending response {"id": 461, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":458}}
Read message 
{"jsonrpc":"2.0","id":462,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"position":{"line":74,"character":25}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0131130218506ms
[ref] Got a loc for pos
Sending response {"id": 462, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":463,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"position":{"line":74,"character":25}}}
[server] Got a method textDocument/hover
[server] processing took 0.0848770141602ms
Sending response {"id": 463, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 74, "character": 14}, "end": {"line": 74, "character": 28}}, "contents": {"kind": "markdown", "value": "string"}}}
Read message 
{"jsonrpc":"2.0","id":464,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":74,"character":25},"end":{"line":74,"character":25}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0169277191162ms
Sending response {"id": 464, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re","version":2},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":465,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0119209289551ms
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/NewPoll.re
Sending response {"id": 465, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":466,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":74,"character":26},"end":{"line":74,"character":26}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00786781311035ms
Sending response {"id": 466, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":467,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0159740447998ms
Sending response {"id": 467, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":466}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re","version":3},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll?\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":468,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0360012054443ms
Sending response {"id": 468, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":469,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0159740447998ms
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/NewPoll.re
Sending response {"id": 469, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":470,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":74,"character":27},"end":{"line":74,"character":27}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0171661376953ms
Sending response {"id": 470, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":471,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0200271606445ms
Sending response {"id": 471, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re","version":3},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll?\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/NewPoll.re
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re","version":3}}}
Read message 
{"jsonrpc":"2.0","id":472,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0131130218506ms
Sending response {"id": 472, "jsonrpc": "2.0", "result": null}
>> Build system running: /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/5] [34mBuilding[39m [2msrc/NewPoll.reast[22m
[2/5] [34mBuilding[39m [2msrc/NewPoll.d[22m
[3/5] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/bsconfig.json", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":473,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0119209289551ms
Sending response {"id": 473, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":474,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0150203704834ms
Sending response {"id": 474, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":475,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":74,"character":27},"end":{"line":74,"character":27}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0350475311279ms
Sending response {"id": 475, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":475}}
Read message 
{"jsonrpc":"2.0","id":476,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0162124633789ms
Sending response {"id": 476, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":477,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.014066696167ms
Sending response {"id": 477, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":478,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.014066696167ms
Sending response {"id": 478, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":479,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":74,"character":27},"end":{"line":74,"character":27}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0121593475342ms
Sending response {"id": 479, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":480,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0150203704834ms
Sending response {"id": 480, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":481,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0231266021729ms
Sending response {"id": 481, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":482,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":74,"character":27},"end":{"line":74,"character":27}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0171661376953ms
Sending response {"id": 482, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":483,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0419616699219ms
Sending response {"id": 483, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":484,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0150203704834ms
Sending response {"id": 484, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":485,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0128746032715ms
Sending response {"id": 485, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":486,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":74,"character":27},"end":{"line":74,"character":27}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0119209289551ms
Sending response {"id": 486, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":487,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0200271606445ms
Sending response {"id": 487, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":488,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0429153442383ms
Sending response {"id": 488, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":489,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":74,"character":27},"end":{"line":74,"character":27}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.018835067749ms
Sending response {"id": 489, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":490,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0209808349609ms
Sending response {"id": 490, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":491,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0150203704834ms
Sending response {"id": 491, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":492,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.046968460083ms
Sending response {"id": 492, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":493,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":74,"character":27},"end":{"line":74,"character":27}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0209808349609ms
Sending response {"id": 493, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":494,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0350475311279ms
Sending response {"id": 494, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":495,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":70,"character":11},"end":{"line":70,"character":11}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0221729278564ms
Sending response {"id": 495, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":496,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0159740447998ms
Sending response {"id": 496, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re","version":3},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll?\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re","version":3}}}
>> Build system running: /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/5] [34mBuilding[39m [2msrc/NewPoll.reast[22m
[2/5] [34mBuilding[39m [2msrc/NewPoll.d[22m
[3/5] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/NewPoll.re
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/index.re","languageId":"reason","version":1,"text":"ReactDOMRe.renderToElementWithId(<App />, \"app\");"}}}
Read message 
{"jsonrpc":"2.0","id":497,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/index.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0290870666504ms
Sending response {"id": 497, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":498,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/index.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0400543212891ms
Sending response {"id": 498, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReactDOMRe, React, Condorcet", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":499,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/index.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0162124633789ms
Sending response {"id": 499, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReactDOMRe, React, Condorcet", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/index.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/index.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":500,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/index.re"},"range":{"start":{"line":0,"character":49},"end":{"line":0,"character":49}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0219345092773ms
Sending response {"id": 500, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didClose","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/index.re"}}}
Read message 
{"jsonrpc":"2.0","id":501,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":71,"character":4},"end":{"line":71,"character":4}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0240802764893ms
Sending response {"id": 501, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didClose","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/index.re","languageId":"reason","version":1,"text":"ReactDOMRe.renderToElementWithId(<App />, \"app\");"}}}
Read message 
{"jsonrpc":"2.0","id":502,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/index.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0259876251221ms
Sending response {"id": 502, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":503,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/index.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.542163848877ms
Sending response {"id": 503, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReactDOMRe, React, Condorcet", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":504,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/index.re"},"range":{"start":{"line":0,"character":49},"end":{"line":0,"character":49}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.130891799927ms
Sending response {"id": 504, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":505,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/index.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0391006469727ms
Sending response {"id": 505, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: ReactDOMRe, React, Condorcet", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/index.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/index.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didClose","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/index.re"}}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re","languageId":"reason","version":1,"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll?\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}}}
Read message 
{"jsonrpc":"2.0","id":506,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0131130218506ms
Sending response {"id": 506, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":507,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0238418579102ms
Sending response {"id": 507, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":508,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0159740447998ms
Sending response {"id": 508, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":509,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":74,"character":15},"end":{"line":74,"character":26}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.014066696167ms
Sending response {"id": 509, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":510,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":74,"character":15},"end":{"line":74,"character":26}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 1.85394287109ms
Sending response {"id": 510, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":511,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0379085540771ms
Sending response {"id": 511, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":512,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0581741333008ms
Sending response {"id": 512, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":513,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":74,"character":15},"end":{"line":74,"character":26}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0300407409668ms
Sending response {"id": 513, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":514,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0550746917725ms
Sending response {"id": 514, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":515,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":71,"character":4},"end":{"line":71,"character":4}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 1.7352104187ms
Sending response {"id": 515, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":516,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"position":{"line":67,"character":22}}}
[server] Got a method textDocument/hover
[server] processing took 0.014066696167ms
Sending response {"id": 516, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 67, "character": 18}, "end": {"line": 67, "character": 26}}, "contents": {"kind": "markdown", "value": "string"}}}
Read message 
{"jsonrpc":"2.0","id":517,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":74,"character":28},"end":{"line":74,"character":28}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00905990600586ms
Sending response {"id": 517, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":518,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"position":{"line":74,"character":33}}}
[server] Got a method textDocument/hover
[server] processing took 0.0309944152832ms
Sending response {"id": 518, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":518}}
Read message 
{"jsonrpc":"2.0","id":519,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":74,"character":27},"end":{"line":74,"character":27}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00905990600586ms
Sending response {"id": 519, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re","version":2},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":520,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.00596046447754ms
Sending response {"id": 520, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re","version":2},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = () => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               alert(\"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div key={string_of_int(idx)}>\n      <input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <button onClick={_ => removeChoice(idx)}>\n             {R.s(\"Remove\")}\n           </button>\n         : React.null}\n    </div>;\n  };\n\n  <div>\n    <h2> {R.s(\"Make a Poll\")} </h2>\n    <div>\n      <input\n        onChange={event =>\n          changeQuestion(ReactEvent.Form.target(event)##value)\n        }\n        value={poll.question}\n        placeholder=\"Question...\"\n      />\n    </div>\n    <br />\n    <br />\n    <div>\n      {poll.choices |> List.mapi(renderChoice) |> Array.of_list |> React.array}\n    </div>\n    <br />\n    <br />\n    <div> <button onClick=addChoice> {R.s(\"+\")} </button> </div>\n    <br />\n    <br />\n    <div> <button onClick=savePoll> {R.s(\"Save\")} </button> </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re","version":2}}}
Read message 
{"jsonrpc":"2.0","id":521,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00905990600586ms
➡️ running compiler /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/assets/lib/bs' -I '/Users/mike/Code/condorcet/assets/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/assets/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w -30-40+6+7+27+32..39+44+45+101 -bs-re-out -impl /Users/mike/Code/condorcet/assets/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/assets
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/assets/src/NewPoll.re
Sending response {"id": 521, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
>> Build system running: /Users/mike/Code/condorcet/assets/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/5] [34mBuilding[39m [2msrc/NewPoll.reast[22m
[2/5] [34mBuilding[39m [2msrc/NewPoll.d[22m
[3/5] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/assets/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/assets/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":522,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"},"range":{"start":{"line":74,"character":26},"end":{"line":74,"character":26}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00977516174316ms
Sending response {"id": 522, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":523,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0228881835938ms
Sending response {"id": 523, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didClose","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/assets/src/NewPoll.re"}}}
