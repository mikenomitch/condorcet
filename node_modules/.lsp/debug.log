Hello - from /Users/mike/.vscode/extensions/jaredly.reason-vscode-1.7.8/bin.native
Previous log location: /var/folders/bq/171rtm851494s4q_zmskhm580000gp/T/lsp.log
Sending notification {"jsonrpc": "2.0", "method": "client/registerCapability", "params": {"registrations": [{"id": "watching", "method": "workspace/didChangeWatchedFiles", "registerOptions": {"watchers": [{"globPattern": "**/bsconfig.json"}, {"globPattern": "**/.merlin"}]}}]}}
Sending response {"id": 0, "jsonrpc": "2.0", "result": {"capabilities": {"textDocumentSync": 1, "hoverProvider": true, "completionProvider": {"resolveProvider": true, "triggerCharacters": ["."]}, "signatureHelpProvider": {"triggerCharacters": ["("]}, "definitionProvider": true, "typeDefinitionProvider": true, "referencesProvider": true, "documentSymbolProvider": true, "codeActionProvider": true, "executeCommandProvider": {"commands": ["reason-language-server.add_to_interface_inner"]}, "codeLensProvider": {"resolveProvider": true}, "documentHighlightProvider": true, "documentRangeFormattingProvider": true, "documentFormattingProvider": true, "renameProvider": true}}}
Read message 
{"jsonrpc":"2.0","method":"initialized","params":{}}
Read message 
{"jsonrpc":"2.0","method":"workspace/didChangeConfiguration","params":{"settings":{"reason_language_server":{"location":"","build_system_override_by_root":{},"refmt":"","lispRefmt":"","mlfmt":"","format_width":80,"per_value_codelens":false,"dependencies_codelens":true,"opens_codelens":true,"show_module_path_on_hover":true,"reloadOnChange":false,"show_debug_errors":false,"autoRebuild":true}}}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","languageId":"reason","version":1,"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}}}
📣 📣 NEW BSB PACKAGE 📣 📣
- location: /Users/mike/Code/condorcet/ui
- bsPlatform: /Users/mike/Code/condorcet/ui/node_modules/bs-platform
- buildSystem: bsb version 7.1.0
- build command: /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsb.exe -make-world
>> Build system running: /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/bsconfig.json", "diagnostics": []}}
Deps bs-log, re-dnd, rationale, reason-react, bs-webapi, bs-fetch, @glennsl/bs-json
Dep loc /Users/mike/Code/condorcet/ui/node_modules/bs-log/bsconfig.json
Compiled base: /Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs
Source directories: /Users/mike/Code/condorcet/ui/node_modules/bs-log/src
Source files found: /Users/mike/Code/condorcet/ui/node_modules/bs-log/src/BrowserLogger.re : /Users/mike/Code/condorcet/ui/node_modules/bs-log/src/NodeLogger.re
Dep loc /Users/mike/Code/condorcet/ui/node_modules/re-dnd/bsconfig.json
Compiled base: /Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs
Source directories: /Users/mike/Code/condorcet/ui/node_modules/re-dnd/src
Source files found: /Users/mike/Code/condorcet/ui/node_modules/re-dnd/src/Dnd__Events.re : /Users/mike/Code/condorcet/ui/node_modules/re-dnd/src/Dnd__Style.re : /Users/mike/Code/condorcet/ui/node_modules/re-dnd/src/Dnd__Scroller.re : /Users/mike/Code/condorcet/ui/node_modules/re-dnd/src/Dnd__Types.re : /Users/mike/Code/condorcet/ui/node_modules/re-dnd/src/Dnd__Config.re : /Users/mike/Code/condorcet/ui/node_modules/re-dnd/src/Dnd__SelectionManager.re : /Users/mike/Code/condorcet/ui/node_modules/re-dnd/src/Dnd__ReactContext.re : /Users/mike/Code/condorcet/ui/node_modules/re-dnd/src/Dnd__Web.re : /Users/mike/Code/condorcet/ui/node_modules/re-dnd/src/Dnd__DndContext.re : /Users/mike/Code/condorcet/ui/node_modules/re-dnd/src/Dnd.re : /Users/mike/Code/condorcet/ui/node_modules/re-dnd/src/Dnd__Scrollable.re : /Users/mike/Code/condorcet/ui/node_modules/re-dnd/src/Dnd__Geometry.re : /Users/mike/Code/condorcet/ui/node_modules/re-dnd/src/Dnd__DraggableItem.re : /Users/mike/Code/condorcet/ui/node_modules/re-dnd/src/Dnd__DroppableContainer.re : /Users/mike/Code/condorcet/ui/node_modules/re-dnd/src/Dnd__DndManager.re : /Users/mike/Code/condorcet/ui/node_modules/re-dnd/src/Dnd__ReactHooks.re
Dep loc /Users/mike/Code/condorcet/ui/node_modules/rationale/bsconfig.json
Compiled base: /Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs
Source directories: /Users/mike/Code/condorcet/ui/node_modules/rationale/src
Source files found: /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Identity.re : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/KIO.re : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Function.re : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Monoid.re : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Option.rei : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Dict.re : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/RList.rei : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Writer.re : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Reader.re : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Result.re : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/RArray.re : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Monad.re : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Alt.re : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Alternative.re : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Logic.re : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Util.re : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/IO.re : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/RList.re : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Plus.re : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Dict.rei : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Option.re : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/RArray.rei : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Applicative.re : /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Lens.re
Adding intf /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Option.rei
Adding intf /Users/mike/Code/condorcet/ui/node_modules/rationale/src/RList.rei
Adding intf /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Dict.rei
Adding intf /Users/mike/Code/condorcet/ui/node_modules/rationale/src/RArray.rei
Bad source file (extension) /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Option.rei
Bad source file (extension) /Users/mike/Code/condorcet/ui/node_modules/rationale/src/RList.rei
Bad source file (extension) /Users/mike/Code/condorcet/ui/node_modules/rationale/src/Dict.rei
Bad source file (extension) /Users/mike/Code/condorcet/ui/node_modules/rationale/src/RArray.rei
adding namespace Rationale : Rationale : /Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/Rationale.cmt
Dep loc /Users/mike/Code/condorcet/ui/node_modules/reason-react/bsconfig.json
Compiled base: /Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs
Source directories: /Users/mike/Code/condorcet/ui/node_modules/reason-react/src
Source files found: /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReasonReactRouter.rei : /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReasonReactCompat.re : /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReactDOMRe.re : /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReactEvent.re : /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReactEventRe.rei : /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReasonReact.re : /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReasonReactOptimizedCreateClass.re : /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReactDOMServerRe.re : /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReasonReactCompat.rei : /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReactEventRe.re : /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReactEvent.rei : /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReasonReact.rei : /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReasonReactRouter.re : /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/React.re
Adding intf /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReasonReactRouter.rei
Adding intf /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReactEventRe.rei
Adding intf /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReasonReactCompat.rei
Adding intf /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReactEvent.rei
Adding intf /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReasonReact.rei
Bad source file (extension) /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReasonReactRouter.rei
Bad source file (extension) /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReactEventRe.rei
Bad source file (extension) /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReasonReactCompat.rei
Bad source file (extension) /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReactEvent.rei
Bad source file (extension) /Users/mike/Code/condorcet/ui/node_modules/reason-react/src/ReasonReact.rei
Dep loc /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/bsconfig.json
Compiled base: /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs
Source directories: /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src - /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi - /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom - /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Canvas
Source files found: /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Url.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Canvas.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Node.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ShadowRoot.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__NodeIterator.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__KeyboardEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__TransitionEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__TouchEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__InputEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__RelatedEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Attr.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__CustomEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__History.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__PageTransitionEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Selection.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__BeforeUnloadEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__HtmlFormElement.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__NamedNodeMap.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__WebGlContextEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ParentNode.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__HtmlCollection.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__MutationRecord.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DomStringMap.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__WheelEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DomRect.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__IdbVersionChangeEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__FocusEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__MutationObserver.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DocumentType.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ChildNode.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__GlobalEventHandlers.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Text.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__CdataSection.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Image.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DomTokenList.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__MouseEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__StorageEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__CssStyleDeclaration.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__TimeEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Event.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__EventTarget.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DomImplementation.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Slotable.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ProgressEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ClipboardEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ProcessingInstruction.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DocumentFragment.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Element.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__AnimationEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__NonElementParentNode.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__UiEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__HtmlDocument.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__PopStateEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ErrorEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__SvgZoomEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DragEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__NodeFilter.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__PointerEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__CompositionEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Range.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__CharacterData.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__TreeWalker.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Location.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Window.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__HtmlImageElement.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__DocumentOrShadowRoot.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__CloseEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__TrackEvent.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__NodeList.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__HtmlInputElement.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__ValidityState.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Types.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Document.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__HtmlElement.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__NonDocumentTypeChildNode.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Dom/Webapi__Dom__Comment.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__File.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Canvas/Webapi__Canvas__WebGl.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Canvas/Webapi__Canvas__Canvas2d.re : /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/src/Webapi/Webapi__Base64.re
Dep loc /Users/mike/Code/condorcet/ui/node_modules/bs-fetch/bsconfig.json
Compiled base: /Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs
Source directories: /Users/mike/Code/condorcet/ui/node_modules/bs-fetch/src
Source files found: /Users/mike/Code/condorcet/ui/node_modules/bs-fetch/src/bs_fetch.ml : /Users/mike/Code/condorcet/ui/node_modules/bs-fetch/src/Fetch.mli : /Users/mike/Code/condorcet/ui/node_modules/bs-fetch/src/Fetch.ml
Adding intf /Users/mike/Code/condorcet/ui/node_modules/bs-fetch/src/Fetch.mli
Bad source file (extension) /Users/mike/Code/condorcet/ui/node_modules/bs-fetch/src/Fetch.mli
Dep loc /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/bsconfig.json
Compiled base: /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs
Source directories: /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/src
Source files found: /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/src/Json_decode.ml : /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/src/Json.mli : /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/src/Json.ml : /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/src/Json_decode.mli : /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/src/Json_encode.ml : /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/src/Json_encode.mli
Adding intf /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/src/Json.mli
Adding intf /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/src/Json_decode.mli
Adding intf /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/src/Json_encode.mli
Bad source file (extension) /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/src/Json.mli
Bad source file (extension) /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/src/Json_decode.mli
Bad source file (extension) /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/src/Json_encode.mli
Got source directories ./src - ./src/ui - ./src/imports - ./src/styles - ./src/lib
Source directories: /Users/mike/Code/condorcet/ui/src - /Users/mike/Code/condorcet/ui/src/ui - /Users/mike/Code/condorcet/ui/src/imports - /Users/mike/Code/condorcet/ui/src/styles - /Users/mike/Code/condorcet/ui/src/lib
Source files found: /Users/mike/Code/condorcet/ui/src/ui/Input.re : /Users/mike/Code/condorcet/ui/src/ui/CopyableLink.re : /Users/mike/Code/condorcet/ui/src/ui/Link.re : /Users/mike/Code/condorcet/ui/src/EditResults.re : /Users/mike/Code/condorcet/ui/src/ManagePoll.re : /Users/mike/Code/condorcet/ui/src/Notifications.re : /Users/mike/Code/condorcet/ui/src/TakePoll.re : /Users/mike/Code/condorcet/ui/src/App.re : /Users/mike/Code/condorcet/ui/src/EditResultsPage.re : /Users/mike/Code/condorcet/ui/src/PollResultsPage.re : /Users/mike/Code/condorcet/ui/src/Layout.re : /Users/mike/Code/condorcet/ui/src/TakePollPage.re : /Users/mike/Code/condorcet/ui/src/NewPoll.re : /Users/mike/Code/condorcet/ui/src/lib/Data.re : /Users/mike/Code/condorcet/ui/src/lib/ArrayExt.re : /Users/mike/Code/condorcet/ui/src/lib/Api.re : /Users/mike/Code/condorcet/ui/src/lib/CopyToClipboard.re : /Users/mike/Code/condorcet/ui/src/lib/Constants.re : /Users/mike/Code/condorcet/ui/src/lib/Ordinal.re : /Users/mike/Code/condorcet/ui/src/lib/R.re : /Users/mike/Code/condorcet/ui/src/NotFound.re : /Users/mike/Code/condorcet/ui/src/PollResults.re : /Users/mike/Code/condorcet/ui/src/Home.re : /Users/mike/Code/condorcet/ui/src/ManagePollPage.re : /Users/mike/Code/condorcet/ui/src/index.re : /Users/mike/Code/condorcet/ui/src/Why.re
adding namespace Condorcet : Condorcet : /Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt
-- All local modules found: 27
Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt
Input-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/ui/Input-Condorcet.cmt
CopyableLink-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/ui/CopyableLink-Condorcet.cmt
Link-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/ui/Link-Condorcet.cmt
EditResults-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/EditResults-Condorcet.cmt
ManagePoll-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/ManagePoll-Condorcet.cmt
Notifications-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/Notifications-Condorcet.cmt
TakePoll-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/TakePoll-Condorcet.cmt
App-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/App-Condorcet.cmt
EditResultsPage-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/EditResultsPage-Condorcet.cmt
PollResultsPage-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/PollResultsPage-Condorcet.cmt
Layout-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/Layout-Condorcet.cmt
TakePollPage-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/TakePollPage-Condorcet.cmt
NewPoll-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/NewPoll-Condorcet.cmt
Data-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/lib/Data-Condorcet.cmt
ArrayExt-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/lib/ArrayExt-Condorcet.cmt
Api-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/lib/Api-Condorcet.cmt
CopyToClipboard-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/lib/CopyToClipboard-Condorcet.cmt
Constants-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/lib/Constants-Condorcet.cmt
Ordinal-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/lib/Ordinal-Condorcet.cmt
R-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/lib/R-Condorcet.cmt
NotFound-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/NotFound-Condorcet.cmt
PollResults-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/PollResults-Condorcet.cmt
Home-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/Home-Condorcet.cmt
ManagePollPage-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/ManagePollPage-Condorcet.cmt
Index-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/index-Condorcet.cmt
Why-Condorcet
impl /Users/mike/Code/condorcet/ui/lib/bs/src/Why-Condorcet.cmt
############ Namespaced as Condorcet at /Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt
Dependency dirs /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml /Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src /Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src /Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs /Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src /Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom /Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas /Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src
Read message 
{"jsonrpc":"2.0","id":1,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":19,"character":42},"end":{"line":19,"character":42}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00786781311035ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending response {"id": 1, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":2,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.018835067749ms
Sending response {"id": 2, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":3,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0288486480713ms
Sending response {"id": 3, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":4,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":28,"character":4},"end":{"line":28,"character":4}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0131130218506ms
Sending response {"id": 4, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":1}}
Read message 
{"jsonrpc":"2.0","id":5,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":26,"character":9}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0178813934326ms
[ref] Got a loc for pos
Sending response {"id": 5, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 97, "character": 43}, "end": {"line": 97, "character": 52}}, "kind": 2}, {"range": {"start": {"line": 26, "character": 6}, "end": {"line": 26, "character": 15}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":6,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":30,"character":11}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0660419464111ms
[ref] Got a loc for pos
Sending response {"id": 6, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 68, "character": 58}, "end": {"line": 68, "character": 70}}, "kind": 2}, {"range": {"start": {"line": 30, "character": 6}, "end": {"line": 30, "character": 18}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":7,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":30,"character":6},"end":{"line":30,"character":18}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0119209289551ms
Sending response {"id": 7, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":8,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":21,"character":12}}}
[server] Got a method textDocument/hover
[server] processing took 0.0159740447998ms
[ref] Trying for declared Value 1046 in file file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending response {"id": 8, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 21, "character": 4}, "end": {"line": 21, "character": 14}}, "contents": {"kind": "markdown", "value": "```\narray(string)\n```\n\n<root>/ui/src/NewPoll.re"}}}
Read message 
{"jsonrpc":"2.0","id":9,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":19,"character":12}}}
[server] Got a method textDocument/hover
[server] processing took 0.0169277191162ms
[ref] Trying for declared Value 1043 in file file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending response {"id": 9, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 19, "character": 6}, "end": {"line": 19, "character": 18}}, "contents": {"kind": "markdown", "value": "```\n(string, int) => unit\n```\n\n<root>/ui/src/NewPoll.re"}}}
Read message 
{"jsonrpc":"2.0","id":10,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":99,"character":21}}}
[server] Got a method textDocument/hover
[server] processing took 0.0169277191162ms
Sending response {"id": 10, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 99, "character": 15}, "end": {"line": 99, "character": 28}}, "contents": {"kind": "markdown", "value": "string"}}}
Read message 
{"jsonrpc":"2.0","id":11,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":97,"character":46}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0128746032715ms
[ref] Got a loc for pos
Sending response {"id": 11, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 97, "character": 43}, "end": {"line": 97, "character": 52}}, "kind": 2}, {"range": {"start": {"line": 26, "character": 6}, "end": {"line": 26, "character": 15}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":12,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":97,"character":43},"end":{"line":97,"character":52}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0388622283936ms
Sending response {"id": 12, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":13,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":104,"character":59}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0100135803223ms
[ref] Got a loc for pos
Sending response {"id": 13, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 104, "character": 53}, "end": {"line": 104, "character": 61}}, "kind": 2}, {"range": {"start": {"line": 35, "character": 6}, "end": {"line": 35, "character": 14}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":14,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":104,"character":53},"end":{"line":104,"character":61}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0131130218506ms
Sending response {"id": 14, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":15,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":104,"character":58}}}
[server] Got a method textDocument/hover
[server] processing took 0.014066696167ms
[ref] Trying for declared Value 1130 in file file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending response {"id": 15, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 104, "character": 53}, "end": {"line": 104, "character": 61}}, "contents": {"kind": "markdown", "value": "```\n'a => unit\n```\n\n<root>/ui/src/NewPoll.re"}}}
Read message 
{"jsonrpc":"2.0","id":16,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":104,"character":53},"end":{"line":104,"character":61}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0369548797607ms
Sending response {"id": 16, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":17,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":37,"character":26}}}
[server] Got a method textDocument/hover
[server] processing took 0.0159740447998ms
Sending response {"id": 17, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":18,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":39,"character":25}}}
[server] Got a method textDocument/hover
[server] processing took 0.00810623168945ms
Sending response {"id": 18, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":19,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":52,"character":5},"end":{"line":52,"character":5}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0131130218506ms
Sending response {"id": 19, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":20,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":40,"character":26}}}
[server] Got a method textDocument/hover
[server] processing took 0.0159740447998ms
[ref] Getting global Js
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.cmi, /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml)
FINDING /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.cmi src /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.cmt, /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml)
FINDING /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.cmt src /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml
[ref] Getting for 1005 in resolve
[ref] Trying for declared Value 1005 in file file:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml
[ref] Yes!! got it
Sending response {"id": 20, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 40, "character": 21}, "end": {"line": 40, "character": 28}}, "contents": {"kind": "markdown", "value": "```\n'a => Js.Promise.t('a)\n```\n\n<root>/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml"}}}
Read message 
{"jsonrpc":"2.0","id":21,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":40,"character":22}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0109672546387ms
[ref] Got a loc for pos
Sending response {"id": 21, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 48, "character": 15}, "end": {"line": 48, "character": 22}}, "kind": 2}, {"range": {"start": {"line": 45, "character": 18}, "end": {"line": 45, "character": 25}}, "kind": 2}, {"range": {"start": {"line": 40, "character": 21}, "end": {"line": 40, "character": 28}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":22,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":40,"character":21},"end":{"line":40,"character":28}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0109672546387ms
Sending response {"id": 22, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":23,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":40,"character":22}}}
[server] Got a method textDocument/hover
[server] processing took 0.0128746032715ms
[ref] Getting global Js
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.cmi, /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml)
FINDING /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.cmi src /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.cmt, /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml)
FINDING /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.cmt src /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml
[ref] Getting for 1005 in resolve
[ref] Trying for declared Value 1005 in file file:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml
[ref] Yes!! got it
Sending response {"id": 23, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 40, "character": 21}, "end": {"line": 40, "character": 28}}, "contents": {"kind": "markdown", "value": "```\n'a => Js.Promise.t('a)\n```\n\n<root>/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml"}}}
Read message 
{"jsonrpc":"2.0","id":24,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":47,"character":18}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0109672546387ms
[ref] Got a loc for pos
Sending response {"id": 24, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 47, "character": 15}, "end": {"line": 47, "character": 21}}, "kind": 2}, {"range": {"start": {"line": 37, "character": 27}, "end": {"line": 37, "character": 33}}, "kind": 2}, {"range": {"start": {"line": 5, "character": 13}, "end": {"line": 5, "character": 19}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":25,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":47,"character":15},"end":{"line":47,"character":21}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0109672546387ms
Sending response {"id": 25, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":26,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":46,"character":18},"end":{"line":46,"character":18}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0441074371338ms
Sending response {"id": 26, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":27,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":46,"character":18}}}
[server] Got a method textDocument/hover
[server] processing took 0.0159740447998ms
Sending response {"id": 27, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":28,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":40,"character":27}}}
[server] Got a method textDocument/hover
[server] processing took 0.0169277191162ms
[ref] Getting global Js
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.cmi, /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml)
FINDING /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.cmi src /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.cmt, /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml)
FINDING /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.cmt src /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml
[ref] Getting for 1005 in resolve
[ref] Trying for declared Value 1005 in file file:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml
[ref] Yes!! got it
Sending response {"id": 28, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 40, "character": 21}, "end": {"line": 40, "character": 28}}, "contents": {"kind": "markdown", "value": "```\n'a => Js.Promise.t('a)\n```\n\n<root>/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml"}}}
Read message 
{"jsonrpc":"2.0","id":29,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":40,"character":28}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0278949737549ms
[ref] Got a loc for pos
Sending response {"id": 29, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":30,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":40,"character":21},"end":{"line":40,"character":28}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0162124633789ms
Sending response {"id": 30, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":31,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":49,"character":14},"end":{"line":49,"character":14}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0431537628174ms
Sending response {"id": 31, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":32,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":47,"character":15},"end":{"line":47,"character":70}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0500679016113ms
Sending response {"id": 32, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":33,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":38,"character":23},"end":{"line":38,"character":23}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0300407409668ms
Sending response {"id": 33, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":34,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":39,"character":23},"end":{"line":39,"character":23}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0360012054443ms
Sending response {"id": 34, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":35,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":40,"character":23}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0410079956055ms
[ref] Got a loc for pos
Sending response {"id": 35, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 48, "character": 15}, "end": {"line": 48, "character": 22}}, "kind": 2}, {"range": {"start": {"line": 45, "character": 18}, "end": {"line": 45, "character": 25}}, "kind": 2}, {"range": {"start": {"line": 40, "character": 21}, "end": {"line": 40, "character": 28}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":36,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":40,"character":23},"end":{"line":40,"character":23}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0147819519043ms
Sending response {"id": 36, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":37,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":40,"character":21},"end":{"line":40,"character":21}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0219345092773ms
Sending response {"id": 37, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":2},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":38,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0348091125488ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending response {"id": 38, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":39,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":40,"character":20},"end":{"line":40,"character":20}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00691413879395ms
Sending response {"id": 39, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":40,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0259876251221ms
Sending response {"id": 40, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":3},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n           resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":41,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0298023223877ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending response {"id": 41, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":42,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":41,"character":11},"end":{"line":41,"character":11}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00810623168945ms
Sending response {"id": 42, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":43,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0169277191162ms
Sending response {"id": 43, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":44,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":40,"character":11},"end":{"line":40,"character":11}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0221729278564ms
Sending response {"id": 44, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":45,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":41,"character":11}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0269412994385ms
[ref] Got a loc for pos
Sending response {"id": 45, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 49, "character": 15}, "end": {"line": 49, "character": 22}}, "kind": 2}, {"range": {"start": {"line": 46, "character": 18}, "end": {"line": 46, "character": 25}}, "kind": 2}, {"range": {"start": {"line": 41, "character": 11}, "end": {"line": 41, "character": 18}}, "kind": 2}]}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":4},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n            resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":46,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0109672546387ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending response {"id": 46, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":47,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00905990600586ms
Sending response {"id": 47, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":5},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n           \n            resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":48,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0219345092773ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending response {"id": 48, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":49,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00786781311035ms
Sending response {"id": 49, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":6},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n           notify(\"error\", \"There was an issue making this poll\");\n            resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":50,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0181198120117ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending response {"id": 50, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":51,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":41,"character":66},"end":{"line":41,"character":66}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00905990600586ms
Sending response {"id": 51, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":52,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0259876251221ms
Sending response {"id": 52, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":53,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":41,"character":11}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0288486480713ms
[ref] Got a loc for pos
Sending response {"id": 53, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 49, "character": 15}, "end": {"line": 49, "character": 21}}, "kind": 2}, {"range": {"start": {"line": 41, "character": 11}, "end": {"line": 41, "character": 17}}, "kind": 2}, {"range": {"start": {"line": 37, "character": 27}, "end": {"line": 37, "character": 33}}, "kind": 2}, {"range": {"start": {"line": 5, "character": 13}, "end": {"line": 5, "character": 19}}, "kind": 2}]}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":7},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n            notify(\"error\", \"There was an issue making this poll\");\n            resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":54,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0200271606445ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending response {"id": 54, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":55,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":41,"character":12},"end":{"line":41,"character":12}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0181198120117ms
Sending response {"id": 55, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":56,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0138282775879ms
Sending response {"id": 56, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":57,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0121593475342ms
Sending response {"id": 57, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 113, "character": 0}}, "newText": "[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n             notify(\"error\", \"There was an issue making this poll\");\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":8},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n             notify(\"error\", \"There was an issue making this poll\");\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":8}}}
>> Build system running: /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/5] [34mBuilding[39m [2msrc/NewPoll.reast[22m
[2/5] [34mBuilding[39m [2msrc/NewPoll.d[22m
[3/5] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/PollResults.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/PollResults-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/PollResults.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/PollResults.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/lib/R.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/R-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/lib/R.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/R.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/lib/Ordinal.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Ordinal-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/lib/Ordinal.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/Ordinal.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/lib/Constants.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Constants-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/lib/Constants.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/Constants.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/lib/ArrayExt.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/ArrayExt-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/lib/ArrayExt.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/ArrayExt.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/TakePollPage.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/TakePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/TakePollPage.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/TakePollPage.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/ManagePollPage.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/ManagePollPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/ManagePollPage.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/ManagePollPage.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/ui/CopyableLink.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/CopyableLink-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/ui/CopyableLink.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/ui/CopyableLink.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/Api.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/App.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/App-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/App.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/App.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/ManagePoll.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/ManagePoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/ManagePoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/ManagePoll.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/index.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Index-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/index.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/index.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/lib/CopyToClipboard.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/CopyToClipboard-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/lib/CopyToClipboard.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/CopyToClipboard.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/Why.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Why-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/Why.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/Why.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/Notifications.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Notifications-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/Notifications.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/Notifications.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/NewPoll.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/TakePoll.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/TakePoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Dnd.MakeSingletonContainer
Ident!! Dnd.Make
Ident!! Item
Ident!! Container
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/TakePoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/TakePoll.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/Home.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Home-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/Home.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/Home.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/ui/Link.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Link-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/ui/Link.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/ui/Link.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/NotFound.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NotFound-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NotFound.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/NotFound.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/ui/Input.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Input-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/ui/Input.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/ui/Input.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/EditResults.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/EditResults-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/EditResults.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/EditResults.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/lib/Data.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Data-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/lib/Data.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/Data.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/PollResultsPage.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/PollResultsPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/PollResultsPage.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/PollResultsPage.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/EditResultsPage.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/EditResultsPage-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/EditResultsPage.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/EditResultsPage.re", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/Layout.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Layout-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/Layout.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/Layout.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":58,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00691413879395ms
Sending response {"id": 58, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":59,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":41,"character":13},"end":{"line":41,"character":13}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0228881835938ms
Sending response {"id": 59, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":60,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0181198120117ms
Sending response {"id": 60, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":61,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":39,"character":25},"end":{"line":39,"character":25}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0209808349609ms
Sending response {"id": 61, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":59}}
Read message 
{"jsonrpc":"2.0","id":62,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":39,"character":20}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0150203704834ms
[ref] Got a loc for pos
Sending response {"id": 62, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 39, "character": 19}, "end": {"line": 39, "character": 22}}, "kind": 2}, {"range": {"start": {"line": 38, "character": 15}, "end": {"line": 38, "character": 18}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":63,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":39,"character":19},"end":{"line":39,"character":22}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.014066696167ms
Sending response {"id": 63, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":64,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":40,"character":20},"end":{"line":40,"character":20}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0278949737549ms
Sending response {"id": 64, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":9},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n           \n             notify(\"error\", \"There was an issue making this poll\");\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":65,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0209808349609ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending response {"id": 65, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":66,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00905990600586ms
Sending response {"id": 66, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":10},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n            \n             notify(\"error\", \"There was an issue making this poll\");\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":67,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0131130218506ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending response {"id": 67, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":68,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00905990600586ms
Sending response {"id": 68, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":11},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n            K\n             notify(\"error\", \"There was an issue making this poll\");\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":69,"method":"textDocument/completion","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":41,"character":13},"context":{"triggerKind":1}}}
[server] Got a method textDocument/completion
[server] processing took 0.0119209289551ms
Opens folkz > 1 Js.Promise
Package opens Pervasives Condorcet Condorcet
Package opens Pervasives Condorcet Condorcet
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/pervasives.cmti, /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/pervasives.mli)
FINDING /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/pervasives.cmti src /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/pervasives.mli
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt src 
resolving open Js.Promise.place holder
Not local
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.cmi, /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml)
FINDING /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.cmi src /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.cmt, /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml)
FINDING /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.cmt src /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml
Opens nows 4 file:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/pervasives.mli file:///Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt file:///Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt file:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml
---------------- LOCAL VAL
 - Completing in file:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/pervasives.mli
 - Completing in file:///Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt
 - Completing in file:///Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt
 - Completing in file:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml
Sending response {"id": 69, "jsonrpc": "2.0", "result": []}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":12},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n            Ks\n             notify(\"error\", \"There was an issue making this poll\");\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":70,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0219345092773ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Now loading /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.cmt
Size 19379
Ident!! Rationale.RList
Sending response {"id": 70, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":71,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":41,"character":14},"end":{"line":41,"character":14}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0100135803223ms
Sending response {"id": 71, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":72,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0178813934326ms
Sending response {"id": 72, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":14},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n            \n             notify(\"error\", \"There was an issue making this poll\");\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":73,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0231266021729ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending response {"id": 73, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":74,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00882148742676ms
Sending response {"id": 74, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":15},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n              \n             notify(\"error\", \"There was an issue making this poll\");\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":75,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0128746032715ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending response {"id": 75, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":76,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00715255737305ms
Sending response {"id": 76, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":16},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n            \n             notify(\"error\", \"There was an issue making this poll\");\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":77,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.014066696167ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending response {"id": 77, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":78,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00715255737305ms
Sending response {"id": 78, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":17},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n            J\n             notify(\"error\", \"There was an issue making this poll\");\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":79,"method":"textDocument/completion","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":41,"character":13},"context":{"triggerKind":1}}}
[server] Got a method textDocument/completion
[server] processing took 0.00905990600586ms
Opens folkz > 1 Js.Promise
Package opens Pervasives Condorcet Condorcet
Package opens Pervasives Condorcet Condorcet
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/pervasives.cmti, /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/pervasives.mli)
FINDING /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/pervasives.cmti src /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/pervasives.mli
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt src 
resolving open Js.Promise.place holder
Not local
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.cmi, /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml)
FINDING /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.cmi src /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.cmt, /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml)
FINDING /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.cmt src /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml
Opens nows 4 file:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/pervasives.mli file:///Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt file:///Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt file:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml
---------------- LOCAL VAL
 - Completing in file:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/pervasives.mli
 - Completing in file:///Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt
 - Completing in file:///Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt
 - Completing in file:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml
Sending response {"id": 79, "jsonrpc": "2.0", "result": [{"label": "Json_decode", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Json", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Json_encode", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_math", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_string", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_date", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_console", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_null_undefined", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_string2", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_types", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_json", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_mapperRt", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_list", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_int", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_result", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_null", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_float", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_typed_array2", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_array", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_re", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_promise", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_vector", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_cast", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_obj", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_typed_array", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_global", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_exn", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_undefined", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_option", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_dict", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}, {"label": "Js_array2", "kind": 9, "detail": "file module", "documentation": "No docs\n\nwait for uri:0"}]}
Read message 
{"jsonrpc":"2.0","id":80,"method":"completionItem/resolve","params":{"label":"Js","detail":"file module","documentation":"No docs\n\nwait for uri:0","insertTextFormat":1,"kind":9}}
[server] Got a method completionItem/resolve
[server] processing took 0.0200271606445ms
Sending response {"id": 80, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":19},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n            Js.\n             notify(\"error\", \"There was an issue making this poll\");\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":81,"method":"textDocument/completion","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":41,"character":15},"context":{"triggerKind":2,"triggerCharacter":"."}}}
[server] Got a method textDocument/completion
[server] processing took 0.0109672546387ms
Opens folkz > 1 Js.Promise
Package opens Pervasives Condorcet Condorcet
Package opens Pervasives Condorcet Condorcet
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/pervasives.cmti, /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/pervasives.mli)
FINDING /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/pervasives.cmti src /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/pervasives.mli
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt src 
resolving open Js.Promise.place holder
Not local
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.cmi, /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml)
FINDING /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.cmi src /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.cmt, /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml)
FINDING /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.cmt src /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml
Opens nows 4 file:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/pervasives.mli file:///Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt file:///Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt file:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml
Completing for Js<.>
normal Js.
Looking for env in file:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/pervasives.mli
Looking for env in file:///Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt
Looking for env in file:///Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt
Looking for env in file:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js_promise.ml
Getting module Js
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.cmi, /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml)
FINDING /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.cmi src /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml
got it
Got the env
 - Completing in file:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml
 -- not capitalized
Sending response {"id": 81, "jsonrpc": "2.0", "result": [{"label": "Date", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Re", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Vector", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Math", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Promise", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Array", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Null", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Int", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Option", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Nullable", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Json", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "String", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Array2", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Null_undefined", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "MapperRt", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Obj", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Undefined", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Float", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Types", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Console", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "List", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Result", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "TypedArray2", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Global", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Exn", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Typed_array", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Dict", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "Internal", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "String2", "kind": 9, "detail": "module", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "eqNullable", "kind": 12, "detail": "('a, nullable('a)) => bool", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "undefinedToOption", "kind": 12, "detail": "undefined('a) => option('a)", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "unsafe_gt", "kind": 12, "detail": "('a, 'a) => bool", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "eqNull", "kind": 12, "detail": "('a, null('a)) => bool", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "unsafe_ge", "kind": 12, "detail": "('a, 'a) => bool", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "log3", "kind": 12, "detail": "('a, 'b, 'c) => unit", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "log", "kind": 12, "detail": "'a => unit", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "unsafe_lt", "kind": 12, "detail": "('a, 'a) => bool", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "log4", "kind": 12, "detail": "('a, 'b, 'c, 'd) => unit", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "testAny", "kind": 12, "detail": "'a => bool", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "unsafe_le", "kind": 12, "detail": "('a, 'a) => bool", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "eqUndefined", "kind": 12, "detail": "('a, undefined('a)) => bool", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "toOption", "kind": 12, "detail": "nullable('a) => option('a)", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "logMany", "kind": 12, "detail": "array('a) => unit", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "log2", "kind": 12, "detail": "('a, 'b) => unit", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "isNullable", "kind": 12, "detail": "nullable('a) => bool", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "test", "kind": 12, "detail": "nullable('a) => bool", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "null", "kind": 12, "detail": "null('a)", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "typeof", "kind": 12, "detail": "'a => string", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "undefined", "kind": 12, "detail": "undefined('a)", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "nullToOption", "kind": 12, "detail": "null('a) => option('a)", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "promise", "kind": 22, "detail": "type promise('a, 'e)", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "null_undefined", "kind": 22, "detail": "type null_undefined('a) = nullable('a)", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "nullable", "kind": 22, "detail": "type nullable('a)", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "t", "kind": 22, "detail": "type t('a)", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "null", "kind": 22, "detail": "type null('a)", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}, {"label": "undefined", "kind": 22, "detail": "type undefined('a)", "documentation": "No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1"}]}
Read message 
{"jsonrpc":"2.0","id":82,"method":"completionItem/resolve","params":{"label":"Array","detail":"module","documentation":"No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1","insertTextFormat":1,"kind":9}}
[server] Got a method completionItem/resolve
[server] processing took 0.0138282775879ms
Sending response {"id": 82, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":20},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n            Js.l\n             notify(\"error\", \"There was an issue making this poll\");\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":83,"method":"completionItem/resolve","params":{"label":"log","detail":"'a => unit","documentation":"No docs\n\nfile:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml:1","insertTextFormat":1,"kind":12}}
[server] Got a method completionItem/resolve
[server] processing took 0.0178813934326ms
Sending response {"id": 83, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":22},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n            Js.log\n             notify(\"error\", \"There was an issue making this poll\");\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":23},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n            Js.log()\n             notify(\"error\", \"There was an issue making this poll\");\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":84,"method":"textDocument/signatureHelp","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":41,"character":19}}}
[server] Got a method textDocument/signatureHelp
[server] processing took 0.0128746032715ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Signature help lident Js.log
[ref] Getting global Js
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.cmi, /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml)
FINDING /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.cmi src /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml
[ref] Getting for 1120 in log
[ref] Trying for declared Value 1120 in file file:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml
[ref] Yes!! got it
Found a type signature
Sending response {"id": 84, "jsonrpc": "2.0", "result": {"activeParameter": 0, "signatures": [{"label": "'a => unit", "documentation": {"kind": "markdown", "value": "```\n'a => unit\n```\n\n<root>/ui/node_modules/bs-platform/lib/ocaml/js.ml"}, "parameters": [{"label": "", "documentation": "'a"}]}]}}
Read message 
{"jsonrpc":"2.0","id":85,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0209808349609ms
Sending response {"id": 85, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":86,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":41,"character":19},"end":{"line":41,"character":19}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0121593475342ms
Sending response {"id": 86, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":87,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0288486480713ms
Sending response {"id": 87, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":86}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":24},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n            Js.log(res)\n             notify(\"error\", \"There was an issue making this poll\");\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":88,"method":"textDocument/signatureHelp","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":41,"character":22}}}
[server] Got a method textDocument/signatureHelp
[server] processing took 0.0131130218506ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Signature help lident Js.log
[ref] Getting global Js
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.cmi, /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml)
FINDING /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.cmi src /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml
[ref] Getting for 1120 in log
[ref] Trying for declared Value 1120 in file file:///Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml/js.ml
[ref] Yes!! got it
Found a type signature
Sending response {"id": 88, "jsonrpc": "2.0", "result": {"activeParameter": 0, "signatures": [{"label": "'a => unit", "documentation": {"kind": "markdown", "value": "```\n'a => unit\n```\n\n<root>/ui/node_modules/bs-platform/lib/ocaml/js.ml"}, "parameters": [{"label": "", "documentation": "'a"}]}]}}
Read message 
{"jsonrpc":"2.0","id":89,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00905990600586ms
Sending response {"id": 89, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":90,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":41,"character":22},"end":{"line":41,"character":22}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0228881835938ms
Sending response {"id": 90, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":91,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0238418579102ms
Sending response {"id": 91, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":92,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":41,"character":12}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0231266021729ms
[ref] Got a loc for pos
Sending response {"id": 92, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":93,"method":"textDocument/signatureHelp","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":41,"character":12}}}
[server] Got a method textDocument/signatureHelp
[server] processing took 0.0228881835938ms
Sending response {"id": 93, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":25},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n              Js.log(res)\n             notify(\"error\", \"There was an issue making this poll\");\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":94,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.014066696167ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending response {"id": 94, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":95,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":41,"character":14},"end":{"line":41,"character":14}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00786781311035ms
Sending response {"id": 95, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":96,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0131130218506ms
Sending response {"id": 96, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":97,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.028133392334ms
Sending response {"id": 97, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 114, "character": 0}}, "newText": "[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n             Js.log(res);\n             notify(\"error\", \"There was an issue making this poll\");\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":26},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n             Js.log(res);\n             notify(\"error\", \"There was an issue making this poll\");\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":26}}}
>> Build system running: /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/5] [34mBuilding[39m [2msrc/NewPoll.reast[22m
[2/5] [34mBuilding[39m [2msrc/NewPoll.d[22m
[3/5] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":98,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00786781311035ms
Sending response {"id": 98, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":99,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":41,"character":13},"end":{"line":41,"character":13}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.028133392334ms
Sending response {"id": 99, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":100,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.032901763916ms
Sending response {"id": 100, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":101,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":38,"character":19}}}
[server] Got a method textDocument/hover
[server] processing took 0.00905990600586ms
Sending response {"id": 101, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":102,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":37,"character":17}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0400543212891ms
[ref] Got a loc for pos
Sending response {"id": 102, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 37, "character": 10}, "end": {"line": 37, "character": 20}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":103,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":37,"character":17},"end":{"line":37,"character":17}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0169277191162ms
Sending response {"id": 103, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":104,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":37,"character":18}}}
[server] Got a method textDocument/definition
[server] processing took 0.0109672546387ms
[ref] Got a loc for pos
[ref] Global defn Condorcet Api.createPoll : Value
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/lib/bs/src/lib/Api-Condorcet.cmt, /Users/mike/Code/condorcet/ui/src/lib/Api.re)
FINDING /Users/mike/Code/condorcet/ui/lib/bs/src/lib/Api-Condorcet.cmt src /Users/mike/Code/condorcet/ui/src/lib/Api.re
[ref] Got stamp 1214
[ref] Inner uri file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending response {"id": 104, "jsonrpc": "2.0", "result": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/Api.re", "range": {"start": {"line": 46, "character": 4}, "end": {"line": 46, "character": 14}}}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","languageId":"reason","version":1,"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet protocol = Constants.protocol;\nlet host = Constants.host;\n\nlet baseUrl = protocol ++ \"://\" ++ host;\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = (poll, addError) => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | PollErrors(errors) =>\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList |> List.map(s => \"Question \" ++ s)\n             | _ => []\n             };\n\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           addError(showErrors);\n           resolve(None);\n         | PollRes(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResponseOrErrors(json) |> resolve)\n  );\n} /* }*/;\n\nlet removeChoice = (manageToken, choice) => {\n  let payload = Data.encodeChoice(choice);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/remove_choice\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResultOrErrors(json) |> resolve)\n  );\n};\n\nlet destroyResponse = (manageToken, responseId) => {\n  let url =\n    baseUrl\n    ++ \"/api/v1/polls/\"\n    ++ manageToken\n    ++ \"/remove_response/\"\n    ++ string_of_int(responseId);\n\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      url,\n      Fetch.RequestInit.make(\n        ~method_=Delete,\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(res => res |> resolve)\n  );\n};"}}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didClose","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
Read message 
{"jsonrpc":"2.0","id":105,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":37,"character":17}}}
[server] Got a method textDocument/definition
[server] processing took 0.0181198120117ms
[ref] Got a loc for pos
[ref] Global defn Condorcet Api.createPoll : Value
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/lib/bs/src/lib/Api-Condorcet.cmt, /Users/mike/Code/condorcet/ui/src/lib/Api.re)
FINDING /Users/mike/Code/condorcet/ui/lib/bs/src/lib/Api-Condorcet.cmt src /Users/mike/Code/condorcet/ui/src/lib/Api.re
[ref] Got stamp 1214
[ref] Inner uri file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending response {"id": 105, "jsonrpc": "2.0", "result": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/Api.re", "range": {"start": {"line": 46, "character": 4}, "end": {"line": 46, "character": 14}}}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","languageId":"reason","version":1,"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet protocol = Constants.protocol;\nlet host = Constants.host;\n\nlet baseUrl = protocol ++ \"://\" ++ host;\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = (poll, addError) => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | PollErrors(errors) =>\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList |> List.map(s => \"Question \" ++ s)\n             | _ => []\n             };\n\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           addError(showErrors);\n           resolve(None);\n         | PollRes(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResponseOrErrors(json) |> resolve)\n  );\n} /* }*/;\n\nlet removeChoice = (manageToken, choice) => {\n  let payload = Data.encodeChoice(choice);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/remove_choice\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResultOrErrors(json) |> resolve)\n  );\n};\n\nlet destroyResponse = (manageToken, responseId) => {\n  let url =\n    baseUrl\n    ++ \"/api/v1/polls/\"\n    ++ manageToken\n    ++ \"/remove_response/\"\n    ++ string_of_int(responseId);\n\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      url,\n      Fetch.RequestInit.make(\n        ~method_=Delete,\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(res => res |> resolve)\n  );\n};"}}}
Read message 
{"jsonrpc":"2.0","id":106,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00905990600586ms
Sending response {"id": 106, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":107,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0100135803223ms
Sending response {"id": 107, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 107, "character": 2}, "end": {"line": 107, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 90, "character": 2}, "end": {"line": 90, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 130, "character": 2}, "end": {"line": 130, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":108,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0300407409668ms
Sending response {"id": 108, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 107, "character": 2}, "end": {"line": 107, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 90, "character": 2}, "end": {"line": 90, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 130, "character": 2}, "end": {"line": 130, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":109,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":46,"character":4},"end":{"line":46,"character":4}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.014066696167ms
Sending response {"id": 109, "jsonrpc": "2.0", "result": [{"title": "Add to interface file", "command": "reason-language-server.add_to_interface_inner", "arguments": ["file:///Users/mike/Code/condorcet/ui/src/lib/Api.re", "let createPoll: (\n  Condorcet.Data.poll,\n  string => 'a\n) => Js.Promise.t(\n  option(Data-Condorcet.poll)\n)"]}]}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":110,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0259876251221ms
Sending response {"id": 110, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":111,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"position":{"line":133,"character":23}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0119209289551ms
[ref] Got a loc for pos
Sending response {"id": 111, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 133, "character": 12}, "end": {"line": 133, "character": 23}}, "kind": 2}, {"range": {"start": {"line": 110, "character": 12}, "end": {"line": 110, "character": 23}}, "kind": 2}, {"range": {"start": {"line": 93, "character": 12}, "end": {"line": 93, "character": 23}}, "kind": 2}, {"range": {"start": {"line": 51, "character": 12}, "end": {"line": 51, "character": 23}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":111}}
Read message 
{"jsonrpc":"2.0","id":112,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0131130218506ms
Sending response {"id": 112, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 107, "character": 2}, "end": {"line": 107, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 90, "character": 2}, "end": {"line": 90, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 130, "character": 2}, "end": {"line": 130, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":113,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0460147857666ms
Sending response {"id": 113, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 107, "character": 2}, "end": {"line": 107, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 90, "character": 2}, "end": {"line": 90, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 130, "character": 2}, "end": {"line": 130, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":114,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":46,"character":4},"end":{"line":46,"character":4}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0419616699219ms
Sending response {"id": 114, "jsonrpc": "2.0", "result": [{"title": "Add to interface file", "command": "reason-language-server.add_to_interface_inner", "arguments": ["file:///Users/mike/Code/condorcet/ui/src/lib/Api.re", "let createPoll: (\n  Condorcet.Data.poll,\n  string => 'a\n) => Js.Promise.t(\n  option(Data-Condorcet.poll)\n)"]}]}
Read message 
{"jsonrpc":"2.0","id":115,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.014066696167ms
Sending response {"id": 115, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":116,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":37,"character":17}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0100135803223ms
[ref] Got a loc for pos
Sending response {"id": 116, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 37, "character": 10}, "end": {"line": 37, "character": 20}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":117,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0190734863281ms
Sending response {"id": 117, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":118,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0171661376953ms
Sending response {"id": 118, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":119,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":37,"character":17},"end":{"line":37,"character":17}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00882148742676ms
Sending response {"id": 119, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":120,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":48,"character":14},"end":{"line":48,"character":14}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0238418579102ms
Sending response {"id": 120, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":121,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"position":{"line":46,"character":9}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0112056732178ms
[ref] Got a loc for pos
Sending response {"id": 121, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 46, "character": 4}, "end": {"line": 46, "character": 14}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":122,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":46,"character":4},"end":{"line":46,"character":14}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.014066696167ms
Sending response {"id": 122, "jsonrpc": "2.0", "result": [{"title": "Add to interface file", "command": "reason-language-server.add_to_interface_inner", "arguments": ["file:///Users/mike/Code/condorcet/ui/src/lib/Api.re", "let createPoll: (\n  Condorcet.Data.poll,\n  string => 'a\n) => Js.Promise.t(\n  option(Data-Condorcet.poll)\n)"]}]}
Read message 
{"jsonrpc":"2.0","id":123,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"position":{"line":48,"character":9}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0219345092773ms
Sending response {"id": 123, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":124,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":48,"character":5},"end":{"line":48,"character":12}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0431537628174ms
Sending response {"id": 124, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":125,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"position":{"line":60,"character":13}}}
[server] Got a method textDocument/hover
[server] processing took 0.0109672546387ms
Sending response {"id": 125, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":126,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"position":{"line":59,"character":11}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0259876251221ms
[ref] Got a loc for pos
Sending response {"id": 126, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 139, "character": 7}, "end": {"line": 139, "character": 12}}, "kind": 2}, {"range": {"start": {"line": 118, "character": 7}, "end": {"line": 118, "character": 12}}, "kind": 2}, {"range": {"start": {"line": 117, "character": 7}, "end": {"line": 117, "character": 12}}, "kind": 2}, {"range": {"start": {"line": 101, "character": 7}, "end": {"line": 101, "character": 12}}, "kind": 2}, {"range": {"start": {"line": 100, "character": 7}, "end": {"line": 100, "character": 12}}, "kind": 2}, {"range": {"start": {"line": 59, "character": 7}, "end": {"line": 59, "character": 12}}, "kind": 2}, {"range": {"start": {"line": 58, "character": 7}, "end": {"line": 58, "character": 12}}, "kind": 2}, {"range": {"start": {"line": 41, "character": 7}, "end": {"line": 41, "character": 12}}, "kind": 2}, {"range": {"start": {"line": 40, "character": 7}, "end": {"line": 40, "character": 12}}, "kind": 2}, {"range": {"start": {"line": 28, "character": 7}, "end": {"line": 28, "character": 12}}, "kind": 2}, {"range": {"start": {"line": 27, "character": 7}, "end": {"line": 27, "character": 12}}, "kind": 2}, {"range": {"start": {"line": 15, "character": 7}, "end": {"line": 15, "character": 12}}, "kind": 2}, {"range": {"start": {"line": 14, "character": 7}, "end": {"line": 14, "character": 12}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":127,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":59,"character":7},"end":{"line":59,"character":12}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0169277191162ms
Sending response {"id": 127, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":128,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"position":{"line":61,"character":14}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0128746032715ms
[ref] Got a loc for pos
Sending response {"id": 128, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 61, "character": 11}, "end": {"line": 61, "character": 21}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":129,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":61,"character":11},"end":{"line":61,"character":21}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0190734863281ms
Sending response {"id": 129, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":130,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"position":{"line":61,"character":14}}}
[server] Got a method textDocument/hover
[server] processing took 0.0231266021729ms
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/lib/bs/src/lib/Data-Condorcet.cmt, /Users/mike/Code/condorcet/ui/src/lib/Data.re)
FINDING /Users/mike/Code/condorcet/ui/lib/bs/src/lib/Data-Condorcet.cmt src /Users/mike/Code/condorcet/ui/src/lib/Data.re
[ref] Getting global Data-Condorcet
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/lib/bs/src/lib/Data-Condorcet.cmt, /Users/mike/Code/condorcet/ui/src/lib/Data.re)
FINDING /Users/mike/Code/condorcet/ui/lib/bs/src/lib/Data-Condorcet.cmt src /Users/mike/Code/condorcet/ui/src/lib/Data.re
[ref] Getting for 1047 in pollVariant
[ref] Yes!! got it
Sending response {"id": 130, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 61, "character": 11}, "end": {"line": 61, "character": 21}}, "contents": {"kind": "markdown", "value": "```\nData-Condorcet.pollVariant\n```\n\n```\ntype pollVariant = | PollErrors(errors) | PollRes(poll)\n\n```\n\n```\nPollErrors(errors)\n```\n\n<root>/ui/src/lib/Data.re"}}}
Read message 
{"jsonrpc":"2.0","id":131,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":64,"character":32},"end":{"line":64,"character":32}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.014066696167ms
Sending response {"id": 131, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":132,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"position":{"line":60,"character":26}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0729560852051ms
[ref] Got a loc for pos
Sending response {"id": 132, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 118, "character": 26}, "end": {"line": 118, "character": 32}}, "kind": 2}, {"range": {"start": {"line": 101, "character": 26}, "end": {"line": 101, "character": 32}}, "kind": 2}, {"range": {"start": {"line": 60, "character": 22}, "end": {"line": 60, "character": 28}}, "kind": 2}, {"range": {"start": {"line": 41, "character": 34}, "end": {"line": 41, "character": 40}}, "kind": 2}, {"range": {"start": {"line": 28, "character": 34}, "end": {"line": 28, "character": 40}}, "kind": 2}, {"range": {"start": {"line": 15, "character": 34}, "end": {"line": 15, "character": 40}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":133,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":60,"character":25},"end":{"line":60,"character":26}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0219345092773ms
Sending response {"id": 133, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":134,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"position":{"line":61,"character":25}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0178813934326ms
[ref] Got a loc for pos
Sending response {"id": 134, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 69, "character": 21}, "end": {"line": 69, "character": 27}}, "kind": 2}, {"range": {"start": {"line": 63, "character": 21}, "end": {"line": 63, "character": 27}}, "kind": 2}, {"range": {"start": {"line": 61, "character": 22}, "end": {"line": 61, "character": 28}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":135,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":61,"character":22},"end":{"line":61,"character":28}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.018835067749ms
Sending response {"id": 135, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":136,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"position":{"line":60,"character":47}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0131130218506ms
[ref] Got a loc for pos
Sending response {"id": 136, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 60, "character": 43}, "end": {"line": 60, "character": 47}}, "kind": 2}, {"range": {"start": {"line": 59, "character": 13}, "end": {"line": 59, "character": 17}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":137,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":60,"character":47},"end":{"line":60,"character":47}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0150203704834ms
Sending response {"id": 137, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":138,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":60,"character":51},"end":{"line":60,"character":51}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0240802764893ms
Sending response {"id": 138, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":2},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet protocol = Constants.protocol;\nlet host = Constants.host;\n\nlet baseUrl = protocol ++ \"://\" ++ host;\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = (poll, addError) => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n           \n         | PollErrors(errors) =>\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList |> List.map(s => \"Question \" ++ s)\n             | _ => []\n             };\n\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           addError(showErrors);\n           resolve(None);\n         | PollRes(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResponseOrErrors(json) |> resolve)\n  );\n} /* }*/;\n\nlet removeChoice = (manageToken, choice) => {\n  let payload = Data.encodeChoice(choice);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/remove_choice\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResultOrErrors(json) |> resolve)\n  );\n};\n\nlet destroyResponse = (manageToken, responseId) => {\n  let url =\n    baseUrl\n    ++ \"/api/v1/polls/\"\n    ++ manageToken\n    ++ \"/remove_response/\"\n    ++ string_of_int(responseId);\n\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      url,\n      Fetch.RequestInit.make(\n        ~method_=Delete,\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(res => res |> resolve)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":139,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0169277191162ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending response {"id": 139, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 108, "character": 2}, "end": {"line": 108, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 131, "character": 2}, "end": {"line": 131, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 91, "character": 2}, "end": {"line": 91, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":140,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0109672546387ms
Sending response {"id": 140, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 108, "character": 2}, "end": {"line": 108, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 131, "character": 2}, "end": {"line": 131, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 91, "character": 2}, "end": {"line": 91, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":3},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet protocol = Constants.protocol;\nlet host = Constants.host;\n\nlet baseUrl = protocol ++ \"://\" ++ host;\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = (poll, addError) => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | PollErrors(errors) =>\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList |> List.map(s => \"Question \" ++ s)\n             | _ => []\n             };\n\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           addError(showErrors);\n           resolve(None);\n         | PollRes(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResponseOrErrors(json) |> resolve)\n  );\n} /* }*/;\n\nlet removeChoice = (manageToken, choice) => {\n  let payload = Data.encodeChoice(choice);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/remove_choice\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResultOrErrors(json) |> resolve)\n  );\n};\n\nlet destroyResponse = (manageToken, responseId) => {\n  let url =\n    baseUrl\n    ++ \"/api/v1/polls/\"\n    ++ manageToken\n    ++ \"/remove_response/\"\n    ++ string_of_int(responseId);\n\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      url,\n      Fetch.RequestInit.make(\n        ~method_=Delete,\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(res => res |> resolve)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":141,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0100135803223ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending response {"id": 141, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 107, "character": 2}, "end": {"line": 107, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 90, "character": 2}, "end": {"line": 90, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 130, "character": 2}, "end": {"line": 130, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":142,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":60,"character":51},"end":{"line":60,"character":51}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00905990600586ms
Sending response {"id": 142, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":143,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0391006469727ms
Sending response {"id": 143, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 107, "character": 2}, "end": {"line": 107, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 90, "character": 2}, "end": {"line": 90, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 130, "character": 2}, "end": {"line": 130, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":144,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":81,"character":25},"end":{"line":81,"character":25}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0169277191162ms
Sending response {"id": 144, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":145,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"position":{"line":80,"character":24}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0128746032715ms
[ref] Got a loc for pos
Sending response {"id": 145, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 80, "character": 20}, "end": {"line": 80, "character": 30}}, "kind": 2}, {"range": {"start": {"line": 74, "character": 15}, "end": {"line": 74, "character": 25}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":146,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":80,"character":20},"end":{"line":80,"character":30}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0221729278564ms
Sending response {"id": 146, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":147,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"position":{"line":64,"character":19}}}
[server] Got a method textDocument/hover
[server] processing took 0.0698566436768ms
Sending response {"id": 147, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 64, "character": 15}, "end": {"line": 64, "character": 19}}, "contents": {"kind": "markdown", "value": "```\noption(list(string))\n```"}}}
Read message 
{"jsonrpc":"2.0","id":148,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"position":{"line":68,"character":27}}}
[server] Got a method textDocument/hover
[server] processing took 0.0169277191162ms
[ref] Trying for declared Value 1352 in file file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending response {"id": 148, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 68, "character": 15}, "end": {"line": 68, "character": 27}}, "contents": {"kind": "markdown", "value": "```\nlist(string)\n```\n\n<root>/ui/src/lib/Api.re"}}}
Read message 
{"jsonrpc":"2.0","id":149,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"position":{"line":60,"character":38}}}
[server] Got a method textDocument/hover
[server] processing took 0.0181198120117ms
FINDING docs for module IntfAndImpl(/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src/Json.cmti, /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/src/Json.mli, /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src/Json.cmt, /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/src/Json.ml)
FINDING /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src/Json.cmti src /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/src/Json.mli
FINDING docs for module IntfAndImpl(/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src/Json_decode.cmti, /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/src/Json_decode.mli, /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src/Json_decode.cmt, /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/src/Json_decode.ml)
FINDING /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src/Json_decode.cmti src /Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/src/Json_decode.mli
[ref] Getting global Condorcet
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt, nil)
FINDING /Users/mike/Code/condorcet/ui/lib/bs/Condorcet.cmt src 
FINDING docs for module Impl(/Users/mike/Code/condorcet/ui/lib/bs/src/lib/Data-Condorcet.cmt, /Users/mike/Code/condorcet/ui/src/lib/Data.re)
FINDING /Users/mike/Code/condorcet/ui/lib/bs/src/lib/Data-Condorcet.cmt src /Users/mike/Code/condorcet/ui/src/lib/Data.re
[ref] Getting for 1123 in dPollOrErrors
[ref] Trying for declared Value 1123 in file file:///Users/mike/Code/condorcet/ui/src/lib/Data.re
[ref] Yes!! got it
Sending response {"id": 149, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 60, "character": 29}, "end": {"line": 60, "character": 42}}, "contents": {"kind": "markdown", "value": "```\nJson.Decode.decoder(\n  Data-Condorcet.pollVariant\n)\n```\n\n```\ntype decoder('a) = Js.Json.t => 'a\n```\n\n<root>/ui/src/lib/Data.re"}}}
Read message 
{"jsonrpc":"2.0","id":150,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"position":{"line":60,"character":38}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0109672546387ms
[ref] Got a loc for pos
Sending response {"id": 150, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 60, "character": 29}, "end": {"line": 60, "character": 42}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":151,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":60,"character":38},"end":{"line":60,"character":38}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0150203704834ms
Sending response {"id": 151, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":152,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":62,"character":31},"end":{"line":62,"character":31}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0159740447998ms
Sending response {"id": 152, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":153,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":61,"character":32},"end":{"line":61,"character":32}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0169277191162ms
Sending response {"id": 153, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":4},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet protocol = Constants.protocol;\nlet host = Constants.host;\n\nlet baseUrl = protocol ++ \"://\" ++ host;\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = (poll, addError) => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | PollErrors(errors) =>\n         \n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList |> List.map(s => \"Question \" ++ s)\n             | _ => []\n             };\n\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           addError(showErrors);\n           resolve(None);\n         | PollRes(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResponseOrErrors(json) |> resolve)\n  );\n} /* }*/;\n\nlet removeChoice = (manageToken, choice) => {\n  let payload = Data.encodeChoice(choice);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/remove_choice\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResultOrErrors(json) |> resolve)\n  );\n};\n\nlet destroyResponse = (manageToken, responseId) => {\n  let url =\n    baseUrl\n    ++ \"/api/v1/polls/\"\n    ++ manageToken\n    ++ \"/remove_response/\"\n    ++ string_of_int(responseId);\n\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      url,\n      Fetch.RequestInit.make(\n        ~method_=Delete,\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(res => res |> resolve)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":154,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0710487365723ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending response {"id": 154, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 108, "character": 2}, "end": {"line": 108, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 91, "character": 2}, "end": {"line": 91, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 131, "character": 2}, "end": {"line": 131, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":155,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00810623168945ms
Sending response {"id": 155, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 108, "character": 2}, "end": {"line": 108, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 91, "character": 2}, "end": {"line": 91, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 131, "character": 2}, "end": {"line": 131, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":5},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet protocol = Constants.protocol;\nlet host = Constants.host;\n\nlet baseUrl = protocol ++ \"://\" ++ host;\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = (poll, addError) => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | PollErrors(errors) =>\n          \n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList |> List.map(s => \"Question \" ++ s)\n             | _ => []\n             };\n\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           addError(showErrors);\n           resolve(None);\n         | PollRes(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResponseOrErrors(json) |> resolve)\n  );\n} /* }*/;\n\nlet removeChoice = (manageToken, choice) => {\n  let payload = Data.encodeChoice(choice);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/remove_choice\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResultOrErrors(json) |> resolve)\n  );\n};\n\nlet destroyResponse = (manageToken, responseId) => {\n  let url =\n    baseUrl\n    ++ \"/api/v1/polls/\"\n    ++ manageToken\n    ++ \"/remove_response/\"\n    ++ string_of_int(responseId);\n\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      url,\n      Fetch.RequestInit.make(\n        ~method_=Delete,\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(res => res |> resolve)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":156,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.014066696167ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending response {"id": 156, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 108, "character": 2}, "end": {"line": 108, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 131, "character": 2}, "end": {"line": 131, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 91, "character": 2}, "end": {"line": 91, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":157,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00786781311035ms
Sending response {"id": 157, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 108, "character": 2}, "end": {"line": 108, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 131, "character": 2}, "end": {"line": 131, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 91, "character": 2}, "end": {"line": 91, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":158,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":62,"character":10},"end":{"line":142,"character":2}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0209808349609ms
Sending response {"id": 158, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":159,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":62,"character":0},"end":{"line":62,"character":10}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0121593475342ms
Sending response {"id": 159, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":6},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet protocol = Constants.protocol;\nlet host = Constants.host;\n\nlet baseUrl = protocol ++ \"://\" ++ host;\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = (poll, addError) => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | PollErrors(errors) =>\n\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList |> List.map(s => \"Question \" ++ s)\n             | _ => []\n             };\n\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           addError(showErrors);\n           resolve(None);\n         | PollRes(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResponseOrErrors(json) |> resolve)\n  );\n} /* }*/;\n\nlet removeChoice = (manageToken, choice) => {\n  let payload = Data.encodeChoice(choice);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/remove_choice\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResultOrErrors(json) |> resolve)\n  );\n};\n\nlet destroyResponse = (manageToken, responseId) => {\n  let url =\n    baseUrl\n    ++ \"/api/v1/polls/\"\n    ++ manageToken\n    ++ \"/remove_response/\"\n    ++ string_of_int(responseId);\n\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      url,\n      Fetch.RequestInit.make(\n        ~method_=Delete,\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(res => res |> resolve)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":160,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0147819519043ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending response {"id": 160, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 131, "character": 2}, "end": {"line": 131, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 108, "character": 2}, "end": {"line": 108, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 91, "character": 2}, "end": {"line": 91, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":161,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00810623168945ms
Sending response {"id": 161, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 131, "character": 2}, "end": {"line": 131, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 108, "character": 2}, "end": {"line": 108, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 91, "character": 2}, "end": {"line": 91, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":7},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet protocol = Constants.protocol;\nlet host = Constants.host;\n\nlet baseUrl = protocol ++ \"://\" ++ host;\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = (poll, addError) => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | PollErrors(errors) =>\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList |> List.map(s => \"Question \" ++ s)\n             | _ => []\n             };\n\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           addError(showErrors);\n           resolve(None);\n         | PollRes(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResponseOrErrors(json) |> resolve)\n  );\n} /* }*/;\n\nlet removeChoice = (manageToken, choice) => {\n  let payload = Data.encodeChoice(choice);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/remove_choice\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResultOrErrors(json) |> resolve)\n  );\n};\n\nlet destroyResponse = (manageToken, responseId) => {\n  let url =\n    baseUrl\n    ++ \"/api/v1/polls/\"\n    ++ manageToken\n    ++ \"/remove_response/\"\n    ++ string_of_int(responseId);\n\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      url,\n      Fetch.RequestInit.make(\n        ~method_=Delete,\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(res => res |> resolve)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":162,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0159740447998ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending response {"id": 162, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 107, "character": 2}, "end": {"line": 107, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 90, "character": 2}, "end": {"line": 90, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 130, "character": 2}, "end": {"line": 130, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":163,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":61,"character":32},"end":{"line":61,"character":32}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00786781311035ms
Sending response {"id": 163, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":164,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0128746032715ms
Sending response {"id": 164, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 107, "character": 2}, "end": {"line": 107, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 90, "character": 2}, "end": {"line": 90, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 130, "character": 2}, "end": {"line": 130, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":165,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0150203704834ms
Sending response {"id": 165, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":7},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet protocol = Constants.protocol;\nlet host = Constants.host;\n\nlet baseUrl = protocol ++ \"://\" ++ host;\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = (poll, addError) => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | PollErrors(errors) =>\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList |> List.map(s => \"Question \" ++ s)\n             | _ => []\n             };\n\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           addError(showErrors);\n           resolve(None);\n         | PollRes(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResponseOrErrors(json) |> resolve)\n  );\n} /* }*/;\n\nlet removeChoice = (manageToken, choice) => {\n  let payload = Data.encodeChoice(choice);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/remove_choice\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResultOrErrors(json) |> resolve)\n  );\n};\n\nlet destroyResponse = (manageToken, responseId) => {\n  let url =\n    baseUrl\n    ++ \"/api/v1/polls/\"\n    ++ manageToken\n    ++ \"/remove_response/\"\n    ++ string_of_int(responseId);\n\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      url,\n      Fetch.RequestInit.make(\n        ~method_=Delete,\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(res => res |> resolve)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":7}}}
>> Build system running: /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/12] [34mBuilding[39m [2msrc/lib/Api.reast[22m
[2/12] [34mBuilding[39m [2msrc/lib/Api.d[22m
[3/12] [34mBuilding[39m [2msrc/lib/Api-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":166,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0169277191162ms
Sending response {"id": 166, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":7},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet protocol = Constants.protocol;\nlet host = Constants.host;\n\nlet baseUrl = protocol ++ \"://\" ++ host;\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = (poll, addError) => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | PollErrors(errors) =>\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList |> List.map(s => \"Question \" ++ s)\n             | _ => []\n             };\n\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           addError(showErrors);\n           resolve(None);\n         | PollRes(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResponseOrErrors(json) |> resolve)\n  );\n} /* }*/;\n\nlet removeChoice = (manageToken, choice) => {\n  let payload = Data.encodeChoice(choice);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/remove_choice\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResultOrErrors(json) |> resolve)\n  );\n};\n\nlet destroyResponse = (manageToken, responseId) => {\n  let url =\n    baseUrl\n    ++ \"/api/v1/polls/\"\n    ++ manageToken\n    ++ \"/remove_response/\"\n    ++ string_of_int(responseId);\n\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      url,\n      Fetch.RequestInit.make(\n        ~method_=Delete,\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(res => res |> resolve)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":7}}}
>> Build system running: /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/12] [34mBuilding[39m [2msrc/lib/Api.reast[22m
[2/12] [34mBuilding[39m [2msrc/lib/Api.d[22m
[3/12] [34mBuilding[39m [2msrc/lib/Api-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":167,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"position":{"line":80,"character":17}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0159740447998ms
[ref] Got a loc for pos
Sending response {"id": 167, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 80, "character": 11}, "end": {"line": 80, "character": 19}}, "kind": 2}, {"range": {"start": {"line": 46, "character": 24}, "end": {"line": 46, "character": 32}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":168,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":80,"character":11},"end":{"line":80,"character":19}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.02121925354ms
Sending response {"id": 168, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":169,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":37,"character":26}}}
[server] Got a method textDocument/hover
[server] processing took 0.0181198120117ms
Sending response {"id": 169, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":170,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":37,"character":33}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0112056732178ms
[ref] Got a loc for pos
Sending response {"id": 170, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 50, "character": 15}, "end": {"line": 50, "character": 21}}, "kind": 2}, {"range": {"start": {"line": 42, "character": 13}, "end": {"line": 42, "character": 19}}, "kind": 2}, {"range": {"start": {"line": 37, "character": 27}, "end": {"line": 37, "character": 33}}, "kind": 2}, {"range": {"start": {"line": 5, "character": 13}, "end": {"line": 5, "character": 19}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":171,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":37,"character":27},"end":{"line":37,"character":33}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.018835067749ms
Sending response {"id": 171, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":172,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":81,"character":25},"end":{"line":81,"character":25}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0178813934326ms
Sending response {"id": 172, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":173,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"position":{"line":80,"character":26}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0119209289551ms
[ref] Got a loc for pos
Sending response {"id": 173, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 80, "character": 20}, "end": {"line": 80, "character": 30}}, "kind": 2}, {"range": {"start": {"line": 74, "character": 15}, "end": {"line": 74, "character": 25}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","id":174,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":80,"character":20},"end":{"line":80,"character":30}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0181198120117ms
Sending response {"id": 174, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":175,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":80,"character":20},"end":{"line":80,"character":20}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0340938568115ms
Sending response {"id": 175, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":8},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet protocol = Constants.protocol;\nlet host = Constants.host;\n\nlet baseUrl = protocol ++ \"://\" ++ host;\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = (poll, addError) => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | PollErrors(errors) =>\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList |> List.map(s => \"Question \" ++ s)\n             | _ => []\n             };\n\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           addError(\"showErrors);\n           resolve(None);\n         | PollRes(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResponseOrErrors(json) |> resolve)\n  );\n} /* }*/;\n\nlet removeChoice = (manageToken, choice) => {\n  let payload = Data.encodeChoice(choice);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/remove_choice\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResultOrErrors(json) |> resolve)\n  );\n};\n\nlet destroyResponse = (manageToken, responseId) => {\n  let url =\n    baseUrl\n    ++ \"/api/v1/polls/\"\n    ++ manageToken\n    ++ \"/remove_response/\"\n    ++ string_of_int(responseId);\n\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      url,\n      Fetch.RequestInit.make(\n        ~method_=Delete,\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(res => res |> resolve)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":176,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0128746032715ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Now loading /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.cmt
Size 36952
Sending response {"id": 176, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 107, "character": 2}, "end": {"line": 107, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 90, "character": 2}, "end": {"line": 90, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 130, "character": 2}, "end": {"line": 130, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":177,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":80,"character":21},"end":{"line":80,"character":21}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.00691413879395ms
Sending response {"id": 177, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/Api.re", "diagnostics": [{"range": {"start": {"line": 92, "character": 52}, "end": {"line": 96, "character": 42}}, "message": "Error: Unclosed \"{\" (opened line 47, column 37)", "severity": 1}, {"range": {"start": {"line": 80, "character": 20}, "end": {"line": 92, "character": 18}}, "message": "Error: This expression has type string but an expression was expected of type\n         int", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","id":178,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.014066696167ms
Sending response {"id": 178, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 107, "character": 2}, "end": {"line": 107, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 90, "character": 2}, "end": {"line": 90, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 130, "character": 2}, "end": {"line": 130, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":11},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet protocol = Constants.protocol;\nlet host = Constants.host;\n\nlet baseUrl = protocol ++ \"://\" ++ host;\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = (poll, addError) => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | PollErrors(errors) =>\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList |> List.map(s => \"Question \" ++ s)\n             | _ => []\n             };\n\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           addError(\"errshowErrors);\n           resolve(None);\n         | PollRes(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResponseOrErrors(json) |> resolve)\n  );\n} /* }*/;\n\nlet removeChoice = (manageToken, choice) => {\n  let payload = Data.encodeChoice(choice);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/remove_choice\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResultOrErrors(json) |> resolve)\n  );\n};\n\nlet destroyResponse = (manageToken, responseId) => {\n  let url =\n    baseUrl\n    ++ \"/api/v1/polls/\"\n    ++ manageToken\n    ++ \"/remove_response/\"\n    ++ string_of_int(responseId);\n\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      url,\n      Fetch.RequestInit.make(\n        ~method_=Delete,\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(res => res |> resolve)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":12},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet protocol = Constants.protocol;\nlet host = Constants.host;\n\nlet baseUrl = protocol ++ \"://\" ++ host;\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = (poll, addError) => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | PollErrors(errors) =>\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList |> List.map(s => \"Question \" ++ s)\n             | _ => []\n             };\n\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           addError(\"erroshowErrors);\n           resolve(None);\n         | PollRes(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResponseOrErrors(json) |> resolve)\n  );\n} /* }*/;\n\nlet removeChoice = (manageToken, choice) => {\n  let payload = Data.encodeChoice(choice);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/remove_choice\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResultOrErrors(json) |> resolve)\n  );\n};\n\nlet destroyResponse = (manageToken, responseId) => {\n  let url =\n    baseUrl\n    ++ \"/api/v1/polls/\"\n    ++ manageToken\n    ++ \"/remove_response/\"\n    ++ string_of_int(responseId);\n\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      url,\n      Fetch.RequestInit.make(\n        ~method_=Delete,\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(res => res |> resolve)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":179,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.014066696167ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Now loading /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.cmt
Size 36956
Sending response {"id": 179, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 107, "character": 2}, "end": {"line": 107, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 90, "character": 2}, "end": {"line": 90, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 130, "character": 2}, "end": {"line": 130, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":180,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":80,"character":25},"end":{"line":80,"character":25}},"context":{"diagnostics":[{"range":{"start":{"line":80,"character":20},"end":{"line":92,"character":18}},"message":"Error: This expression has type string but an expression was expected of type\n         int","severity":1}]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0109672546387ms
Sending response {"id": 180, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":181,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0340938568115ms
Sending response {"id": 181, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 107, "character": 2}, "end": {"line": 107, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 90, "character": 2}, "end": {"line": 90, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 130, "character": 2}, "end": {"line": 130, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":13},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet protocol = Constants.protocol;\nlet host = Constants.host;\n\nlet baseUrl = protocol ++ \"://\" ++ host;\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = (poll, addError) => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | PollErrors(errors) =>\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList |> List.map(s => \"Question \" ++ s)\n             | _ => []\n             };\n\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           addError(\"errorshowErrors);\n           resolve(None);\n         | PollRes(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResponseOrErrors(json) |> resolve)\n  );\n} /* }*/;\n\nlet removeChoice = (manageToken, choice) => {\n  let payload = Data.encodeChoice(choice);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/remove_choice\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResultOrErrors(json) |> resolve)\n  );\n};\n\nlet destroyResponse = (manageToken, responseId) => {\n  let url =\n    baseUrl\n    ++ \"/api/v1/polls/\"\n    ++ manageToken\n    ++ \"/remove_response/\"\n    ++ string_of_int(responseId);\n\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      url,\n      Fetch.RequestInit.make(\n        ~method_=Delete,\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(res => res |> resolve)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":182,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0178813934326ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Now loading /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.cmt
Size 36957
Sending response {"id": 182, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 107, "character": 2}, "end": {"line": 107, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 90, "character": 2}, "end": {"line": 90, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 130, "character": 2}, "end": {"line": 130, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":183,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":80,"character":26},"end":{"line":80,"character":26}},"context":{"diagnostics":[{"range":{"start":{"line":80,"character":20},"end":{"line":92,"character":18}},"message":"Error: This expression has type string but an expression was expected of type\n         int","severity":1}]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0109672546387ms
Sending response {"id": 183, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":184,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0169277191162ms
Sending response {"id": 184, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 107, "character": 2}, "end": {"line": 107, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 90, "character": 2}, "end": {"line": 90, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 130, "character": 2}, "end": {"line": 130, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":183}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":14},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet protocol = Constants.protocol;\nlet host = Constants.host;\n\nlet baseUrl = protocol ++ \"://\" ++ host;\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = (poll, addError) => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | PollErrors(errors) =>\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList |> List.map(s => \"Question \" ++ s)\n             | _ => []\n             };\n\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           addError(\"error\"showErrors);\n           resolve(None);\n         | PollRes(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResponseOrErrors(json) |> resolve)\n  );\n} /* }*/;\n\nlet removeChoice = (manageToken, choice) => {\n  let payload = Data.encodeChoice(choice);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/remove_choice\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResultOrErrors(json) |> resolve)\n  );\n};\n\nlet destroyResponse = (manageToken, responseId) => {\n  let url =\n    baseUrl\n    ++ \"/api/v1/polls/\"\n    ++ manageToken\n    ++ \"/remove_response/\"\n    ++ string_of_int(responseId);\n\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      url,\n      Fetch.RequestInit.make(\n        ~method_=Delete,\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(res => res |> resolve)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":185,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0219345092773ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Now loading /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.cmt
Size 55608
Sending response {"id": 185, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 107, "character": 2}, "end": {"line": 107, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 90, "character": 2}, "end": {"line": 90, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 130, "character": 2}, "end": {"line": 130, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":186,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":80,"character":27},"end":{"line":80,"character":27}},"context":{"diagnostics":[{"range":{"start":{"line":80,"character":20},"end":{"line":92,"character":18}},"message":"Error: This expression has type string but an expression was expected of type\n         int","severity":1}]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0119209289551ms
Sending response {"id": 186, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":187,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0131130218506ms
Sending response {"id": 187, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 107, "character": 2}, "end": {"line": 107, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 90, "character": 2}, "end": {"line": 90, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 130, "character": 2}, "end": {"line": 130, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/Api.re", "diagnostics": [{"range": {"start": {"line": 80, "character": 27}, "end": {"line": 80, "character": 37}}, "message": "Error: Unclosed \"(\" (opened line 81, column 19)", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":16},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet protocol = Constants.protocol;\nlet host = Constants.host;\n\nlet baseUrl = protocol ++ \"://\" ++ host;\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = (poll, addError) => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | PollErrors(errors) =>\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList |> List.map(s => \"Question \" ++ s)\n             | _ => []\n             };\n\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           addError(\"error\", showErrors);\n           resolve(None);\n         | PollRes(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResponseOrErrors(json) |> resolve)\n  );\n} /* }*/;\n\nlet removeChoice = (manageToken, choice) => {\n  let payload = Data.encodeChoice(choice);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/remove_choice\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResultOrErrors(json) |> resolve)\n  );\n};\n\nlet destroyResponse = (manageToken, responseId) => {\n  let url =\n    baseUrl\n    ++ \"/api/v1/polls/\"\n    ++ manageToken\n    ++ \"/remove_response/\"\n    ++ string_of_int(responseId);\n\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      url,\n      Fetch.RequestInit.make(\n        ~method_=Delete,\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(res => res |> resolve)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":188,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0169277191162ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending response {"id": 188, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 130, "character": 2}, "end": {"line": 130, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 90, "character": 2}, "end": {"line": 90, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 107, "character": 2}, "end": {"line": 107, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":189,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0100135803223ms
Sending response {"id": 189, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: Condorcet, Data-Condorcet, Array, Fetch, Js, Pervasives, List", "command": ""}}, {"range": {"start": {"line": 25, "character": 2}, "end": {"line": 25, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 130, "character": 2}, "end": {"line": 130, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 12, "character": 2}, "end": {"line": 12, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 90, "character": 2}, "end": {"line": 90, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 107, "character": 2}, "end": {"line": 107, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 38, "character": 2}, "end": {"line": 38, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}, {"range": {"start": {"line": 48, "character": 2}, "end": {"line": 48, "character": 12}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":190,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0460147857666ms
Sending response {"id": 190, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":191,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":80,"character":29},"end":{"line":80,"character":29}},"context":{"diagnostics":[{"range":{"start":{"line":80,"character":27},"end":{"line":80,"character":37}},"message":"Error: Unclosed \"(\" (opened line 81, column 19)","severity":1}]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0178813934326ms
Sending response {"id": 191, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":16},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet protocol = Constants.protocol;\nlet host = Constants.host;\n\nlet baseUrl = protocol ++ \"://\" ++ host;\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = (poll, addError) => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | PollErrors(errors) =>\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList |> List.map(s => \"Question \" ++ s)\n             | _ => []\n             };\n\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           addError(\"error\", showErrors);\n           resolve(None);\n         | PollRes(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResponseOrErrors(json) |> resolve)\n  );\n} /* }*/;\n\nlet removeChoice = (manageToken, choice) => {\n  let payload = Data.encodeChoice(choice);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/remove_choice\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResultOrErrors(json) |> resolve)\n  );\n};\n\nlet destroyResponse = (manageToken, responseId) => {\n  let url =\n    baseUrl\n    ++ \"/api/v1/polls/\"\n    ++ manageToken\n    ++ \"/remove_response/\"\n    ++ string_of_int(responseId);\n\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      url,\n      Fetch.RequestInit.make(\n        ~method_=Delete,\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(res => res |> resolve)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":16}}}
>> Build system running: /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/12] [34mBuilding[39m [2msrc/lib/Api.reast[22m
[2/12] [34mBuilding[39m [2msrc/lib/Api.d[22m
[3/12] [34mBuilding[39m [2msrc/lib/Api-Condorcet.cmj[22m
[4/12] [34mBuilding[39m [2msrc/ManagePollPage-Condorcet.cmj[22m
[5/12] [34mBuilding[39m [2msrc/PollResultsPage-Condorcet.cmj[22m
[6/12] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
[7/12] [34mBuilding[39m [2msrc/TakePoll-Condorcet.cmj[22m
[8/12] [34mBuilding[39m [2msrc/TakePollPage-Condorcet.cmj[22m
[9/12] [34mBuilding[39m [2msrc/EditResults-Condorcet.cmj[22m
[10/12] [34mBuilding[39m [2msrc/EditResultsPage-Condorcet.cmj[22m
[11/12] [34mBuilding[39m [2msrc/App-Condorcet.cmj[22m
[12/12] [34mBuilding[39m [2msrc/index-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/Api.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":192,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":86,"character":2},"end":{"line":86,"character":2}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0581741333008ms
Sending response {"id": 192, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":193,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":42,"character":68},"end":{"line":42,"character":68}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.014066696167ms
Sending response {"id": 193, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":27},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n             Js.log(res);\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":194,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0338554382324ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending response {"id": 194, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":195,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.00810623168945ms
Sending response {"id": 195, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":196,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0200271606445ms
Sending response {"id": 196, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"$/cancelRequest","params":{"id":196}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":27},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n             Js.log(res);\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":27}}}
>> Build system running: /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/5] [34mBuilding[39m [2msrc/NewPoll.reast[22m
[2/5] [34mBuilding[39m [2msrc/NewPoll.d[22m
[3/5] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":197,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":41,"character":0},"end":{"line":42,"character":0}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0190734863281ms
Sending response {"id": 197, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":28},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None =>\n             resolve();\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","id":198,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0200271606445ms
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending response {"id": 198, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":199,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0228881835938ms
Sending response {"id": 199, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":200,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0259876251221ms
Sending response {"id": 200, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 112, "character": 0}}, "newText": "[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}
Read message 
{"jsonrpc":"2.0","id":201,"method":"textDocument/hover","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"position":{"line":48,"character":67}}}
[server] Got a method textDocument/hover
[server] processing took 0.00905990600586ms
Sending response {"id": 201, "jsonrpc": "2.0", "result": {"range": {"start": {"line": 48, "character": 31}, "end": {"line": 48, "character": 68}}, "contents": {"kind": "markdown", "value": "string"}}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":29},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":29}}}
>> Build system running: /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/5] [34mBuilding[39m [2msrc/NewPoll.reast[22m
[2/5] [34mBuilding[39m [2msrc/NewPoll.d[22m
[3/5] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":202,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0178813934326ms
Sending response {"id": 202, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":203,"method":"textDocument/codeLens","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"}}}
[server] Got a method textDocument/codeLens
[server] processing took 0.0419616699219ms
Sending response {"id": 203, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "command": {"title": "Dependencies: React, ReactDOMRe, ReactEvent, Condorcet, Array, Js, Rationale, Pervasives, List, ReasonReactRouter", "command": ""}}, {"range": {"start": {"line": 36, "character": 4}, "end": {"line": 36, "character": 14}}, "command": {"title": "2 uses. values: {resolve, then_}", "command": ""}}]}
Read message 
{"jsonrpc":"2.0","id":204,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":48,"character":25},"end":{"line":48,"character":25}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0178813934326ms
Sending response {"id": 204, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":205,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0240802764893ms
Sending response {"id": 205, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":206,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"position":{"line":77,"character":29}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0159740447998ms
[ref] Got a loc for pos
Sending response {"id": 206, "jsonrpc": "2.0", "result": [{"range": {"start": {"line": 77, "character": 22}, "end": {"line": 77, "character": 29}}, "kind": 2}]}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":29},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nmodule RList = Rationale.RList;\n\n[@react.component]\nlet make = (~notify) => {\n  let blankPoll: Data.poll = {\n    id: None,\n    question: \"\",\n    choices: [\"\", \"\", \"\", \"\"],\n    manageToken: None,\n  };\n  let (poll, setPoll) = React.useState(() => blankPoll);\n  let showButtons = poll.choices |> List.length > 2;\n\n  let changeQuestion = question => {\n    setPoll(_ => {...poll, question});\n  };\n\n  let changeChoice = (newChoice, idx) => {\n    let newChoices = poll.choices |> Array.of_list;\n    newChoices[idx] = newChoice;\n    let newList = Array.to_list(newChoices);\n    setPoll(_ => {...poll, choices: newList});\n  };\n\n  let addChoice = _ => {\n    setPoll(_ => {...poll, choices: List.append(poll.choices, [\"\"])});\n  };\n\n  let removeChoice = idx => {\n    let newChoices = RList.remove(idx, 1, poll.choices);\n    setPoll(_ => {...poll, choices: newChoices});\n  };\n\n  let savePoll = _ => {\n    Js.Promise.(\n      Api.createPoll(poll, notify)\n      |> then_(res => {\n           switch (res) {\n           | None => resolve()\n           | Some((poll: Data.poll)) =>\n             switch (poll.manageToken) {\n             | Some(manageToken) =>\n               ReasonReactRouter.push(\"/manage-poll/\" ++ manageToken)\n               |> resolve\n             | _ =>\n               notify(\"error\", \"There was an issue making this poll\");\n               resolve();\n             }\n           }\n         })\n    )\n    |> ignore;\n  };\n\n  let renderChoice = (idx, answer) => {\n    <div className=\"choice\" key={string_of_int(idx)}>\n      <Input\n        onChange={event =>\n          changeChoice(ReactEvent.Form.target(event)##value, idx)\n        }\n        value=answer\n        placeholder=\"Choice...\"\n      />\n      {showButtons\n         ? <div>\n             <button\n               className=\"button button-sm\" onClick={_ => removeChoice(idx)}>\n               <i className=\"far fa-trash-alt\" />\n             </button>\n           </div>\n         : React.null}\n    </div>;\n  };\n\n  <div className=\"page\">\n    <h3 className=\"centered\"> {R.s(\"Create a Poll\")} </h3>\n    <div className=\"poll-form\">\n      <div>\n        <Input\n          label=\"Your Question:\"\n          onChange={event =>\n            changeQuestion(ReactEvent.Form.target(event)##value)\n          }\n          value={poll.question}\n          placeholder=\"Question...\"\n        />\n      </div>\n      <div className=\"choice-list\">\n        <label className=\"input-label\"> {R.s(\"Options:\")} </label>\n        {poll.choices\n         |> List.mapi(renderChoice)\n         |> Array.of_list\n         |> React.array}\n      </div>\n      <div className=\"new-choice-holder\">\n        <button className=\"button\" onClick=addChoice>\n          <i className=\"fas fa-plus\" />\n          {R.s(\" Add Choice\")}\n        </button>\n      </div>\n    </div>\n    <div className=\"centered save-holder\">\n      <button className=\"button button-mdlg\" onClick=savePoll>\n        {R.s(\"Create Poll\")}\n      </button>\n    </div>\n  </div>;\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re","version":29}}}
>> Build system running: /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/5] [34mBuilding[39m [2msrc/NewPoll.reast[22m
[2/5] [34mBuilding[39m [2msrc/NewPoll.d[22m
[3/5] [34mBuilding[39m [2msrc/NewPoll-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/NewPoll-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
Ident!! Rationale.RList
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/NewPoll.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/NewPoll.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","id":207,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"range":{"start":{"line":77,"character":29},"end":{"line":77,"character":29}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0109672546387ms
Sending response {"id": 207, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":208,"method":"textDocument/formatting","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re"},"options":{"tabSize":2,"insertSpaces":true}}}
[server] Got a method textDocument/formatting
[server] processing took 0.0228881835938ms
Sending response {"id": 208, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":209,"method":"textDocument/codeAction","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/NewPoll.re"},"range":{"start":{"line":43,"character":35},"end":{"line":43,"character":35}},"context":{"diagnostics":[]}}}
[server] Got a method textDocument/codeAction
[server] processing took 0.0250339508057ms
Sending response {"id": 209, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":16},"contentChanges":[{"text":"[@bs.val] external alert: string => unit = \"alert\";\n\nlet protocol = Constants.protocol;\nlet host = Constants.host;\n\nlet baseUrl = protocol ++ \"://\" ++ host;\n\nlet fetchPoll = (id, cb) => {\n  let callCb = (poll: Data.poll) => {\n    cb(_ => Some(poll));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id)\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dPoll |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchResult = (id, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/results\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet fetchManageResult = (manageToken, cb) => {\n  let callCb = (result: Data.result) => {\n    cb(_ => Some(result));\n  };\n\n  Js.Promise.(\n    Fetch.fetch(baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/manage\")\n    |> then_(Fetch.Response.json)\n    |> then_(json => json |> Data.Decode.dResult |> callCb |> resolve)\n    |> ignore\n  );\n};\n\nlet createPoll = (poll, addError) => {\n  let payload = Data.encodePollPost(poll);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => {\n         switch (Data.Decode.dPollOrErrors(json)) {\n         | PollErrors(errors) =>\n           let questionErrors =\n             switch (errors.errors.question) {\n             | Some(errorList) => errorList |> List.map(s => \"Question \" ++ s)\n             | _ => []\n             };\n\n           let choiceErrors =\n             switch (errors.errors.choices) {\n             | Some(errorList) => errorList\n             | _ => []\n             };\n\n           let showErrors =\n             choiceErrors\n             @ questionErrors\n             |> Array.of_list\n             |> Js.Array.joinWith(\", \");\n\n           addError(\"error\", showErrors);\n           resolve(None);\n         | PollRes(poll) => resolve(Some(poll))\n         }\n       })\n  );\n};\n\nlet submitPoll = (id, response) => {\n  let payload = Data.encodeResponsePost(response);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ id ++ \"/respond\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResponseOrErrors(json) |> resolve)\n  );\n} /* }*/;\n\nlet removeChoice = (manageToken, choice) => {\n  let payload = Data.encodeChoice(choice);\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      baseUrl ++ \"/api/v1/polls/\" ++ manageToken ++ \"/remove_choice\",\n      Fetch.RequestInit.make(\n        ~method_=Post,\n        ~body=Fetch.BodyInit.make(Js.Json.stringify(payload)),\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(Fetch.Response.json)\n    |> then_(json => Data.Decode.dResultOrErrors(json) |> resolve)\n  );\n};\n\nlet destroyResponse = (manageToken, responseId) => {\n  let url =\n    baseUrl\n    ++ \"/api/v1/polls/\"\n    ++ manageToken\n    ++ \"/remove_response/\"\n    ++ string_of_int(responseId);\n\n  Js.Promise.(\n    Fetch.fetchWithInit(\n      url,\n      Fetch.RequestInit.make(\n        ~method_=Delete,\n        ~headers=Fetch.HeadersInit.make({\"Content-Type\": \"application/json\"}),\n        (),\n      ),\n    )\n    |> then_(res => res |> resolve)\n  );\n};"}]}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///Users/mike/Code/condorcet/ui/src/lib/Api.re","version":16}}}
>> Build system running: /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsb.exe -make-world
>>> stdout
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
bsb: no work to do.
[1/12] [34mBuilding[39m [2msrc/lib/Api.reast[22m
[2/12] [34mBuilding[39m [2msrc/lib/Api.d[22m
[3/12] [34mBuilding[39m [2msrc/lib/Api-Condorcet.cmj[22m
>>> stderr

Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
➡️ running compiler /Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsc.exe -c -I '/Users/mike/Code/condorcet/ui/lib/bs' -I '/Users/mike/Code/condorcet/ui/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/ui' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/imports' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/styles' -I '/Users/mike/Code/condorcet/ui/lib/bs/src/lib' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-log/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/re-dnd/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs' -I '/Users/mike/Code/condorcet/ui/node_modules/rationale/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/reason-react/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Dom' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-webapi/lib/bs/src/Webapi/Webapi__Canvas' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-fetch/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/@glennsl/bs-json/lib/bs/src' -I '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/ocaml' -bin-annot -bs-no-builtin-ppx-ml -open Condorcet -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-log/ppx' -ppx '/Users/mike/Code/condorcet/ui/node_modules/bs-platform/lib/bsppx.exe -bs-jsx 3' -nostdlib -w +a-4-9-40-41-42-50-102 -bs-re-out -impl /Users/mike/Code/condorcet/ui/node_modules/.lsp/Api-Condorcet.ast with pwd /Users/mike/Code/condorcet/ui
<< Replacing lastDefinitions for file:///Users/mike/Code/condorcet/ui/src/lib/Api.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/mike/Code/condorcet/ui/src/lib/Api.re", "diagnostics": []}}
